(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kh(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var ru={exports:{}},fi={},nu={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=Symbol.for("react.element"),Gh=Symbol.for("react.portal"),Qh=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Zh=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),tf=Symbol.for("react.suspense"),rf=Symbol.for("react.memo"),nf=Symbol.for("react.lazy"),Sa=Symbol.iterator;function sf(t){return t===null||typeof t!="object"?null:(t=Sa&&t[Sa]||t["@@iterator"],typeof t=="function"?t:null)}var su={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iu=Object.assign,ou={};function tn(t,e,r){this.props=t,this.context=e,this.refs=ou,this.updater=r||su}tn.prototype.isReactComponent={};tn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lu(){}lu.prototype=tn.prototype;function bl(t,e,r){this.props=t,this.context=e,this.refs=ou,this.updater=r||su}var jl=bl.prototype=new lu;jl.constructor=bl;iu(jl,tn.prototype);jl.isPureReactComponent=!0;var Ca=Array.isArray,au=Object.prototype.hasOwnProperty,Nl={current:null},cu={key:!0,ref:!0,__self:!0,__source:!0};function uu(t,e,r){var n,s={},i=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)au.call(e,n)&&!cu.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Xn,type:t,key:i,ref:l,props:s,_owner:Nl.current}}function of(t,e){return{$$typeof:Xn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xn}function lf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ea=/\/+/g;function Ii(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lf(""+t.key):e.toString(36)}function Ts(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Xn:case Gh:l=!0}}if(l)return l=t,s=s(l),t=n===""?"."+Ii(l,0):n,Ca(s)?(r="",t!=null&&(r=t.replace(Ea,"$&/")+"/"),Ts(s,e,r,"",function(u){return u})):s!=null&&(kl(s)&&(s=of(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Ea,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=n===""?".":n+":",Ca(t))for(var a=0;a<t.length;a++){i=t[a];var c=n+Ii(i,a);l+=Ts(i,e,r,c,s)}else if(c=sf(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=n+Ii(i,a++),l+=Ts(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function as(t,e,r){if(t==null)return t;var n=[],s=0;return Ts(t,n,"","",function(i){return e.call(r,i,s++)}),n}function af(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var be={current:null},Ps={transition:null},cf={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:Nl};function du(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:as,forEach:function(t,e,r){as(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return as(t,function(){e++}),e},toArray:function(t){return as(t,function(e){return e})||[]},only:function(t){if(!kl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=tn;B.Fragment=Qh;B.Profiler=Yh;B.PureComponent=bl;B.StrictMode=Jh;B.Suspense=tf;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cf;B.act=du;B.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=iu({},t.props),s=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Nl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)au.call(e,c)&&!cu.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Xn,type:t.type,key:s,ref:i,props:n,_owner:l}};B.createContext=function(t){return t={$$typeof:Zh,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xh,_context:t},t.Consumer=t};B.createElement=uu;B.createFactory=function(t){var e=uu.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:ef,render:t}};B.isValidElement=kl;B.lazy=function(t){return{$$typeof:nf,_payload:{_status:-1,_result:t},_init:af}};B.memo=function(t,e){return{$$typeof:rf,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=Ps.transition;Ps.transition={};try{t()}finally{Ps.transition=e}};B.unstable_act=du;B.useCallback=function(t,e){return be.current.useCallback(t,e)};B.useContext=function(t){return be.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return be.current.useDeferredValue(t)};B.useEffect=function(t,e){return be.current.useEffect(t,e)};B.useId=function(){return be.current.useId()};B.useImperativeHandle=function(t,e,r){return be.current.useImperativeHandle(t,e,r)};B.useInsertionEffect=function(t,e){return be.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return be.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return be.current.useMemo(t,e)};B.useReducer=function(t,e,r){return be.current.useReducer(t,e,r)};B.useRef=function(t){return be.current.useRef(t)};B.useState=function(t){return be.current.useState(t)};B.useSyncExternalStore=function(t,e,r){return be.current.useSyncExternalStore(t,e,r)};B.useTransition=function(){return be.current.useTransition()};B.version="18.3.1";nu.exports=B;var j=nu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf=j,df=Symbol.for("react.element"),hf=Symbol.for("react.fragment"),ff=Object.prototype.hasOwnProperty,mf=uf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pf={key:!0,ref:!0,__self:!0,__source:!0};function hu(t,e,r){var n,s={},i=null,l=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)ff.call(e,n)&&!pf.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:df,type:t,key:i,ref:l,props:s,_owner:mf.current}}fi.Fragment=hf;fi.jsx=hu;fi.jsxs=hu;ru.exports=fi;var o=ru.exports,fu={exports:{}},Ie={},mu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,M){var z=A.length;A.push(M);e:for(;0<z;){var ee=z-1>>>1,le=A[ee];if(0<s(le,M))A[ee]=M,A[z]=le,z=ee;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var M=A[0],z=A.pop();if(z!==M){A[0]=z;e:for(var ee=0,le=A.length,os=le>>>1;ee<os;){var Ht=2*(ee+1)-1,Li=A[Ht],Kt=Ht+1,ls=A[Kt];if(0>s(Li,z))Kt<le&&0>s(ls,Li)?(A[ee]=ls,A[Kt]=z,ee=Kt):(A[ee]=Li,A[Ht]=z,ee=Ht);else if(Kt<le&&0>s(ls,z))A[ee]=ls,A[Kt]=z,ee=Kt;else break e}}return M}function s(A,M){var z=A.sortIndex-M.sortIndex;return z!==0?z:A.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var c=[],u=[],h=1,d=null,g=3,v=!1,w=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=A)n(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=r(u)}}function y(A){if(_=!1,m(A),!w)if(r(c)!==null)w=!0,fe(S);else{var M=r(u);M!==null&&ve(y,M.startTime-A)}}function S(A,M){w=!1,_&&(_=!1,f(C),C=-1),v=!0;var z=g;try{for(m(M),d=r(c);d!==null&&(!(d.expirationTime>M)||A&&!E());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,g=d.priorityLevel;var le=ee(d.expirationTime<=M);M=t.unstable_now(),typeof le=="function"?d.callback=le:d===r(c)&&n(c),m(M)}else n(c);d=r(c)}if(d!==null)var os=!0;else{var Ht=r(u);Ht!==null&&ve(y,Ht.startTime-M),os=!1}return os}finally{d=null,g=z,v=!1}}var k=!1,x=null,C=-1,O=5,N=-1;function E(){return!(t.unstable_now()-N<O)}function $(){if(x!==null){var A=t.unstable_now();N=A;var M=!0;try{M=x(!0,A)}finally{M?P():(k=!1,x=null)}}else k=!1}var P;if(typeof p=="function")P=function(){p($)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Oe=I.port2;I.port1.onmessage=$,P=function(){Oe.postMessage(null)}}else P=function(){b($,0)};function fe(A){x=A,k||(k=!0,P())}function ve(A,M){C=b(function(){A(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,fe(S))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(A){switch(g){case 1:case 2:case 3:var M=3;break;default:M=g}var z=g;g=M;try{return A()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,M){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var z=g;g=A;try{return M()}finally{g=z}},t.unstable_scheduleCallback=function(A,M,z){var ee=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ee+z:ee):z=ee,A){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=z+le,A={id:h++,callback:M,priorityLevel:A,startTime:z,expirationTime:le,sortIndex:-1},z>ee?(A.sortIndex=z,e(u,A),r(c)===null&&A===r(u)&&(_?(f(C),C=-1):_=!0,ve(y,z-ee))):(A.sortIndex=le,e(c,A),w||v||(w=!0,fe(S))),A},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(A){var M=g;return function(){var z=g;g=M;try{return A.apply(this,arguments)}finally{g=z}}}})(pu);mu.exports=pu;var gf=mu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=j,Le=gf;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gu=new Set,Rn={};function mr(t,e){Wr(t,e),Wr(t+"Capture",e)}function Wr(t,e){for(Rn[t]=e,t=0;t<e.length;t++)gu.add(e[t])}var pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xo=Object.prototype.hasOwnProperty,vf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ta={},Pa={};function yf(t){return xo.call(Pa,t)?!0:xo.call(Ta,t)?!1:vf.test(t)?Pa[t]=!0:(Ta[t]=!0,!1)}function wf(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _f(t,e,r,n){if(e===null||typeof e>"u"||wf(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function je(t,e,r,n,s,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){he[t]=new je(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];he[e]=new je(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){he[t]=new je(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){he[t]=new je(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){he[t]=new je(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){he[t]=new je(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){he[t]=new je(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){he[t]=new je(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){he[t]=new je(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sl=/[\-:]([a-z])/g;function Cl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sl,Cl);he[e]=new je(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sl,Cl);he[e]=new je(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sl,Cl);he[e]=new je(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){he[t]=new je(t,1,!1,t.toLowerCase(),null,!1,!1)});he.xlinkHref=new je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){he[t]=new je(t,1,!1,t.toLowerCase(),null,!0,!0)});function El(t,e,r,n){var s=he.hasOwnProperty(e)?he[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_f(e,r,s,n)&&(r=null),n||s===null?yf(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var yt=xf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cs=Symbol.for("react.element"),kr=Symbol.for("react.portal"),Sr=Symbol.for("react.fragment"),Tl=Symbol.for("react.strict_mode"),vo=Symbol.for("react.profiler"),xu=Symbol.for("react.provider"),vu=Symbol.for("react.context"),Pl=Symbol.for("react.forward_ref"),yo=Symbol.for("react.suspense"),wo=Symbol.for("react.suspense_list"),Ol=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),yu=Symbol.for("react.offscreen"),Oa=Symbol.iterator;function ln(t){return t===null||typeof t!="object"?null:(t=Oa&&t[Oa]||t["@@iterator"],typeof t=="function"?t:null)}var X=Object.assign,Di;function gn(t){if(Di===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Di=e&&e[1]||""}return`
`+Di+t}var Mi=!1;function Ui(t,e){if(!t||Mi)return"";Mi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),l=s.length-1,a=i.length-1;1<=l&&0<=a&&s[l]!==i[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==i[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==i[a]){var c=`
`+s[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=a);break}}}finally{Mi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?gn(t):""}function bf(t){switch(t.tag){case 5:return gn(t.type);case 16:return gn("Lazy");case 13:return gn("Suspense");case 19:return gn("SuspenseList");case 0:case 2:case 15:return t=Ui(t.type,!1),t;case 11:return t=Ui(t.type.render,!1),t;case 1:return t=Ui(t.type,!0),t;default:return""}}function _o(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sr:return"Fragment";case kr:return"Portal";case vo:return"Profiler";case Tl:return"StrictMode";case yo:return"Suspense";case wo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vu:return(t.displayName||"Context")+".Consumer";case xu:return(t._context.displayName||"Context")+".Provider";case Pl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ol:return e=t.displayName||null,e!==null?e:_o(t.type)||"Memo";case Nt:e=t._payload,t=t._init;try{return _o(t(e))}catch{}}return null}function jf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _o(e);case 8:return e===Tl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ut(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nf(t){var e=wu(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function us(t){t._valueTracker||(t._valueTracker=Nf(t))}function _u(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=wu(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Fs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bo(t,e){var r=e.checked;return X({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Aa(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ut(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bu(t,e){e=e.checked,e!=null&&El(t,"checked",e,!1)}function jo(t,e){bu(t,e);var r=Ut(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?No(t,e.type,r):e.hasOwnProperty("defaultValue")&&No(t,e.type,Ut(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ra(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function No(t,e,r){(e!=="number"||Fs(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var xn=Array.isArray;function Dr(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ut(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ko(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return X({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $a(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if(xn(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ut(r)}}function ju(t,e){var r=Ut(e.value),n=Ut(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function La(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function So(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ds,ku=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ds=ds||document.createElement("div"),ds.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ds.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $n(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var _n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kf=["Webkit","ms","Moz","O"];Object.keys(_n).forEach(function(t){kf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_n[e]=_n[t]})});function Su(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||_n.hasOwnProperty(t)&&_n[t]?(""+e).trim():e+"px"}function Cu(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Su(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Sf=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Co(t,e){if(e){if(Sf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Eo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=null;function Al(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Po=null,Mr=null,Ur=null;function Ia(t){if(t=ts(t)){if(typeof Po!="function")throw Error(T(280));var e=t.stateNode;e&&(e=vi(e),Po(t.stateNode,t.type,e))}}function Eu(t){Mr?Ur?Ur.push(t):Ur=[t]:Mr=t}function Tu(){if(Mr){var t=Mr,e=Ur;if(Ur=Mr=null,Ia(t),e)for(t=0;t<e.length;t++)Ia(e[t])}}function Pu(t,e){return t(e)}function Ou(){}var zi=!1;function Au(t,e,r){if(zi)return t(e,r);zi=!0;try{return Pu(t,e,r)}finally{zi=!1,(Mr!==null||Ur!==null)&&(Ou(),Tu())}}function Ln(t,e){var r=t.stateNode;if(r===null)return null;var n=vi(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var Oo=!1;if(pt)try{var an={};Object.defineProperty(an,"passive",{get:function(){Oo=!0}}),window.addEventListener("test",an,an),window.removeEventListener("test",an,an)}catch{Oo=!1}function Cf(t,e,r,n,s,i,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var bn=!1,Bs=null,qs=!1,Ao=null,Ef={onError:function(t){bn=!0,Bs=t}};function Tf(t,e,r,n,s,i,l,a,c){bn=!1,Bs=null,Cf.apply(Ef,arguments)}function Pf(t,e,r,n,s,i,l,a,c){if(Tf.apply(this,arguments),bn){if(bn){var u=Bs;bn=!1,Bs=null}else throw Error(T(198));qs||(qs=!0,Ao=u)}}function pr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Ru(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Da(t){if(pr(t)!==t)throw Error(T(188))}function Of(t){var e=t.alternate;if(!e){if(e=pr(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Da(s),t;if(i===n)return Da(s),e;i=i.sibling}throw Error(T(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,a=s.child;a;){if(a===r){l=!0,r=s,n=i;break}if(a===n){l=!0,n=s,r=i;break}a=a.sibling}if(!l){for(a=i.child;a;){if(a===r){l=!0,r=i,n=s;break}if(a===n){l=!0,n=i,r=s;break}a=a.sibling}if(!l)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function $u(t){return t=Of(t),t!==null?Lu(t):null}function Lu(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lu(t);if(e!==null)return e;t=t.sibling}return null}var Iu=Le.unstable_scheduleCallback,Ma=Le.unstable_cancelCallback,Af=Le.unstable_shouldYield,Rf=Le.unstable_requestPaint,te=Le.unstable_now,$f=Le.unstable_getCurrentPriorityLevel,Rl=Le.unstable_ImmediatePriority,Du=Le.unstable_UserBlockingPriority,Ws=Le.unstable_NormalPriority,Lf=Le.unstable_LowPriority,Mu=Le.unstable_IdlePriority,mi=null,ot=null;function If(t){if(ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(mi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Uf,Df=Math.log,Mf=Math.LN2;function Uf(t){return t>>>=0,t===0?32:31-(Df(t)/Mf|0)|0}var hs=64,fs=4194304;function vn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vs(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var a=l&~s;a!==0?n=vn(a):(i&=l,i!==0&&(n=vn(i)))}else l=r&~s,l!==0?n=vn(l):i!==0&&(n=vn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ze(e),s=1<<r,n|=t[r],e&=~s;return n}function zf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ff(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Ze(i),a=1<<l,c=s[l];c===-1?(!(a&r)||a&n)&&(s[l]=zf(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Ro(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uu(){var t=hs;return hs<<=1,!(hs&4194240)&&(hs=64),t}function Fi(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Zn(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ze(e),t[e]=r}function Bf(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Ze(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function $l(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ze(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var W=0;function zu(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fu,Ll,Bu,qu,Wu,$o=!1,ms=[],Ot=null,At=null,Rt=null,In=new Map,Dn=new Map,St=[],qf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ua(t,e){switch(t){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":In.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dn.delete(e.pointerId)}}function cn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ts(e),e!==null&&Ll(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Wf(t,e,r,n,s){switch(e){case"focusin":return Ot=cn(Ot,t,e,r,n,s),!0;case"dragenter":return At=cn(At,t,e,r,n,s),!0;case"mouseover":return Rt=cn(Rt,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return In.set(i,cn(In.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Dn.set(i,cn(Dn.get(i)||null,t,e,r,n,s)),!0}return!1}function Vu(t){var e=tr(t.target);if(e!==null){var r=pr(e);if(r!==null){if(e=r.tag,e===13){if(e=Ru(r),e!==null){t.blockedOn=e,Wu(t.priority,function(){Bu(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Os(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Lo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);To=n,r.target.dispatchEvent(n),To=null}else return e=ts(r),e!==null&&Ll(e),t.blockedOn=r,!1;e.shift()}return!0}function za(t,e,r){Os(t)&&r.delete(e)}function Vf(){$o=!1,Ot!==null&&Os(Ot)&&(Ot=null),At!==null&&Os(At)&&(At=null),Rt!==null&&Os(Rt)&&(Rt=null),In.forEach(za),Dn.forEach(za)}function un(t,e){t.blockedOn===e&&(t.blockedOn=null,$o||($o=!0,Le.unstable_scheduleCallback(Le.unstable_NormalPriority,Vf)))}function Mn(t){function e(s){return un(s,t)}if(0<ms.length){un(ms[0],t);for(var r=1;r<ms.length;r++){var n=ms[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ot!==null&&un(Ot,t),At!==null&&un(At,t),Rt!==null&&un(Rt,t),In.forEach(e),Dn.forEach(e),r=0;r<St.length;r++)n=St[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<St.length&&(r=St[0],r.blockedOn===null);)Vu(r),r.blockedOn===null&&St.shift()}var zr=yt.ReactCurrentBatchConfig,Hs=!0;function Hf(t,e,r,n){var s=W,i=zr.transition;zr.transition=null;try{W=1,Il(t,e,r,n)}finally{W=s,zr.transition=i}}function Kf(t,e,r,n){var s=W,i=zr.transition;zr.transition=null;try{W=4,Il(t,e,r,n)}finally{W=s,zr.transition=i}}function Il(t,e,r,n){if(Hs){var s=Lo(t,e,r,n);if(s===null)Yi(t,e,n,Ks,r),Ua(t,n);else if(Wf(s,t,e,r,n))n.stopPropagation();else if(Ua(t,n),e&4&&-1<qf.indexOf(t)){for(;s!==null;){var i=ts(s);if(i!==null&&Fu(i),i=Lo(t,e,r,n),i===null&&Yi(t,e,n,Ks,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Yi(t,e,n,null,r)}}var Ks=null;function Lo(t,e,r,n){if(Ks=null,t=Al(n),t=tr(t),t!==null)if(e=pr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Ru(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ks=t,null}function Hu(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($f()){case Rl:return 1;case Du:return 4;case Ws:case Lf:return 16;case Mu:return 536870912;default:return 16}default:return 16}}var Tt=null,Dl=null,As=null;function Ku(){if(As)return As;var t,e=Dl,r=e.length,n,s="value"in Tt?Tt.value:Tt.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var l=r-t;for(n=1;n<=l&&e[r-n]===s[i-n];n++);return As=s.slice(t,1<n?1-n:void 0)}function Rs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ps(){return!0}function Fa(){return!1}function De(t){function e(r,n,s,i,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ps:Fa,this.isPropagationStopped=Fa,this}return X(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),e}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ml=De(rn),es=X({},rn,{view:0,detail:0}),Gf=De(es),Bi,qi,dn,pi=X({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dn&&(dn&&t.type==="mousemove"?(Bi=t.screenX-dn.screenX,qi=t.screenY-dn.screenY):qi=Bi=0,dn=t),Bi)},movementY:function(t){return"movementY"in t?t.movementY:qi}}),Ba=De(pi),Qf=X({},pi,{dataTransfer:0}),Jf=De(Qf),Yf=X({},es,{relatedTarget:0}),Wi=De(Yf),Xf=X({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Zf=De(Xf),em=X({},rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tm=De(em),rm=X({},rn,{data:0}),qa=De(rm),nm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},im={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function om(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=im[t])?!!e[t]:!1}function Ul(){return om}var lm=X({},es,{key:function(t){if(t.key){var e=nm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(t){return t.type==="keypress"?Rs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),am=De(lm),cm=X({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wa=De(cm),um=X({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),dm=De(um),hm=X({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fm=De(hm),mm=X({},pi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pm=De(mm),gm=[9,13,27,32],zl=pt&&"CompositionEvent"in window,jn=null;pt&&"documentMode"in document&&(jn=document.documentMode);var xm=pt&&"TextEvent"in window&&!jn,Gu=pt&&(!zl||jn&&8<jn&&11>=jn),Va=" ",Ha=!1;function Qu(t,e){switch(t){case"keyup":return gm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cr=!1;function vm(t,e){switch(t){case"compositionend":return Ju(e);case"keypress":return e.which!==32?null:(Ha=!0,Va);case"textInput":return t=e.data,t===Va&&Ha?null:t;default:return null}}function ym(t,e){if(Cr)return t==="compositionend"||!zl&&Qu(t,e)?(t=Ku(),As=Dl=Tt=null,Cr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gu&&e.locale!=="ko"?null:e.data;default:return null}}var wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ka(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wm[t.type]:e==="textarea"}function Yu(t,e,r,n){Eu(n),e=Gs(e,"onChange"),0<e.length&&(r=new Ml("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Nn=null,Un=null;function _m(t){ad(t,0)}function gi(t){var e=Pr(t);if(_u(e))return t}function bm(t,e){if(t==="change")return e}var Xu=!1;if(pt){var Vi;if(pt){var Hi="oninput"in document;if(!Hi){var Ga=document.createElement("div");Ga.setAttribute("oninput","return;"),Hi=typeof Ga.oninput=="function"}Vi=Hi}else Vi=!1;Xu=Vi&&(!document.documentMode||9<document.documentMode)}function Qa(){Nn&&(Nn.detachEvent("onpropertychange",Zu),Un=Nn=null)}function Zu(t){if(t.propertyName==="value"&&gi(Un)){var e=[];Yu(e,Un,t,Al(t)),Au(_m,e)}}function jm(t,e,r){t==="focusin"?(Qa(),Nn=e,Un=r,Nn.attachEvent("onpropertychange",Zu)):t==="focusout"&&Qa()}function Nm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gi(Un)}function km(t,e){if(t==="click")return gi(e)}function Sm(t,e){if(t==="input"||t==="change")return gi(e)}function Cm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tt=typeof Object.is=="function"?Object.is:Cm;function zn(t,e){if(tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xo.call(e,s)||!tt(t[s],e[s]))return!1}return!0}function Ja(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ya(t,e){var r=Ja(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ja(r)}}function ed(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ed(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function td(){for(var t=window,e=Fs();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Fs(t.document)}return e}function Fl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Em(t){var e=td(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ed(r.ownerDocument.documentElement,r)){if(n!==null&&Fl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Ya(r,i);var l=Ya(r,n);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tm=pt&&"documentMode"in document&&11>=document.documentMode,Er=null,Io=null,kn=null,Do=!1;function Xa(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Do||Er==null||Er!==Fs(n)||(n=Er,"selectionStart"in n&&Fl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),kn&&zn(kn,n)||(kn=n,n=Gs(Io,"onSelect"),0<n.length&&(e=new Ml("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Er)))}function gs(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Tr={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionend:gs("Transition","TransitionEnd")},Ki={},rd={};pt&&(rd=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function xi(t){if(Ki[t])return Ki[t];if(!Tr[t])return t;var e=Tr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in rd)return Ki[t]=e[r];return t}var nd=xi("animationend"),sd=xi("animationiteration"),id=xi("animationstart"),od=xi("transitionend"),ld=new Map,Za="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bt(t,e){ld.set(t,e),mr(e,[t])}for(var Gi=0;Gi<Za.length;Gi++){var Qi=Za[Gi],Pm=Qi.toLowerCase(),Om=Qi[0].toUpperCase()+Qi.slice(1);Bt(Pm,"on"+Om)}Bt(nd,"onAnimationEnd");Bt(sd,"onAnimationIteration");Bt(id,"onAnimationStart");Bt("dblclick","onDoubleClick");Bt("focusin","onFocus");Bt("focusout","onBlur");Bt(od,"onTransitionEnd");Wr("onMouseEnter",["mouseout","mouseover"]);Wr("onMouseLeave",["mouseout","mouseover"]);Wr("onPointerEnter",["pointerout","pointerover"]);Wr("onPointerLeave",["pointerout","pointerover"]);mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Am=new Set("cancel close invalid load scroll toggle".split(" ").concat(yn));function ec(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Pf(n,e,void 0,t),t.currentTarget=null}function ad(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var l=n.length-1;0<=l;l--){var a=n[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;ec(s,a,u),i=c}else for(l=0;l<n.length;l++){if(a=n[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;ec(s,a,u),i=c}}}if(qs)throw t=Ao,qs=!1,Ao=null,t}function K(t,e){var r=e[Bo];r===void 0&&(r=e[Bo]=new Set);var n=t+"__bubble";r.has(n)||(cd(e,t,2,!1),r.add(n))}function Ji(t,e,r){var n=0;e&&(n|=4),cd(r,t,n,e)}var xs="_reactListening"+Math.random().toString(36).slice(2);function Fn(t){if(!t[xs]){t[xs]=!0,gu.forEach(function(r){r!=="selectionchange"&&(Am.has(r)||Ji(r,!1,t),Ji(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xs]||(e[xs]=!0,Ji("selectionchange",!1,e))}}function cd(t,e,r,n){switch(Hu(e)){case 1:var s=Hf;break;case 4:s=Kf;break;default:s=Il}r=s.bind(null,e,r,t),s=void 0,!Oo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Yi(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;a!==null;){if(l=tr(a),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}a=a.parentNode}}n=n.return}Au(function(){var u=i,h=Al(r),d=[];e:{var g=ld.get(t);if(g!==void 0){var v=Ml,w=t;switch(t){case"keypress":if(Rs(r)===0)break e;case"keydown":case"keyup":v=am;break;case"focusin":w="focus",v=Wi;break;case"focusout":w="blur",v=Wi;break;case"beforeblur":case"afterblur":v=Wi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=dm;break;case nd:case sd:case id:v=Zf;break;case od:v=fm;break;case"scroll":v=Gf;break;case"wheel":v=pm;break;case"copy":case"cut":case"paste":v=tm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Wa}var _=(e&4)!==0,b=!_&&t==="scroll",f=_?g!==null?g+"Capture":null:g;_=[];for(var p=u,m;p!==null;){m=p;var y=m.stateNode;if(m.tag===5&&y!==null&&(m=y,f!==null&&(y=Ln(p,f),y!=null&&_.push(Bn(p,y,m)))),b)break;p=p.return}0<_.length&&(g=new v(g,w,null,r,h),d.push({event:g,listeners:_}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&r!==To&&(w=r.relatedTarget||r.fromElement)&&(tr(w)||w[gt]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(w=r.relatedTarget||r.toElement,v=u,w=w?tr(w):null,w!==null&&(b=pr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=u),v!==w)){if(_=Ba,y="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=Wa,y="onPointerLeave",f="onPointerEnter",p="pointer"),b=v==null?g:Pr(v),m=w==null?g:Pr(w),g=new _(y,p+"leave",v,r,h),g.target=b,g.relatedTarget=m,y=null,tr(h)===u&&(_=new _(f,p+"enter",w,r,h),_.target=m,_.relatedTarget=b,y=_),b=y,v&&w)t:{for(_=v,f=w,p=0,m=_;m;m=xr(m))p++;for(m=0,y=f;y;y=xr(y))m++;for(;0<p-m;)_=xr(_),p--;for(;0<m-p;)f=xr(f),m--;for(;p--;){if(_===f||f!==null&&_===f.alternate)break t;_=xr(_),f=xr(f)}_=null}else _=null;v!==null&&tc(d,g,v,_,!1),w!==null&&b!==null&&tc(d,b,w,_,!0)}}e:{if(g=u?Pr(u):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var S=bm;else if(Ka(g))if(Xu)S=Sm;else{S=Nm;var k=jm}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=km);if(S&&(S=S(t,u))){Yu(d,S,r,h);break e}k&&k(t,g,u),t==="focusout"&&(k=g._wrapperState)&&k.controlled&&g.type==="number"&&No(g,"number",g.value)}switch(k=u?Pr(u):window,t){case"focusin":(Ka(k)||k.contentEditable==="true")&&(Er=k,Io=u,kn=null);break;case"focusout":kn=Io=Er=null;break;case"mousedown":Do=!0;break;case"contextmenu":case"mouseup":case"dragend":Do=!1,Xa(d,r,h);break;case"selectionchange":if(Tm)break;case"keydown":case"keyup":Xa(d,r,h)}var x;if(zl)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Cr?Qu(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Gu&&r.locale!=="ko"&&(Cr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Cr&&(x=Ku()):(Tt=h,Dl="value"in Tt?Tt.value:Tt.textContent,Cr=!0)),k=Gs(u,C),0<k.length&&(C=new qa(C,t,null,r,h),d.push({event:C,listeners:k}),x?C.data=x:(x=Ju(r),x!==null&&(C.data=x)))),(x=xm?vm(t,r):ym(t,r))&&(u=Gs(u,"onBeforeInput"),0<u.length&&(h=new qa("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=x))}ad(d,e)})}function Bn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Gs(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ln(t,r),i!=null&&n.unshift(Bn(t,i,s)),i=Ln(t,e),i!=null&&n.push(Bn(t,i,s))),t=t.return}return n}function xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tc(t,e,r,n,s){for(var i=e._reactName,l=[];r!==null&&r!==n;){var a=r,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,s?(c=Ln(r,i),c!=null&&l.unshift(Bn(r,c,a))):s||(c=Ln(r,i),c!=null&&l.push(Bn(r,c,a)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var Rm=/\r\n?/g,$m=/\u0000|\uFFFD/g;function rc(t){return(typeof t=="string"?t:""+t).replace(Rm,`
`).replace($m,"")}function vs(t,e,r){if(e=rc(e),rc(t)!==e&&r)throw Error(T(425))}function Qs(){}var Mo=null,Uo=null;function zo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fo=typeof setTimeout=="function"?setTimeout:void 0,Lm=typeof clearTimeout=="function"?clearTimeout:void 0,nc=typeof Promise=="function"?Promise:void 0,Im=typeof queueMicrotask=="function"?queueMicrotask:typeof nc<"u"?function(t){return nc.resolve(null).then(t).catch(Dm)}:Fo;function Dm(t){setTimeout(function(){throw t})}function Xi(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Mn(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mn(e)}function $t(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var nn=Math.random().toString(36).slice(2),it="__reactFiber$"+nn,qn="__reactProps$"+nn,gt="__reactContainer$"+nn,Bo="__reactEvents$"+nn,Mm="__reactListeners$"+nn,Um="__reactHandles$"+nn;function tr(t){var e=t[it];if(e)return e;for(var r=t.parentNode;r;){if(e=r[gt]||r[it]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=sc(t);t!==null;){if(r=t[it])return r;t=sc(t)}return e}t=r,r=t.parentNode}return null}function ts(t){return t=t[it]||t[gt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function vi(t){return t[qn]||null}var qo=[],Or=-1;function qt(t){return{current:t}}function G(t){0>Or||(t.current=qo[Or],qo[Or]=null,Or--)}function H(t,e){Or++,qo[Or]=t.current,t.current=e}var zt={},xe=qt(zt),Ce=qt(!1),ar=zt;function Vr(t,e){var r=t.type.contextTypes;if(!r)return zt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ee(t){return t=t.childContextTypes,t!=null}function Js(){G(Ce),G(xe)}function ic(t,e,r){if(xe.current!==zt)throw Error(T(168));H(xe,e),H(Ce,r)}function ud(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(T(108,jf(t)||"Unknown",s));return X({},r,n)}function Ys(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zt,ar=xe.current,H(xe,t),H(Ce,Ce.current),!0}function oc(t,e,r){var n=t.stateNode;if(!n)throw Error(T(169));r?(t=ud(t,e,ar),n.__reactInternalMemoizedMergedChildContext=t,G(Ce),G(xe),H(xe,t)):G(Ce),H(Ce,r)}var dt=null,yi=!1,Zi=!1;function dd(t){dt===null?dt=[t]:dt.push(t)}function zm(t){yi=!0,dd(t)}function Wt(){if(!Zi&&dt!==null){Zi=!0;var t=0,e=W;try{var r=dt;for(W=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}dt=null,yi=!1}catch(s){throw dt!==null&&(dt=dt.slice(t+1)),Iu(Rl,Wt),s}finally{W=e,Zi=!1}}return null}var Ar=[],Rr=0,Xs=null,Zs=0,Me=[],Ue=0,cr=null,ht=1,ft="";function Jt(t,e){Ar[Rr++]=Zs,Ar[Rr++]=Xs,Xs=t,Zs=e}function hd(t,e,r){Me[Ue++]=ht,Me[Ue++]=ft,Me[Ue++]=cr,cr=t;var n=ht;t=ft;var s=32-Ze(n)-1;n&=~(1<<s),r+=1;var i=32-Ze(e)+s;if(30<i){var l=s-s%5;i=(n&(1<<l)-1).toString(32),n>>=l,s-=l,ht=1<<32-Ze(e)+s|r<<s|n,ft=i+t}else ht=1<<i|r<<s|n,ft=t}function Bl(t){t.return!==null&&(Jt(t,1),hd(t,1,0))}function ql(t){for(;t===Xs;)Xs=Ar[--Rr],Ar[Rr]=null,Zs=Ar[--Rr],Ar[Rr]=null;for(;t===cr;)cr=Me[--Ue],Me[Ue]=null,ft=Me[--Ue],Me[Ue]=null,ht=Me[--Ue],Me[Ue]=null}var $e=null,Re=null,Q=!1,Xe=null;function fd(t,e){var r=ze(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function lc(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$e=t,Re=$t(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$e=t,Re=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=cr!==null?{id:ht,overflow:ft}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ze(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,$e=t,Re=null,!0):!1;default:return!1}}function Wo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vo(t){if(Q){var e=Re;if(e){var r=e;if(!lc(t,e)){if(Wo(t))throw Error(T(418));e=$t(r.nextSibling);var n=$e;e&&lc(t,e)?fd(n,r):(t.flags=t.flags&-4097|2,Q=!1,$e=t)}}else{if(Wo(t))throw Error(T(418));t.flags=t.flags&-4097|2,Q=!1,$e=t}}}function ac(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$e=t}function ys(t){if(t!==$e)return!1;if(!Q)return ac(t),Q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zo(t.type,t.memoizedProps)),e&&(e=Re)){if(Wo(t))throw md(),Error(T(418));for(;e;)fd(t,e),e=$t(e.nextSibling)}if(ac(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Re=$t(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Re=null}}else Re=$e?$t(t.stateNode.nextSibling):null;return!0}function md(){for(var t=Re;t;)t=$t(t.nextSibling)}function Hr(){Re=$e=null,Q=!1}function Wl(t){Xe===null?Xe=[t]:Xe.push(t)}var Fm=yt.ReactCurrentBatchConfig;function hn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var a=s.refs;l===null?delete a[i]:a[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function ws(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cc(t){var e=t._init;return e(t._payload)}function pd(t){function e(f,p){if(t){var m=f.deletions;m===null?(f.deletions=[p],f.flags|=16):m.push(p)}}function r(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function n(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function s(f,p){return f=Mt(f,p),f.index=0,f.sibling=null,f}function i(f,p,m){return f.index=m,t?(m=f.alternate,m!==null?(m=m.index,m<p?(f.flags|=2,p):m):(f.flags|=2,p)):(f.flags|=1048576,p)}function l(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,p,m,y){return p===null||p.tag!==6?(p=oo(m,f.mode,y),p.return=f,p):(p=s(p,m),p.return=f,p)}function c(f,p,m,y){var S=m.type;return S===Sr?h(f,p,m.props.children,y,m.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nt&&cc(S)===p.type)?(y=s(p,m.props),y.ref=hn(f,p,m),y.return=f,y):(y=zs(m.type,m.key,m.props,null,f.mode,y),y.ref=hn(f,p,m),y.return=f,y)}function u(f,p,m,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=lo(m,f.mode,y),p.return=f,p):(p=s(p,m.children||[]),p.return=f,p)}function h(f,p,m,y,S){return p===null||p.tag!==7?(p=lr(m,f.mode,y,S),p.return=f,p):(p=s(p,m),p.return=f,p)}function d(f,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=oo(""+p,f.mode,m),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case cs:return m=zs(p.type,p.key,p.props,null,f.mode,m),m.ref=hn(f,null,p),m.return=f,m;case kr:return p=lo(p,f.mode,m),p.return=f,p;case Nt:var y=p._init;return d(f,y(p._payload),m)}if(xn(p)||ln(p))return p=lr(p,f.mode,m,null),p.return=f,p;ws(f,p)}return null}function g(f,p,m,y){var S=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:a(f,p,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case cs:return m.key===S?c(f,p,m,y):null;case kr:return m.key===S?u(f,p,m,y):null;case Nt:return S=m._init,g(f,p,S(m._payload),y)}if(xn(m)||ln(m))return S!==null?null:h(f,p,m,y,null);ws(f,m)}return null}function v(f,p,m,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return f=f.get(m)||null,a(p,f,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case cs:return f=f.get(y.key===null?m:y.key)||null,c(p,f,y,S);case kr:return f=f.get(y.key===null?m:y.key)||null,u(p,f,y,S);case Nt:var k=y._init;return v(f,p,m,k(y._payload),S)}if(xn(y)||ln(y))return f=f.get(m)||null,h(p,f,y,S,null);ws(p,y)}return null}function w(f,p,m,y){for(var S=null,k=null,x=p,C=p=0,O=null;x!==null&&C<m.length;C++){x.index>C?(O=x,x=null):O=x.sibling;var N=g(f,x,m[C],y);if(N===null){x===null&&(x=O);break}t&&x&&N.alternate===null&&e(f,x),p=i(N,p,C),k===null?S=N:k.sibling=N,k=N,x=O}if(C===m.length)return r(f,x),Q&&Jt(f,C),S;if(x===null){for(;C<m.length;C++)x=d(f,m[C],y),x!==null&&(p=i(x,p,C),k===null?S=x:k.sibling=x,k=x);return Q&&Jt(f,C),S}for(x=n(f,x);C<m.length;C++)O=v(x,f,C,m[C],y),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?C:O.key),p=i(O,p,C),k===null?S=O:k.sibling=O,k=O);return t&&x.forEach(function(E){return e(f,E)}),Q&&Jt(f,C),S}function _(f,p,m,y){var S=ln(m);if(typeof S!="function")throw Error(T(150));if(m=S.call(m),m==null)throw Error(T(151));for(var k=S=null,x=p,C=p=0,O=null,N=m.next();x!==null&&!N.done;C++,N=m.next()){x.index>C?(O=x,x=null):O=x.sibling;var E=g(f,x,N.value,y);if(E===null){x===null&&(x=O);break}t&&x&&E.alternate===null&&e(f,x),p=i(E,p,C),k===null?S=E:k.sibling=E,k=E,x=O}if(N.done)return r(f,x),Q&&Jt(f,C),S;if(x===null){for(;!N.done;C++,N=m.next())N=d(f,N.value,y),N!==null&&(p=i(N,p,C),k===null?S=N:k.sibling=N,k=N);return Q&&Jt(f,C),S}for(x=n(f,x);!N.done;C++,N=m.next())N=v(x,f,C,N.value,y),N!==null&&(t&&N.alternate!==null&&x.delete(N.key===null?C:N.key),p=i(N,p,C),k===null?S=N:k.sibling=N,k=N);return t&&x.forEach(function($){return e(f,$)}),Q&&Jt(f,C),S}function b(f,p,m,y){if(typeof m=="object"&&m!==null&&m.type===Sr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case cs:e:{for(var S=m.key,k=p;k!==null;){if(k.key===S){if(S=m.type,S===Sr){if(k.tag===7){r(f,k.sibling),p=s(k,m.props.children),p.return=f,f=p;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nt&&cc(S)===k.type){r(f,k.sibling),p=s(k,m.props),p.ref=hn(f,k,m),p.return=f,f=p;break e}r(f,k);break}else e(f,k);k=k.sibling}m.type===Sr?(p=lr(m.props.children,f.mode,y,m.key),p.return=f,f=p):(y=zs(m.type,m.key,m.props,null,f.mode,y),y.ref=hn(f,p,m),y.return=f,f=y)}return l(f);case kr:e:{for(k=m.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){r(f,p.sibling),p=s(p,m.children||[]),p.return=f,f=p;break e}else{r(f,p);break}else e(f,p);p=p.sibling}p=lo(m,f.mode,y),p.return=f,f=p}return l(f);case Nt:return k=m._init,b(f,p,k(m._payload),y)}if(xn(m))return w(f,p,m,y);if(ln(m))return _(f,p,m,y);ws(f,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(r(f,p.sibling),p=s(p,m),p.return=f,f=p):(r(f,p),p=oo(m,f.mode,y),p.return=f,f=p),l(f)):r(f,p)}return b}var Kr=pd(!0),gd=pd(!1),ei=qt(null),ti=null,$r=null,Vl=null;function Hl(){Vl=$r=ti=null}function Kl(t){var e=ei.current;G(ei),t._currentValue=e}function Ho(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Fr(t,e){ti=t,Vl=$r=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Se=!0),t.firstContext=null)}function We(t){var e=t._currentValue;if(Vl!==t)if(t={context:t,memoizedValue:e,next:null},$r===null){if(ti===null)throw Error(T(308));$r=t,ti.dependencies={lanes:0,firstContext:t}}else $r=$r.next=t;return e}var rr=null;function Gl(t){rr===null?rr=[t]:rr.push(t)}function xd(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Gl(e)):(r.next=s.next,s.next=r),e.interleaved=r,xt(t,n)}function xt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var kt=!1;function Ql(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,q&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,xt(t,r)}return s=n.interleaved,s===null?(e.next=e,Gl(n)):(e.next=s.next,s.next=e),n.interleaved=e,xt(t,r)}function $s(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$l(t,r)}}function uc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ri(t,e,r,n){var s=t.updateQueue;kt=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==l&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;l=0,h=u=c=null,a=i;do{var g=a.lane,v=a.eventTime;if((n&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(g=e,v=r,_.tag){case 1:if(w=_.payload,typeof w=="function"){d=w.call(v,d,g);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,g=typeof w=="function"?w.call(v,d,g):w,g==null)break e;d=X({},d,g);break e;case 2:kt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,c=d):h=h.next=v,l|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);dr|=l,t.lanes=l,t.memoizedState=d}}function dc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(T(191,s));s.call(n)}}}var rs={},lt=qt(rs),Wn=qt(rs),Vn=qt(rs);function nr(t){if(t===rs)throw Error(T(174));return t}function Jl(t,e){switch(H(Vn,e),H(Wn,t),H(lt,rs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:So(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=So(e,t)}G(lt),H(lt,e)}function Gr(){G(lt),G(Wn),G(Vn)}function yd(t){nr(Vn.current);var e=nr(lt.current),r=So(e,t.type);e!==r&&(H(Wn,t),H(lt,r))}function Yl(t){Wn.current===t&&(G(lt),G(Wn))}var J=qt(0);function ni(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eo=[];function Xl(){for(var t=0;t<eo.length;t++)eo[t]._workInProgressVersionPrimary=null;eo.length=0}var Ls=yt.ReactCurrentDispatcher,to=yt.ReactCurrentBatchConfig,ur=0,Y=null,ie=null,ae=null,si=!1,Sn=!1,Hn=0,Bm=0;function me(){throw Error(T(321))}function Zl(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!tt(t[r],e[r]))return!1;return!0}function ea(t,e,r,n,s,i){if(ur=i,Y=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ls.current=t===null||t.memoizedState===null?Hm:Km,t=r(n,s),Sn){i=0;do{if(Sn=!1,Hn=0,25<=i)throw Error(T(301));i+=1,ae=ie=null,e.updateQueue=null,Ls.current=Gm,t=r(n,s)}while(Sn)}if(Ls.current=ii,e=ie!==null&&ie.next!==null,ur=0,ae=ie=Y=null,si=!1,e)throw Error(T(300));return t}function ta(){var t=Hn!==0;return Hn=0,t}function nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?Y.memoizedState=ae=t:ae=ae.next=t,ae}function Ve(){if(ie===null){var t=Y.alternate;t=t!==null?t.memoizedState:null}else t=ie.next;var e=ae===null?Y.memoizedState:ae.next;if(e!==null)ae=e,ie=t;else{if(t===null)throw Error(T(310));ie=t,t={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},ae===null?Y.memoizedState=ae=t:ae=ae.next=t}return ae}function Kn(t,e){return typeof e=="function"?e(t):e}function ro(t){var e=Ve(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=ie,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=l=null,c=null,u=i;do{var h=u.lane;if((ur&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,l=n):c=c.next=d,Y.lanes|=h,dr|=h}u=u.next}while(u!==null&&u!==i);c===null?l=n:c.next=a,tt(n,e.memoizedState)||(Se=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Y.lanes|=i,dr|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function no(t){var e=Ve(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);tt(i,e.memoizedState)||(Se=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function wd(){}function _d(t,e){var r=Y,n=Ve(),s=e(),i=!tt(n.memoizedState,s);if(i&&(n.memoizedState=s,Se=!0),n=n.queue,ra(Nd.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||ae!==null&&ae.memoizedState.tag&1){if(r.flags|=2048,Gn(9,jd.bind(null,r,n,s,e),void 0,null),ce===null)throw Error(T(349));ur&30||bd(r,e,s)}return s}function bd(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Y.updateQueue,e===null?(e={lastEffect:null,stores:null},Y.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function jd(t,e,r,n){e.value=r,e.getSnapshot=n,kd(e)&&Sd(t)}function Nd(t,e,r){return r(function(){kd(e)&&Sd(t)})}function kd(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!tt(t,r)}catch{return!0}}function Sd(t){var e=xt(t,1);e!==null&&et(e,t,1,-1)}function hc(t){var e=nt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:t},e.queue=t,t=t.dispatch=Vm.bind(null,Y,t),[e.memoizedState,t]}function Gn(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Y.updateQueue,e===null?(e={lastEffect:null,stores:null},Y.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Cd(){return Ve().memoizedState}function Is(t,e,r,n){var s=nt();Y.flags|=t,s.memoizedState=Gn(1|e,r,void 0,n===void 0?null:n)}function wi(t,e,r,n){var s=Ve();n=n===void 0?null:n;var i=void 0;if(ie!==null){var l=ie.memoizedState;if(i=l.destroy,n!==null&&Zl(n,l.deps)){s.memoizedState=Gn(e,r,i,n);return}}Y.flags|=t,s.memoizedState=Gn(1|e,r,i,n)}function fc(t,e){return Is(8390656,8,t,e)}function ra(t,e){return wi(2048,8,t,e)}function Ed(t,e){return wi(4,2,t,e)}function Td(t,e){return wi(4,4,t,e)}function Pd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Od(t,e,r){return r=r!=null?r.concat([t]):null,wi(4,4,Pd.bind(null,e,t),r)}function na(){}function Ad(t,e){var r=Ve();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Zl(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Rd(t,e){var r=Ve();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Zl(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function $d(t,e,r){return ur&21?(tt(r,e)||(r=Uu(),Y.lanes|=r,dr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Se=!0),t.memoizedState=r)}function qm(t,e){var r=W;W=r!==0&&4>r?r:4,t(!0);var n=to.transition;to.transition={};try{t(!1),e()}finally{W=r,to.transition=n}}function Ld(){return Ve().memoizedState}function Wm(t,e,r){var n=Dt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Id(t))Dd(e,r);else if(r=xd(t,e,r,n),r!==null){var s=_e();et(r,t,n,s),Md(r,e,n)}}function Vm(t,e,r){var n=Dt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Id(t))Dd(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,a=i(l,r);if(s.hasEagerState=!0,s.eagerState=a,tt(a,l)){var c=e.interleaved;c===null?(s.next=s,Gl(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=xd(t,e,s,n),r!==null&&(s=_e(),et(r,t,n,s),Md(r,e,n))}}function Id(t){var e=t.alternate;return t===Y||e!==null&&e===Y}function Dd(t,e){Sn=si=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Md(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$l(t,r)}}var ii={readContext:We,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Hm={readContext:We,useCallback:function(t,e){return nt().memoizedState=[t,e===void 0?null:e],t},useContext:We,useEffect:fc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Is(4194308,4,Pd.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Is(4194308,4,t,e)},useInsertionEffect:function(t,e){return Is(4,2,t,e)},useMemo:function(t,e){var r=nt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=nt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Wm.bind(null,Y,t),[n.memoizedState,t]},useRef:function(t){var e=nt();return t={current:t},e.memoizedState=t},useState:hc,useDebugValue:na,useDeferredValue:function(t){return nt().memoizedState=t},useTransition:function(){var t=hc(!1),e=t[0];return t=qm.bind(null,t[1]),nt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Y,s=nt();if(Q){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),ce===null)throw Error(T(349));ur&30||bd(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,fc(Nd.bind(null,n,i,t),[t]),n.flags|=2048,Gn(9,jd.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=nt(),e=ce.identifierPrefix;if(Q){var r=ft,n=ht;r=(n&~(1<<32-Ze(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Hn++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Bm++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Km={readContext:We,useCallback:Ad,useContext:We,useEffect:ra,useImperativeHandle:Od,useInsertionEffect:Ed,useLayoutEffect:Td,useMemo:Rd,useReducer:ro,useRef:Cd,useState:function(){return ro(Kn)},useDebugValue:na,useDeferredValue:function(t){var e=Ve();return $d(e,ie.memoizedState,t)},useTransition:function(){var t=ro(Kn)[0],e=Ve().memoizedState;return[t,e]},useMutableSource:wd,useSyncExternalStore:_d,useId:Ld,unstable_isNewReconciler:!1},Gm={readContext:We,useCallback:Ad,useContext:We,useEffect:ra,useImperativeHandle:Od,useInsertionEffect:Ed,useLayoutEffect:Td,useMemo:Rd,useReducer:no,useRef:Cd,useState:function(){return no(Kn)},useDebugValue:na,useDeferredValue:function(t){var e=Ve();return ie===null?e.memoizedState=t:$d(e,ie.memoizedState,t)},useTransition:function(){var t=no(Kn)[0],e=Ve().memoizedState;return[t,e]},useMutableSource:wd,useSyncExternalStore:_d,useId:Ld,unstable_isNewReconciler:!1};function Qe(t,e){if(t&&t.defaultProps){e=X({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Ko(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:X({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var _i={isMounted:function(t){return(t=t._reactInternals)?pr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_e(),s=Dt(t),i=mt(n,s);i.payload=e,r!=null&&(i.callback=r),e=Lt(t,i,s),e!==null&&(et(e,t,s,n),$s(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_e(),s=Dt(t),i=mt(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Lt(t,i,s),e!==null&&(et(e,t,s,n),$s(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_e(),n=Dt(t),s=mt(r,n);s.tag=2,e!=null&&(s.callback=e),e=Lt(t,s,n),e!==null&&(et(e,t,n,r),$s(e,t,n))}};function mc(t,e,r,n,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,l):e.prototype&&e.prototype.isPureReactComponent?!zn(r,n)||!zn(s,i):!0}function Ud(t,e,r){var n=!1,s=zt,i=e.contextType;return typeof i=="object"&&i!==null?i=We(i):(s=Ee(e)?ar:xe.current,n=e.contextTypes,i=(n=n!=null)?Vr(t,s):zt),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_i,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function pc(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&_i.enqueueReplaceState(e,e.state,null)}function Go(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Ql(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=We(i):(i=Ee(e)?ar:xe.current,s.context=Vr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ko(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_i.enqueueReplaceState(s,s.state,null),ri(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Qr(t,e){try{var r="",n=e;do r+=bf(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function so(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Qo(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Qm=typeof WeakMap=="function"?WeakMap:Map;function zd(t,e,r){r=mt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){li||(li=!0,il=n),Qo(t,e)},r}function Fd(t,e,r){r=mt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Qo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Qo(t,e),typeof n!="function"&&(It===null?It=new Set([this]):It.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function gc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Qm;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=cp.bind(null,t,e,r),e.then(t,t))}function xc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vc(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=mt(-1,1),e.tag=2,Lt(r,e,1))),r.lanes|=1),t)}var Jm=yt.ReactCurrentOwner,Se=!1;function we(t,e,r,n){e.child=t===null?gd(e,null,r,n):Kr(e,t.child,r,n)}function yc(t,e,r,n,s){r=r.render;var i=e.ref;return Fr(e,s),n=ea(t,e,r,n,i,s),r=ta(),t!==null&&!Se?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vt(t,e,s)):(Q&&r&&Bl(e),e.flags|=1,we(t,e,n,s),e.child)}function wc(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!da(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Bd(t,e,i,n,s)):(t=zs(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:zn,r(l,n)&&t.ref===e.ref)return vt(t,e,s)}return e.flags|=1,t=Mt(i,n),t.ref=e.ref,t.return=e,e.child=t}function Bd(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(zn(i,n)&&t.ref===e.ref)if(Se=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Se=!0);else return e.lanes=t.lanes,vt(t,e,s)}return Jo(t,e,r,n,s)}function qd(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},H(Ir,Ae),Ae|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,H(Ir,Ae),Ae|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,H(Ir,Ae),Ae|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,H(Ir,Ae),Ae|=n;return we(t,e,s,r),e.child}function Wd(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Jo(t,e,r,n,s){var i=Ee(r)?ar:xe.current;return i=Vr(e,i),Fr(e,s),r=ea(t,e,r,n,i,s),n=ta(),t!==null&&!Se?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vt(t,e,s)):(Q&&n&&Bl(e),e.flags|=1,we(t,e,r,s),e.child)}function _c(t,e,r,n,s){if(Ee(r)){var i=!0;Ys(e)}else i=!1;if(Fr(e,s),e.stateNode===null)Ds(t,e),Ud(e,r,n),Go(e,r,n,s),n=!0;else if(t===null){var l=e.stateNode,a=e.memoizedProps;l.props=a;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=We(u):(u=Ee(r)?ar:xe.current,u=Vr(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==n||c!==u)&&pc(e,l,n,u),kt=!1;var g=e.memoizedState;l.state=g,ri(e,n,l,s),c=e.memoizedState,a!==n||g!==c||Ce.current||kt?(typeof h=="function"&&(Ko(e,r,h,n),c=e.memoizedState),(a=kt||mc(e,r,a,n,g,c,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),l.props=n,l.state=c,l.context=u,n=a):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,vd(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Qe(e.type,a),l.props=u,d=e.pendingProps,g=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=We(c):(c=Ee(r)?ar:xe.current,c=Vr(e,c));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==d||g!==c)&&pc(e,l,n,c),kt=!1,g=e.memoizedState,l.state=g,ri(e,n,l,s);var w=e.memoizedState;a!==d||g!==w||Ce.current||kt?(typeof v=="function"&&(Ko(e,r,v,n),w=e.memoizedState),(u=kt||mc(e,r,u,n,g,w,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,w,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,w,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=w),l.props=n,l.state=w,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),n=!1)}return Yo(t,e,r,n,i,s)}function Yo(t,e,r,n,s,i){Wd(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return s&&oc(e,r,!1),vt(t,e,i);n=e.stateNode,Jm.current=e;var a=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=Kr(e,t.child,null,i),e.child=Kr(e,null,a,i)):we(t,e,a,i),e.memoizedState=n.state,s&&oc(e,r,!0),e.child}function Vd(t){var e=t.stateNode;e.pendingContext?ic(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ic(t,e.context,!1),Jl(t,e.containerInfo)}function bc(t,e,r,n,s){return Hr(),Wl(s),e.flags|=256,we(t,e,r,n),e.child}var Xo={dehydrated:null,treeContext:null,retryLane:0};function Zo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hd(t,e,r){var n=e.pendingProps,s=J.current,i=!1,l=(e.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),H(J,s&1),t===null)return Vo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,i?(n=e.mode,i=e.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ni(l,n,0,null),t=lr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Zo(r),e.memoizedState=Xo,t):sa(e,l));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Ym(t,e,l,n,a,s,r);if(i){i=n.fallback,l=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Mt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Mt(a,i):(i=lr(i,l,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,l=t.child.memoizedState,l=l===null?Zo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,e.memoizedState=Xo,n}return i=t.child,t=i.sibling,n=Mt(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function sa(t,e){return e=Ni({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _s(t,e,r,n){return n!==null&&Wl(n),Kr(e,t.child,null,r),t=sa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ym(t,e,r,n,s,i,l){if(r)return e.flags&256?(e.flags&=-257,n=so(Error(T(422))),_s(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Ni({mode:"visible",children:n.children},s,0,null),i=lr(i,s,l,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Kr(e,t.child,null,l),e.child.memoizedState=Zo(l),e.memoizedState=Xo,i);if(!(e.mode&1))return _s(t,e,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(T(419)),n=so(i,n,void 0),_s(t,e,l,n)}if(a=(l&t.childLanes)!==0,Se||a){if(n=ce,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xt(t,s),et(n,t,s,-1))}return ua(),n=so(Error(T(421))),_s(t,e,l,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=up.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Re=$t(s.nextSibling),$e=e,Q=!0,Xe=null,t!==null&&(Me[Ue++]=ht,Me[Ue++]=ft,Me[Ue++]=cr,ht=t.id,ft=t.overflow,cr=e),e=sa(e,n.children),e.flags|=4096,e)}function jc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ho(t.return,e,r)}function io(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Kd(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(we(t,e,n.children,r),n=J.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jc(t,r,e);else if(t.tag===19)jc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(H(J,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ni(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),io(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ni(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}io(e,!0,r,null,i);break;case"together":io(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ds(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),dr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=Mt(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Mt(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Xm(t,e,r){switch(e.tag){case 3:Vd(e),Hr();break;case 5:yd(e);break;case 1:Ee(e.type)&&Ys(e);break;case 4:Jl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;H(ei,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(H(J,J.current&1),e.flags|=128,null):r&e.child.childLanes?Hd(t,e,r):(H(J,J.current&1),t=vt(t,e,r),t!==null?t.sibling:null);H(J,J.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Kd(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),H(J,J.current),n)break;return null;case 22:case 23:return e.lanes=0,qd(t,e,r)}return vt(t,e,r)}var Gd,el,Qd,Jd;Gd=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};el=function(){};Qd=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,nr(lt.current);var i=null;switch(r){case"input":s=bo(t,s),n=bo(t,n),i=[];break;case"select":s=X({},s,{value:void 0}),n=X({},n,{value:void 0}),i=[];break;case"textarea":s=ko(t,s),n=ko(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Qs)}Co(r,n);var l;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(l in a)a.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&K("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Jd=function(t,e,r,n){r!==n&&(e.flags|=4)};function fn(t,e){if(!Q)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Zm(t,e,r){var n=e.pendingProps;switch(ql(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(e),null;case 1:return Ee(e.type)&&Js(),pe(e),null;case 3:return n=e.stateNode,Gr(),G(Ce),G(xe),Xl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ys(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xe!==null&&(al(Xe),Xe=null))),el(t,e),pe(e),null;case 5:Yl(e);var s=nr(Vn.current);if(r=e.type,t!==null&&e.stateNode!=null)Qd(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return pe(e),null}if(t=nr(lt.current),ys(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[it]=e,n[qn]=i,t=(e.mode&1)!==0,r){case"dialog":K("cancel",n),K("close",n);break;case"iframe":case"object":case"embed":K("load",n);break;case"video":case"audio":for(s=0;s<yn.length;s++)K(yn[s],n);break;case"source":K("error",n);break;case"img":case"image":case"link":K("error",n),K("load",n);break;case"details":K("toggle",n);break;case"input":Aa(n,i),K("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},K("invalid",n);break;case"textarea":$a(n,i),K("invalid",n)}Co(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var a=i[l];l==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&vs(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&vs(n.textContent,a,t),s=["children",""+a]):Rn.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&K("scroll",n)}switch(r){case"input":us(n),Ra(n,i,!0);break;case"textarea":us(n),La(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Qs)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nu(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[it]=e,t[qn]=n,Gd(t,e,!1,!1),e.stateNode=t;e:{switch(l=Eo(r,n),r){case"dialog":K("cancel",t),K("close",t),s=n;break;case"iframe":case"object":case"embed":K("load",t),s=n;break;case"video":case"audio":for(s=0;s<yn.length;s++)K(yn[s],t);s=n;break;case"source":K("error",t),s=n;break;case"img":case"image":case"link":K("error",t),K("load",t),s=n;break;case"details":K("toggle",t),s=n;break;case"input":Aa(t,n),s=bo(t,n),K("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=X({},n,{value:void 0}),K("invalid",t);break;case"textarea":$a(t,n),s=ko(t,n),K("invalid",t);break;default:s=n}Co(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Cu(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ku(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&$n(t,c):typeof c=="number"&&$n(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&K("scroll",t):c!=null&&El(t,i,c,l))}switch(r){case"input":us(t),Ra(t,n,!1);break;case"textarea":us(t),La(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ut(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Dr(t,!!n.multiple,i,!1):n.defaultValue!=null&&Dr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pe(e),null;case 6:if(t&&e.stateNode!=null)Jd(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(r=nr(Vn.current),nr(lt.current),ys(e)){if(n=e.stateNode,r=e.memoizedProps,n[it]=e,(i=n.nodeValue!==r)&&(t=$e,t!==null))switch(t.tag){case 3:vs(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vs(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[it]=e,e.stateNode=n}return pe(e),null;case 13:if(G(J),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Q&&Re!==null&&e.mode&1&&!(e.flags&128))md(),Hr(),e.flags|=98560,i=!1;else if(i=ys(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[it]=e}else Hr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pe(e),i=!1}else Xe!==null&&(al(Xe),Xe=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||J.current&1?oe===0&&(oe=3):ua())),e.updateQueue!==null&&(e.flags|=4),pe(e),null);case 4:return Gr(),el(t,e),t===null&&Fn(e.stateNode.containerInfo),pe(e),null;case 10:return Kl(e.type._context),pe(e),null;case 17:return Ee(e.type)&&Js(),pe(e),null;case 19:if(G(J),i=e.memoizedState,i===null)return pe(e),null;if(n=(e.flags&128)!==0,l=i.rendering,l===null)if(n)fn(i,!1);else{if(oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ni(t),l!==null){for(e.flags|=128,fn(i,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return H(J,J.current&1|2),e.child}t=t.sibling}i.tail!==null&&te()>Jr&&(e.flags|=128,n=!0,fn(i,!1),e.lanes=4194304)}else{if(!n)if(t=ni(l),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),fn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Q)return pe(e),null}else 2*te()-i.renderingStartTime>Jr&&r!==1073741824&&(e.flags|=128,n=!0,fn(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(r=i.last,r!==null?r.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=te(),e.sibling=null,r=J.current,H(J,n?r&1|2:r&1),e):(pe(e),null);case 22:case 23:return ca(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ae&1073741824&&(pe(e),e.subtreeFlags&6&&(e.flags|=8192)):pe(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function ep(t,e){switch(ql(e),e.tag){case 1:return Ee(e.type)&&Js(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gr(),G(Ce),G(xe),Xl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yl(e),null;case 13:if(G(J),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));Hr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return G(J),null;case 4:return Gr(),null;case 10:return Kl(e.type._context),null;case 22:case 23:return ca(),null;case 24:return null;default:return null}}var bs=!1,ge=!1,tp=typeof WeakSet=="function"?WeakSet:Set,R=null;function Lr(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Z(t,e,n)}else r.current=null}function tl(t,e,r){try{r()}catch(n){Z(t,e,n)}}var Nc=!1;function rp(t,e){if(Mo=Hs,t=td(),Fl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,a=-1,c=-1,u=0,h=0,d=t,g=null;t:for(;;){for(var v;d!==r||s!==0&&d.nodeType!==3||(a=l+s),d!==i||n!==0&&d.nodeType!==3||(c=l+n),d.nodeType===3&&(l+=d.nodeValue.length),(v=d.firstChild)!==null;)g=d,d=v;for(;;){if(d===t)break t;if(g===r&&++u===s&&(a=l),g===i&&++h===n&&(c=l),(v=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=v}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Uo={focusedElem:t,selectionRange:r},Hs=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,b=w.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?_:Qe(e.type,_),b);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(y){Z(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return w=Nc,Nc=!1,w}function Cn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tl(e,r,i)}s=s.next}while(s!==n)}}function bi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function rl(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Yd(t){var e=t.alternate;e!==null&&(t.alternate=null,Yd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[it],delete e[qn],delete e[Bo],delete e[Mm],delete e[Um])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xd(t){return t.tag===5||t.tag===3||t.tag===4}function kc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Qs));else if(n!==4&&(t=t.child,t!==null))for(nl(t,e,r),t=t.sibling;t!==null;)nl(t,e,r),t=t.sibling}function sl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(sl(t,e,r),t=t.sibling;t!==null;)sl(t,e,r),t=t.sibling}var ue=null,Je=!1;function _t(t,e,r){for(r=r.child;r!==null;)Zd(t,e,r),r=r.sibling}function Zd(t,e,r){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(mi,r)}catch{}switch(r.tag){case 5:ge||Lr(r,e);case 6:var n=ue,s=Je;ue=null,_t(t,e,r),ue=n,Je=s,ue!==null&&(Je?(t=ue,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ue.removeChild(r.stateNode));break;case 18:ue!==null&&(Je?(t=ue,r=r.stateNode,t.nodeType===8?Xi(t.parentNode,r):t.nodeType===1&&Xi(t,r),Mn(t)):Xi(ue,r.stateNode));break;case 4:n=ue,s=Je,ue=r.stateNode.containerInfo,Je=!0,_t(t,e,r),ue=n,Je=s;break;case 0:case 11:case 14:case 15:if(!ge&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&tl(r,e,l),s=s.next}while(s!==n)}_t(t,e,r);break;case 1:if(!ge&&(Lr(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Z(r,e,a)}_t(t,e,r);break;case 21:_t(t,e,r);break;case 22:r.mode&1?(ge=(n=ge)||r.memoizedState!==null,_t(t,e,r),ge=n):_t(t,e,r);break;default:_t(t,e,r)}}function Sc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new tp),e.forEach(function(n){var s=dp.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ke(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,l=e,a=l;e:for(;a!==null;){switch(a.tag){case 5:ue=a.stateNode,Je=!1;break e;case 3:ue=a.stateNode.containerInfo,Je=!0;break e;case 4:ue=a.stateNode.containerInfo,Je=!0;break e}a=a.return}if(ue===null)throw Error(T(160));Zd(i,l,s),ue=null,Je=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Z(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eh(e,t),e=e.sibling}function eh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ke(e,t),rt(t),n&4){try{Cn(3,t,t.return),bi(3,t)}catch(_){Z(t,t.return,_)}try{Cn(5,t,t.return)}catch(_){Z(t,t.return,_)}}break;case 1:Ke(e,t),rt(t),n&512&&r!==null&&Lr(r,r.return);break;case 5:if(Ke(e,t),rt(t),n&512&&r!==null&&Lr(r,r.return),t.flags&32){var s=t.stateNode;try{$n(s,"")}catch(_){Z(t,t.return,_)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bu(s,i),Eo(a,l);var u=Eo(a,i);for(l=0;l<c.length;l+=2){var h=c[l],d=c[l+1];h==="style"?Cu(s,d):h==="dangerouslySetInnerHTML"?ku(s,d):h==="children"?$n(s,d):El(s,h,d,u)}switch(a){case"input":jo(s,i);break;case"textarea":ju(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Dr(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?Dr(s,!!i.multiple,i.defaultValue,!0):Dr(s,!!i.multiple,i.multiple?[]:"",!1))}s[qn]=i}catch(_){Z(t,t.return,_)}}break;case 6:if(Ke(e,t),rt(t),n&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Z(t,t.return,_)}}break;case 3:if(Ke(e,t),rt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(e.containerInfo)}catch(_){Z(t,t.return,_)}break;case 4:Ke(e,t),rt(t);break;case 13:Ke(e,t),rt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(la=te())),n&4&&Sc(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(ge=(u=ge)||h,Ke(e,t),ge=u):Ke(e,t),rt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(d=R=h;R!==null;){switch(g=R,v=g.child,g.tag){case 0:case 11:case 14:case 15:Cn(4,g,g.return);break;case 1:Lr(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){n=g,r=g.return;try{e=n,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){Z(n,r,_)}}break;case 5:Lr(g,g.return);break;case 22:if(g.memoizedState!==null){Ec(d);continue}}v!==null?(v.return=g,R=v):Ec(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Su("display",l))}catch(_){Z(t,t.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){Z(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ke(e,t),rt(t),n&4&&Sc(t);break;case 21:break;default:Ke(e,t),rt(t)}}function rt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Xd(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&($n(s,""),n.flags&=-33);var i=kc(t);sl(t,i,s);break;case 3:case 4:var l=n.stateNode.containerInfo,a=kc(t);nl(t,a,l);break;default:throw Error(T(161))}}catch(c){Z(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function np(t,e,r){R=t,th(t)}function th(t,e,r){for(var n=(t.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||bs;if(!l){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ge;a=bs;var u=ge;if(bs=l,(ge=c)&&!u)for(R=s;R!==null;)l=R,c=l.child,l.tag===22&&l.memoizedState!==null?Tc(s):c!==null?(c.return=l,R=c):Tc(s);for(;i!==null;)R=i,th(i),i=i.sibling;R=s,bs=a,ge=u}Cc(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):Cc(t)}}function Cc(t){for(;R!==null;){var e=R;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ge||bi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ge)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Qe(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dc(e,i,n);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}dc(e,l,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Mn(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}ge||e.flags&512&&rl(e)}catch(g){Z(e,e.return,g)}}if(e===t){R=null;break}if(r=e.sibling,r!==null){r.return=e.return,R=r;break}R=e.return}}function Ec(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var r=e.sibling;if(r!==null){r.return=e.return,R=r;break}R=e.return}}function Tc(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{bi(4,e)}catch(c){Z(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){Z(e,s,c)}}var i=e.return;try{rl(e)}catch(c){Z(e,i,c)}break;case 5:var l=e.return;try{rl(e)}catch(c){Z(e,l,c)}}}catch(c){Z(e,e.return,c)}if(e===t){R=null;break}var a=e.sibling;if(a!==null){a.return=e.return,R=a;break}R=e.return}}var sp=Math.ceil,oi=yt.ReactCurrentDispatcher,ia=yt.ReactCurrentOwner,Fe=yt.ReactCurrentBatchConfig,q=0,ce=null,re=null,de=0,Ae=0,Ir=qt(0),oe=0,Qn=null,dr=0,ji=0,oa=0,En=null,Ne=null,la=0,Jr=1/0,ct=null,li=!1,il=null,It=null,js=!1,Pt=null,ai=0,Tn=0,ol=null,Ms=-1,Us=0;function _e(){return q&6?te():Ms!==-1?Ms:Ms=te()}function Dt(t){return t.mode&1?q&2&&de!==0?de&-de:Fm.transition!==null?(Us===0&&(Us=Uu()),Us):(t=W,t!==0||(t=window.event,t=t===void 0?16:Hu(t.type)),t):1}function et(t,e,r,n){if(50<Tn)throw Tn=0,ol=null,Error(T(185));Zn(t,r,n),(!(q&2)||t!==ce)&&(t===ce&&(!(q&2)&&(ji|=r),oe===4&&Ct(t,de)),Te(t,n),r===1&&q===0&&!(e.mode&1)&&(Jr=te()+500,yi&&Wt()))}function Te(t,e){var r=t.callbackNode;Ff(t,e);var n=Vs(t,t===ce?de:0);if(n===0)r!==null&&Ma(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ma(r),e===1)t.tag===0?zm(Pc.bind(null,t)):dd(Pc.bind(null,t)),Im(function(){!(q&6)&&Wt()}),r=null;else{switch(zu(n)){case 1:r=Rl;break;case 4:r=Du;break;case 16:r=Ws;break;case 536870912:r=Mu;break;default:r=Ws}r=ch(r,rh.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function rh(t,e){if(Ms=-1,Us=0,q&6)throw Error(T(327));var r=t.callbackNode;if(Br()&&t.callbackNode!==r)return null;var n=Vs(t,t===ce?de:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ci(t,n);else{e=n;var s=q;q|=2;var i=sh();(ce!==t||de!==e)&&(ct=null,Jr=te()+500,or(t,e));do try{lp();break}catch(a){nh(t,a)}while(!0);Hl(),oi.current=i,q=s,re!==null?e=0:(ce=null,de=0,e=oe)}if(e!==0){if(e===2&&(s=Ro(t),s!==0&&(n=s,e=ll(t,s))),e===1)throw r=Qn,or(t,0),Ct(t,n),Te(t,te()),r;if(e===6)Ct(t,n);else{if(s=t.current.alternate,!(n&30)&&!ip(s)&&(e=ci(t,n),e===2&&(i=Ro(t),i!==0&&(n=i,e=ll(t,i))),e===1))throw r=Qn,or(t,0),Ct(t,n),Te(t,te()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:Yt(t,Ne,ct);break;case 3:if(Ct(t,n),(n&130023424)===n&&(e=la+500-te(),10<e)){if(Vs(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){_e(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fo(Yt.bind(null,t,Ne,ct),e);break}Yt(t,Ne,ct);break;case 4:if(Ct(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var l=31-Ze(n);i=1<<l,l=e[l],l>s&&(s=l),n&=~i}if(n=s,n=te()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sp(n/1960))-n,10<n){t.timeoutHandle=Fo(Yt.bind(null,t,Ne,ct),n);break}Yt(t,Ne,ct);break;case 5:Yt(t,Ne,ct);break;default:throw Error(T(329))}}}return Te(t,te()),t.callbackNode===r?rh.bind(null,t):null}function ll(t,e){var r=En;return t.current.memoizedState.isDehydrated&&(or(t,e).flags|=256),t=ci(t,e),t!==2&&(e=Ne,Ne=r,e!==null&&al(e)),t}function al(t){Ne===null?Ne=t:Ne.push.apply(Ne,t)}function ip(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!tt(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ct(t,e){for(e&=~oa,e&=~ji,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ze(e),n=1<<r;t[r]=-1,e&=~n}}function Pc(t){if(q&6)throw Error(T(327));Br();var e=Vs(t,0);if(!(e&1))return Te(t,te()),null;var r=ci(t,e);if(t.tag!==0&&r===2){var n=Ro(t);n!==0&&(e=n,r=ll(t,n))}if(r===1)throw r=Qn,or(t,0),Ct(t,e),Te(t,te()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yt(t,Ne,ct),Te(t,te()),null}function aa(t,e){var r=q;q|=1;try{return t(e)}finally{q=r,q===0&&(Jr=te()+500,yi&&Wt())}}function hr(t){Pt!==null&&Pt.tag===0&&!(q&6)&&Br();var e=q;q|=1;var r=Fe.transition,n=W;try{if(Fe.transition=null,W=1,t)return t()}finally{W=n,Fe.transition=r,q=e,!(q&6)&&Wt()}}function ca(){Ae=Ir.current,G(Ir)}function or(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Lm(r)),re!==null)for(r=re.return;r!==null;){var n=r;switch(ql(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Js();break;case 3:Gr(),G(Ce),G(xe),Xl();break;case 5:Yl(n);break;case 4:Gr();break;case 13:G(J);break;case 19:G(J);break;case 10:Kl(n.type._context);break;case 22:case 23:ca()}r=r.return}if(ce=t,re=t=Mt(t.current,null),de=Ae=e,oe=0,Qn=null,oa=ji=dr=0,Ne=En=null,rr!==null){for(e=0;e<rr.length;e++)if(r=rr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,n.next=l}r.pending=n}rr=null}return t}function nh(t,e){do{var r=re;try{if(Hl(),Ls.current=ii,si){for(var n=Y.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}si=!1}if(ur=0,ae=ie=Y=null,Sn=!1,Hn=0,ia.current=null,r===null||r.return===null){oe=1,Qn=e,re=null;break}e:{var i=t,l=r.return,a=r,c=e;if(e=de,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=xc(l);if(v!==null){v.flags&=-257,vc(v,l,a,i,e),v.mode&1&&gc(i,u,e),e=v,c=u;var w=e.updateQueue;if(w===null){var _=new Set;_.add(c),e.updateQueue=_}else w.add(c);break e}else{if(!(e&1)){gc(i,u,e),ua();break e}c=Error(T(426))}}else if(Q&&a.mode&1){var b=xc(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),vc(b,l,a,i,e),Wl(Qr(c,a));break e}}i=c=Qr(c,a),oe!==4&&(oe=2),En===null?En=[i]:En.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=zd(i,c,e);uc(i,f);break e;case 1:a=c;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(It===null||!It.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var y=Fd(i,a,e);uc(i,y);break e}}i=i.return}while(i!==null)}oh(r)}catch(S){e=S,re===r&&r!==null&&(re=r=r.return);continue}break}while(!0)}function sh(){var t=oi.current;return oi.current=ii,t===null?ii:t}function ua(){(oe===0||oe===3||oe===2)&&(oe=4),ce===null||!(dr&268435455)&&!(ji&268435455)||Ct(ce,de)}function ci(t,e){var r=q;q|=2;var n=sh();(ce!==t||de!==e)&&(ct=null,or(t,e));do try{op();break}catch(s){nh(t,s)}while(!0);if(Hl(),q=r,oi.current=n,re!==null)throw Error(T(261));return ce=null,de=0,oe}function op(){for(;re!==null;)ih(re)}function lp(){for(;re!==null&&!Af();)ih(re)}function ih(t){var e=ah(t.alternate,t,Ae);t.memoizedProps=t.pendingProps,e===null?oh(t):re=e,ia.current=null}function oh(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=ep(r,e),r!==null){r.flags&=32767,re=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{oe=6,re=null;return}}else if(r=Zm(r,e,Ae),r!==null){re=r;return}if(e=e.sibling,e!==null){re=e;return}re=e=t}while(e!==null);oe===0&&(oe=5)}function Yt(t,e,r){var n=W,s=Fe.transition;try{Fe.transition=null,W=1,ap(t,e,r,n)}finally{Fe.transition=s,W=n}return null}function ap(t,e,r,n){do Br();while(Pt!==null);if(q&6)throw Error(T(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Bf(t,i),t===ce&&(re=ce=null,de=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||js||(js=!0,ch(Ws,function(){return Br(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Fe.transition,Fe.transition=null;var l=W;W=1;var a=q;q|=4,ia.current=null,rp(t,r),eh(r,t),Em(Uo),Hs=!!Mo,Uo=Mo=null,t.current=r,np(r),Rf(),q=a,W=l,Fe.transition=i}else t.current=r;if(js&&(js=!1,Pt=t,ai=s),i=t.pendingLanes,i===0&&(It=null),If(r.stateNode),Te(t,te()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(li)throw li=!1,t=il,il=null,t;return ai&1&&t.tag!==0&&Br(),i=t.pendingLanes,i&1?t===ol?Tn++:(Tn=0,ol=t):Tn=0,Wt(),null}function Br(){if(Pt!==null){var t=zu(ai),e=Fe.transition,r=W;try{if(Fe.transition=null,W=16>t?16:t,Pt===null)var n=!1;else{if(t=Pt,Pt=null,ai=0,q&6)throw Error(T(331));var s=q;for(q|=4,R=t.current;R!==null;){var i=R,l=i.child;if(R.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:Cn(8,h,i)}var d=h.child;if(d!==null)d.return=h,R=d;else for(;R!==null;){h=R;var g=h.sibling,v=h.return;if(Yd(h),h===u){R=null;break}if(g!==null){g.return=v,R=g;break}R=v}}}var w=i.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}R=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,R=l;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cn(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,R=f;break e}R=i.return}}var p=t.current;for(R=p;R!==null;){l=R;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,R=m;else e:for(l=p;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bi(9,a)}}catch(S){Z(a,a.return,S)}if(a===l){R=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,R=y;break e}R=a.return}}if(q=s,Wt(),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(mi,t)}catch{}n=!0}return n}finally{W=r,Fe.transition=e}}return!1}function Oc(t,e,r){e=Qr(r,e),e=zd(t,e,1),t=Lt(t,e,1),e=_e(),t!==null&&(Zn(t,1,e),Te(t,e))}function Z(t,e,r){if(t.tag===3)Oc(t,t,r);else for(;e!==null;){if(e.tag===3){Oc(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(It===null||!It.has(n))){t=Qr(r,t),t=Fd(e,t,1),e=Lt(e,t,1),t=_e(),e!==null&&(Zn(e,1,t),Te(e,t));break}}e=e.return}}function cp(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_e(),t.pingedLanes|=t.suspendedLanes&r,ce===t&&(de&r)===r&&(oe===4||oe===3&&(de&130023424)===de&&500>te()-la?or(t,0):oa|=r),Te(t,e)}function lh(t,e){e===0&&(t.mode&1?(e=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):e=1);var r=_e();t=xt(t,e),t!==null&&(Zn(t,e,r),Te(t,r))}function up(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),lh(t,r)}function dp(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),lh(t,r)}var ah;ah=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ce.current)Se=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Se=!1,Xm(t,e,r);Se=!!(t.flags&131072)}else Se=!1,Q&&e.flags&1048576&&hd(e,Zs,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ds(t,e),t=e.pendingProps;var s=Vr(e,xe.current);Fr(e,r),s=ea(null,e,n,t,s,r);var i=ta();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ee(n)?(i=!0,Ys(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ql(e),s.updater=_i,e.stateNode=s,s._reactInternals=e,Go(e,n,t,r),e=Yo(null,e,n,!0,i,r)):(e.tag=0,Q&&i&&Bl(e),we(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ds(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=fp(n),t=Qe(n,t),s){case 0:e=Jo(null,e,n,t,r);break e;case 1:e=_c(null,e,n,t,r);break e;case 11:e=yc(null,e,n,t,r);break e;case 14:e=wc(null,e,n,Qe(n.type,t),r);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),Jo(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),_c(t,e,n,s,r);case 3:e:{if(Vd(e),t===null)throw Error(T(387));n=e.pendingProps,i=e.memoizedState,s=i.element,vd(t,e),ri(e,n,null,r);var l=e.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Qr(Error(T(423)),e),e=bc(t,e,n,r,s);break e}else if(n!==s){s=Qr(Error(T(424)),e),e=bc(t,e,n,r,s);break e}else for(Re=$t(e.stateNode.containerInfo.firstChild),$e=e,Q=!0,Xe=null,r=gd(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hr(),n===s){e=vt(t,e,r);break e}we(t,e,n,r)}e=e.child}return e;case 5:return yd(e),t===null&&Vo(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,l=s.children,zo(n,s)?l=null:i!==null&&zo(n,i)&&(e.flags|=32),Wd(t,e),we(t,e,l,r),e.child;case 6:return t===null&&Vo(e),null;case 13:return Hd(t,e,r);case 4:return Jl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Kr(e,null,n,r):we(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),yc(t,e,n,s,r);case 7:return we(t,e,e.pendingProps,r),e.child;case 8:return we(t,e,e.pendingProps.children,r),e.child;case 12:return we(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,l=s.value,H(ei,n._currentValue),n._currentValue=l,i!==null)if(tt(i.value,l)){if(i.children===s.children&&!Ce.current){e=vt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){l=i.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=mt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ho(i.return,r,e),a.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(T(341));l.lanes|=r,a=l.alternate,a!==null&&(a.lanes|=r),Ho(l,r,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}we(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Fr(e,r),s=We(s),n=n(s),e.flags|=1,we(t,e,n,r),e.child;case 14:return n=e.type,s=Qe(n,e.pendingProps),s=Qe(n.type,s),wc(t,e,n,s,r);case 15:return Bd(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qe(n,s),Ds(t,e),e.tag=1,Ee(n)?(t=!0,Ys(e)):t=!1,Fr(e,r),Ud(e,n,s),Go(e,n,s,r),Yo(null,e,n,!0,t,r);case 19:return Kd(t,e,r);case 22:return qd(t,e,r)}throw Error(T(156,e.tag))};function ch(t,e){return Iu(t,e)}function hp(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ze(t,e,r,n){return new hp(t,e,r,n)}function da(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fp(t){if(typeof t=="function")return da(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pl)return 11;if(t===Ol)return 14}return 2}function Mt(t,e){var r=t.alternate;return r===null?(r=ze(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function zs(t,e,r,n,s,i){var l=2;if(n=t,typeof t=="function")da(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Sr:return lr(r.children,s,i,e);case Tl:l=8,s|=8;break;case vo:return t=ze(12,r,e,s|2),t.elementType=vo,t.lanes=i,t;case yo:return t=ze(13,r,e,s),t.elementType=yo,t.lanes=i,t;case wo:return t=ze(19,r,e,s),t.elementType=wo,t.lanes=i,t;case yu:return Ni(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xu:l=10;break e;case vu:l=9;break e;case Pl:l=11;break e;case Ol:l=14;break e;case Nt:l=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=ze(l,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function lr(t,e,r,n){return t=ze(7,t,n,e),t.lanes=r,t}function Ni(t,e,r,n){return t=ze(22,t,n,e),t.elementType=yu,t.lanes=r,t.stateNode={isHidden:!1},t}function oo(t,e,r){return t=ze(6,t,null,e),t.lanes=r,t}function lo(t,e,r){return e=ze(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mp(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ha(t,e,r,n,s,i,l,a,c){return t=new mp(t,e,r,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ze(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ql(i),t}function pp(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function uh(t){if(!t)return zt;t=t._reactInternals;e:{if(pr(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ee(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(Ee(r))return ud(t,r,e)}return e}function dh(t,e,r,n,s,i,l,a,c){return t=ha(r,n,!0,t,s,i,l,a,c),t.context=uh(null),r=t.current,n=_e(),s=Dt(r),i=mt(n,s),i.callback=e??null,Lt(r,i,s),t.current.lanes=s,Zn(t,s,n),Te(t,n),t}function ki(t,e,r,n){var s=e.current,i=_e(),l=Dt(s);return r=uh(r),e.context===null?e.context=r:e.pendingContext=r,e=mt(i,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Lt(s,e,l),t!==null&&(et(t,s,l,i),$s(t,s,l)),l}function ui(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ac(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function fa(t,e){Ac(t,e),(t=t.alternate)&&Ac(t,e)}function gp(){return null}var hh=typeof reportError=="function"?reportError:function(t){console.error(t)};function ma(t){this._internalRoot=t}Si.prototype.render=ma.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));ki(t,e,null,null)};Si.prototype.unmount=ma.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hr(function(){ki(null,t,null,null)}),e[gt]=null}};function Si(t){this._internalRoot=t}Si.prototype.unstable_scheduleHydration=function(t){if(t){var e=qu();t={blockedOn:null,target:t,priority:e};for(var r=0;r<St.length&&e!==0&&e<St[r].priority;r++);St.splice(r,0,t),r===0&&Vu(t)}};function pa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ci(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rc(){}function xp(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=ui(l);i.call(u)}}var l=dh(e,n,t,0,null,!1,!1,"",Rc);return t._reactRootContainer=l,t[gt]=l.current,Fn(t.nodeType===8?t.parentNode:t),hr(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=ui(c);a.call(u)}}var c=ha(t,0,!1,null,null,!1,!1,"",Rc);return t._reactRootContainer=c,t[gt]=c.current,Fn(t.nodeType===8?t.parentNode:t),hr(function(){ki(e,c,r,n)}),c}function Ei(t,e,r,n,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var a=s;s=function(){var c=ui(l);a.call(c)}}ki(e,l,t,s)}else l=xp(r,e,t,s,n);return ui(l)}Fu=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=vn(e.pendingLanes);r!==0&&($l(e,r|1),Te(e,te()),!(q&6)&&(Jr=te()+500,Wt()))}break;case 13:hr(function(){var n=xt(t,1);if(n!==null){var s=_e();et(n,t,1,s)}}),fa(t,1)}};Ll=function(t){if(t.tag===13){var e=xt(t,134217728);if(e!==null){var r=_e();et(e,t,134217728,r)}fa(t,134217728)}};Bu=function(t){if(t.tag===13){var e=Dt(t),r=xt(t,e);if(r!==null){var n=_e();et(r,t,e,n)}fa(t,e)}};qu=function(){return W};Wu=function(t,e){var r=W;try{return W=t,e()}finally{W=r}};Po=function(t,e,r){switch(e){case"input":if(jo(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=vi(n);if(!s)throw Error(T(90));_u(n),jo(n,s)}}}break;case"textarea":ju(t,r);break;case"select":e=r.value,e!=null&&Dr(t,!!r.multiple,e,!1)}};Pu=aa;Ou=hr;var vp={usingClientEntryPoint:!1,Events:[ts,Pr,vi,Eu,Tu,aa]},mn={findFiberByHostInstance:tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yp={bundleType:mn.bundleType,version:mn.version,rendererPackageName:mn.rendererPackageName,rendererConfig:mn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$u(t),t===null?null:t.stateNode},findFiberByHostInstance:mn.findFiberByHostInstance||gp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ns.isDisabled&&Ns.supportsFiber)try{mi=Ns.inject(yp),ot=Ns}catch{}}Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vp;Ie.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pa(e))throw Error(T(200));return pp(t,e,null,r)};Ie.createRoot=function(t,e){if(!pa(t))throw Error(T(299));var r=!1,n="",s=hh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ha(t,1,!1,null,null,r,!1,n,s),t[gt]=e.current,Fn(t.nodeType===8?t.parentNode:t),new ma(e)};Ie.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=$u(e),t=t===null?null:t.stateNode,t};Ie.flushSync=function(t){return hr(t)};Ie.hydrate=function(t,e,r){if(!Ci(e))throw Error(T(200));return Ei(null,t,e,!0,r)};Ie.hydrateRoot=function(t,e,r){if(!pa(t))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",l=hh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=dh(e,null,t,1,r??null,s,!1,i,l),t[gt]=e.current,Fn(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Si(e)};Ie.render=function(t,e,r){if(!Ci(e))throw Error(T(200));return Ei(null,t,e,!1,r)};Ie.unmountComponentAtNode=function(t){if(!Ci(t))throw Error(T(40));return t._reactRootContainer?(hr(function(){Ei(null,null,t,!1,function(){t._reactRootContainer=null,t[gt]=null})}),!0):!1};Ie.unstable_batchedUpdates=aa;Ie.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ci(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return Ei(t,e,r,!1,n)};Ie.version="18.3.1-next-f1338f8080-20240426";function fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fh)}catch(t){console.error(t)}}fh(),fu.exports=Ie;var wp=fu.exports,mh,$c=wp;mh=$c.createRoot,$c.hydrateRoot;const _p="modulepreload",bp=function(t,e){return new URL(t,e).href},Lc={},ns=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=bp(u,n),u in Lc)return;Lc[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(!!n)for(let w=l.length-1;w>=0;w--){const _=l[w];if(_.href===u&&(!h||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${d}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":_p,h||(v.as="script"),v.crossOrigin="",v.href=u,c&&v.setAttribute("nonce",c),document.head.appendChild(v),h)return new Promise((w,_)=>{v.addEventListener("load",w),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return s.then(l=>{for(const a of l||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},jp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ns(async()=>{const{default:n}=await Promise.resolve().then(()=>sn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class ga extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Np extends ga{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ic extends ga{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dc extends ga{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(cl||(cl={}));var kp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class Sp{constructor(e,{headers:r={},customFetch:n,region:s=cl.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=jp(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return kp(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:l}=r;let a={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(a["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(a["Content-Type"]="application/json",h=JSON.stringify(l)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:h}).catch(_=>{throw new Np(_)}),g=d.headers.get("x-relay-error");if(g&&g==="true")throw new Ic(d);if(!d.ok)throw new Dc(d);let v=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield d.json():v==="application/octet-stream"?w=yield d.blob():v==="text/event-stream"?w=d:v==="multipart/form-data"?w=yield d.formData():w=yield d.text(),{data:w,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof Dc||s instanceof Ic?s.context:void 0}}})}}var ke={},xa={},Ti={},ss={},Pi={},Oi={},Cp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yr=Cp();const Ep=Yr.fetch,ph=Yr.fetch.bind(Yr),gh=Yr.Headers,Tp=Yr.Request,Pp=Yr.Response,sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:gh,Request:Tp,Response:Pp,default:ph,fetch:Ep},Symbol.toStringTag,{value:"Module"})),Op=Kh(sn);var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});let Ap=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ai.default=Ap;var xh=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oi,"__esModule",{value:!0});const Rp=xh(Op),$p=xh(Ai);let Lp=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Rp.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,a,c,u;let h=null,d=null,g=null,v=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?d=p:d=JSON.parse(p))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),f=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&f&&f.length>1&&(g=parseInt(f[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(h={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,v=406,w="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{h=JSON.parse(b),Array.isArray(h)&&i.status===404&&(d=[],h=null,v=200,w="OK")}catch{i.status===404&&b===""?(v=204,w="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((u=h==null?void 0:h.details)===null||u===void 0)&&u.includes("0 rows"))&&(h=null,v=200,w="OK"),h&&this.shouldThrowOnError)throw new $p.default(h)}return{error:h,data:d,count:g,status:v,statusText:w}});return this.shouldThrowOnError||(s=s.catch(i=>{var l,a,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Oi.default=Lp;var Ip=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pi,"__esModule",{value:!0});const Dp=Ip(Oi);let Mp=class extends Dp.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const l=i?`${i}.order`:"order",a=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(l,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:l="text"}={}){var a;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Pi.default=Mp;var Up=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ss,"__esModule",{value:!0});const zp=Up(Pi);let Fp=class extends zp.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${l}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};ss.default=Fp;var Bp=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ti,"__esModule",{value:!0});const pn=Bp(ss);let qp=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new pn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(l.length>0){const a=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new pn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var l;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new pn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new pn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new pn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ti.default=qp;var vh=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xa,"__esModule",{value:!0});const Wp=vh(Ti),Vp=vh(ss);let Hp=class yh{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Wp.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new yh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var l;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([d,g])=>g!==void 0).map(([d,g])=>[d,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([d,g])=>{c.searchParams.append(d,g)})):(a="POST",u=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new Vp.default({method:a,url:c,headers:h,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};xa.default=Hp;var on=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ke,"__esModule",{value:!0});ke.PostgrestError=ke.PostgrestBuilder=ke.PostgrestTransformBuilder=ke.PostgrestFilterBuilder=ke.PostgrestQueryBuilder=ke.PostgrestClient=void 0;const wh=on(xa);ke.PostgrestClient=wh.default;const _h=on(Ti);ke.PostgrestQueryBuilder=_h.default;const bh=on(ss);ke.PostgrestFilterBuilder=bh.default;const jh=on(Pi);ke.PostgrestTransformBuilder=jh.default;const Nh=on(Oi);ke.PostgrestBuilder=Nh.default;const kh=on(Ai);ke.PostgrestError=kh.default;var Kp=ke.default={PostgrestClient:wh.default,PostgrestQueryBuilder:_h.default,PostgrestFilterBuilder:bh.default,PostgrestTransformBuilder:jh.default,PostgrestBuilder:Nh.default,PostgrestError:kh.default};const{PostgrestClient:Gp,PostgrestQueryBuilder:Cx,PostgrestFilterBuilder:Ex,PostgrestTransformBuilder:Tx,PostgrestBuilder:Px,PostgrestError:Ox}=Kp;class Qp{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Jp="2.15.5",Yp=`realtime-js/${Jp}`,Xp="1.0.0",ul=1e4,Zp=1e3,e0=100;var Pn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pn||(Pn={}));var ne;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ne||(ne={}));var Ye;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ye||(Ye={}));var dl;(function(t){t.websocket="websocket"})(dl||(dl={}));var er;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(er||(er={}));class t0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const a=n.decode(e.slice(l,l+s));l=l+s;const c=n.decode(e.slice(l,l+i));l=l+i;const u=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class Sh{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(V||(V={}));const Mc=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,l)=>(i[l]=r0(l,t,e,s),i),{})},r0=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,l=r[t];return i&&!n.includes(i)?Ch(i,l):hl(l)},Ch=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return o0(e,r)}switch(t){case V.bool:return n0(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return s0(e);case V.json:case V.jsonb:return i0(e);case V.timestamp:return l0(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return hl(e);default:return hl(e)}},hl=t=>t,n0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},s0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},i0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},o0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const l=t.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(a=>Ch(e,a))}return t},l0=t=>typeof t=="string"?t.replace(" ","T"):t,Eh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ao{constructor(e,r,n={},s=ul){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Uc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Uc||(Uc={}));class On{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=On.syncState(this.state,s,i,l),this.pendingDiffs.forEach(c=>{this.state=On.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=On.syncDiff(this.state,s,i,l),a())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),l=this.transformState(r),a={},c={};return this.map(i,(u,h)=>{l[u]||(c[u]=h)}),this.map(l,(u,h)=>{const d=i[u];if(d){const g=h.map(b=>b.presence_ref),v=d.map(b=>b.presence_ref),w=h.filter(b=>v.indexOf(b.presence_ref)<0),_=d.filter(b=>g.indexOf(b.presence_ref)<0);w.length>0&&(a[u]=w),_.length>0&&(c[u]=_)}else a[u]=h}),this.syncDiff(i,{joins:a,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),h.length>0){const d=e[a].map(v=>v.presence_ref),g=h.filter(v=>d.indexOf(v.presence_ref)<0);e[a].unshift(...g)}n(a,h,c)}),this.map(l,(a,c)=>{let u=e[a];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),e[a]=u,s(a,u,c),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(zc||(zc={}));var An;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(An||(An={}));var ut;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ut||(ut={}));class va{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ao(this,Ye.join,this.params,this.timeout),this.rejoinTimer=new Sh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ne.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ye.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new On(this),this.broadcastEndpointURL=Eh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ne.closed){const{config:{broadcast:l,presence:a,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[An.PRESENCE]&&this.bindings[An.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},g={broadcast:l,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(ut.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(ut.CLOSED)),this.updateJoinPayload(Object.assign({config:g},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket.setAuth(),v===void 0){e==null||e(ut.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,b=(w=_==null?void 0:_.length)!==null&&w!==void 0?w:0,f=[];for(let p=0;p<b;p++){const m=_[p],{filter:{event:y,schema:S,table:k,filter:x}}=m,C=v&&v[p];if(C&&C.event===y&&C.schema===S&&C.table===k&&C.filter===x)f.push(Object.assign(Object.assign({},m),{id:C.id}));else{this.unsubscribe(),this.state=ne.errored,e==null||e(ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e(ut.SUBSCRIBED);return}}).receive("error",v=>{this.state=ne.errored,e==null||e(ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===ne.joined&&e===An.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,a,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(l=this.params)===null||l===void 0?void 0:l.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ne.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ye.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ao(this,Ye.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ne.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ao(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>e0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const l=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:h}=Ye;if(n&&[a,c,u,h].indexOf(l)>=0&&n!==this._joinRef())return;let g=this._onMessage(l,r,n);if(r&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var w,_,b;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(_=v.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(v=>v.callback(g,n)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var w,_,b,f,p,m;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const y=v.id,S=(w=v.filter)===null||w===void 0?void 0:w.event;return y&&((_=r.ids)===null||_===void 0?void 0:_.includes(y))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const y=(p=(f=v==null?void 0:v.filter)===null||f===void 0?void 0:f.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return y==="*"||y===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof g=="object"&&"ids"in g){const w=g.data,{schema:_,table:b,commit_timestamp:f,type:p,errors:m}=w;g=Object.assign(Object.assign({},{schema:_,table:b,commit_timestamp:f,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(w))}v.callback(g,n)})}_isClosed(){return this.state===ne.closed}_isJoined(){return this.state===ne.joined}_isJoining(){return this.state===ne.joining}_isLeaving(){return this.state===ne.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&va.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ye.close,{},e)}_onError(e){this._on(Ye.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ne.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Mc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Mc(e.columns,e.old_record)),r}}const co=()=>{},ks={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a0=[1e3,2e3,5e3,1e4],c0=1e4,u0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ul,this.transport=null,this.heartbeatIntervalMs=ks.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=co,this.ref=0,this.reconnectTimer=null,this.logger=co,this.conn=null,this.sendBuffer=[],this.serializer=new t0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>ns(async()=>{const{default:a}=await Promise.resolve().then(()=>sn);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...l)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${dl.websocket}`,this.httpEndpoint=Eh(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Qp.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xp}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pn.connecting:return er.Connecting;case Pn.open:return er.Open;case Pn.closing:return er.Closing;default:return er.Closed}}isConnected(){return this.connectionState()===er.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new va(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,l=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Zp,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ks.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,a=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ye.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([u0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Yp};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ye.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Sh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ks.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,l,a,c,u,h;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:ul,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ks.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:co,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:d=>a0[d-1]||c0,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(d,g)=>g(JSON.stringify(d)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ya extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function se(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class h0 extends ya{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fl extends ya{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var f0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Th=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ns(async()=>{const{default:n}=await Promise.resolve().then(()=>sn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},m0=()=>f0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ns(()=>Promise.resolve().then(()=>sn),void 0,import.meta.url)).Response:Response}),ml=t=>{if(Array.isArray(t))return t.map(r=>ml(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ml(n)}),e},p0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var gr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const uo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g0=(t,e,r)=>gr(void 0,void 0,void 0,function*(){const n=yield m0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,l=(s==null?void 0:s.statusCode)||i+"";e(new h0(uo(s),i,l))}).catch(s=>{e(new fl(uo(s),s))}):e(new fl(uo(t),t))}),x0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(p0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function is(t,e,r,n,s,i){return gr(this,void 0,void 0,function*(){return new Promise((l,a)=>{t(r,x0(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>g0(c,a,n))})})}function di(t,e,r,n){return gr(this,void 0,void 0,function*(){return is(t,"GET",e,r,n)})}function st(t,e,r,n,s){return gr(this,void 0,void 0,function*(){return is(t,"POST",e,n,s,r)})}function pl(t,e,r,n,s){return gr(this,void 0,void 0,function*(){return is(t,"PUT",e,n,s,r)})}function v0(t,e,r,n){return gr(this,void 0,void 0,function*(){return is(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ph(t,e,r,n,s){return gr(this,void 0,void 0,function*(){return is(t,"DELETE",e,n,s,r)})}var ye=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const y0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class w0{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Th(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return ye(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Fc),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${l.cacheControl}`,a["content-type"]=l.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),d=yield(e=="PUT"?pl:st)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:a},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(se(i))return{data:null,error:i};throw i}})}upload(e,r,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return ye(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${l}`);a.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Fc.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield pl(this.fetch,a.toString(),c,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(se(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ye(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield st(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),a=l.searchParams.get("token");if(!a)throw new ya("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}update(e,r,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return ye(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}copy(e,r,n){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return ye(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield st(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return ye(this,void 0,void 0,function*(){try{const s=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}download(e,r){return ye(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield di(this.fetch,`${this.url}/${s}/${a}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(se(a))return{data:null,error:a};throw a}})}info(e){return ye(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield di(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ml(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}exists(e){return ye(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield v0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n)&&n instanceof fl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Ph(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}list(e,r,n){return ye(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},y0),r),{prefix:e||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}listV2(e,r){return ye(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield st(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const _0="2.12.1",b0={"X-Client-Info":`storage-js/${_0}`};var vr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class j0{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},b0),r),this.fetch=Th(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return vr(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(se(e))return{data:null,error:e};throw e}})}getBucket(e){return vr(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return vr(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return vr(this,void 0,void 0,function*(){try{return{data:yield pl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}emptyBucket(e){return vr(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return vr(this,void 0,void 0,function*(){try{return{data:yield Ph(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}}class N0 extends j0{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new w0(this.url,this.headers,e,this.fetch)}}const k0="2.57.4";let wn="";typeof Deno<"u"?wn="deno":typeof document<"u"?wn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wn="react-native":wn="node";const S0={"X-Client-Info":`supabase-js-${wn}/${k0}`},C0={headers:S0},E0={schema:"public"},T0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P0={};var O0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const A0=t=>{let e;return t?e=t:typeof fetch>"u"?e=ph:e=fetch,(...r)=>e(...r)},R0=()=>typeof Headers>"u"?gh:Headers,$0=(t,e,r)=>{const n=A0(r),s=R0();return(i,l)=>O0(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},l),{headers:u}))})};var L0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function I0(t){return t.endsWith("/")?t:t+"/"}function D0(t,e){var r,n;const{db:s,auth:i,realtime:l,global:a}=t,{db:c,auth:u,realtime:h,global:d}=e,g={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>L0(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}function M0(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(I0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Oh="2.71.1",jr=30*1e3,gl=3,ho=gl*jr,U0="http://localhost:9999",z0="supabase.auth.token",F0={"X-Client-Info":`gotrue-js/${Oh}`},xl="X-Supabase-Api-Version",Ah={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},B0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,q0=10*60*1e3;class wa extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function D(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class W0 extends wa{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function V0(t){return D(t)&&t.name==="AuthApiError"}class Rh extends wa{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Vt extends wa{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class jt extends Vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function H0(t){return D(t)&&t.name==="AuthSessionMissingError"}class Ss extends Vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cs extends Vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Es extends Vt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function K0(t){return D(t)&&t.name==="AuthImplicitGrantRedirectError"}class Bc extends Vt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vl extends Vt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function fo(t){return D(t)&&t.name==="AuthRetryableFetchError"}class qc extends Vt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class yl extends Vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wc=` 	
\r=`.split(""),G0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Wc.length;e+=1)t[Wc[e].charCodeAt(0)]=-2;for(let e=0;e<hi.length;e+=1)t[hi[e].charCodeAt(0)]=e;return t})();function Vc(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(hi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(hi[n]),e.queuedBits-=6}}function $h(t,e,r){const n=G0[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Hc(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{Y0(l,n,r)};for(let l=0;l<t.length;l+=1)$h(t.charCodeAt(l),s,i);return e.join("")}function Q0(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function J0(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Q0(n,e)}}function Y0(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function X0(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)$h(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Z0(t){const e=[];return J0(t,r=>e.push(r)),new Uint8Array(e)}function eg(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Vc(s,r,n)),Vc(null,r,n),e.join("")}function tg(t){return Math.round(Date.now()/1e3)+t}function rg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ge=()=>typeof window<"u"&&typeof document<"u",Gt={tested:!1,writable:!1},Lh=()=>{if(!Ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gt.tested)return Gt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Gt.tested=!0,Gt.writable=!0}catch{Gt.tested=!0,Gt.writable=!1}return Gt.writable};function ng(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Ih=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ns(async()=>{const{default:n}=await Promise.resolve().then(()=>sn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},sg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Nr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Qt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},bt=async(t,e)=>{await t.removeItem(e)};class Ri{constructor(){this.promise=new Ri.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ri.promiseConstructor=Promise;function mo(t){const e=t.split(".");if(e.length!==3)throw new yl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!B0.test(e[n]))throw new yl("JWT not in base64url format");return{header:JSON.parse(Hc(e[0])),payload:JSON.parse(Hc(e[1])),signature:X0(e[2]),raw:{header:e[0],payload:e[1]}}}async function ig(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function og(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){n(l);return}}catch(l){if(!e(i,l)){s(l);return}}})()})}function lg(t){return("0"+t.toString(16)).substr(-2)}function ag(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,lg).join("")}async function cg(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ug(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await cg(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yr(t,e,r=!1){const n=ag();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Nr(t,`${e}-code-verifier`,s);const i=await ug(n);return[i,n===i?"plain":"s256"]}const dg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hg(t){const e=t.headers.get(xl);if(!e||!e.match(dg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wr(t){if(!pg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function po(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Kc(t){return JSON.parse(JSON.stringify(t))}var gg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Xt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xg=[502,503,504];async function Gc(t){var e;if(!sg(t))throw new vl(Xt(t),0);if(xg.includes(t.status))throw new vl(Xt(t),t.status);let r;try{r=await t.json()}catch(i){throw new Rh(Xt(i),i)}let n;const s=hg(t);if(s&&s.getTime()>=Ah["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new qc(Xt(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new jt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new qc(Xt(r),t.status,r.weak_password.reasons);throw new W0(Xt(r),t.status||500,n)}const vg=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function F(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[xl]||(i[xl]=Ah["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const a=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await yg(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function yg(t,e,r,n,s,i){const l=vg(e,n,s,i);let a;try{a=await t(r,Object.assign({},l))}catch(c){throw console.error(c),new vl(Xt(c),0)}if(a.ok||await Gc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await Gc(c)}}function at(t){var e;let r=null;jg(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=tg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Qc(t){const e=at(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Et(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function wg(t){return{data:t,error:null}}function _g(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,l=gg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},l);return{data:{properties:a,user:c},error:null}}function bg(t){return t}function jg(t){return t.access_token&&t.refresh_token&&t.expires_in}const go=["global","local","others"];var Ng=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class kg{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Ih(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=go[0]){if(go.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${go.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Et})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Ng(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_g,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(D(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Et})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,l,a,c;try{const u={nextPage:null,lastPage:0,total:0},h=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:bg});if(h.error)throw h.error;const d=await h.json(),g=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);u[`${b}Page`]=_}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(D(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){wr(e);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Et})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){wr(e);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Et})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){wr(e);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Et})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){wr(e.userId);try{const{data:r,error:n}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteFactor(e){wr(e.userId),wr(e.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}}function Jc(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Sg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _r={debug:!!(globalThis&&Lh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Dh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cg extends Dh{}async function Eg(t,e,r){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Cg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(_r.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Sg();const Tg={url:U0,storageKey:z0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yc(t,e,r){return await r()}const br={};class Jn{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jn.nextInstanceID,Jn.nextInstanceID+=1,this.instanceID>0&&Ge()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Tg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new kg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ih(s.fetch),this.lock=s.lock||Yc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ge()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Eg:this.lock=Yc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Lh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jc(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Jc(this.memoryStorage)),Ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=br[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){br[this.storageKey]=Object.assign(Object.assign({},br[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=br[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){br[this.storageKey]=Object.assign(Object.assign({},br[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Oh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=ng(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ge()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),K0(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",a),await this._saveSession(l),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?{error:r}:{error:new Rh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:at}),{data:l,error:a}=i;if(a||!l)return{data:{user:null,session:null},error:a};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:h,password:d,options:g}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await yr(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:d,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:w},xform:at})}else if("phone"in e){const{phone:h,password:d,options:g}=e;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:at})}else throw new Cs("You must provide either an email or phone number and a password");const{data:l,error:a}=i;if(a||!l)return{data:{user:null,session:null},error:a};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:l,options:a}=e;r=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qc})}else if("phone"in e){const{phone:i,password:l,options:a}=e;r=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qc})}else throw new Cs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ss}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,l,a,c,u,h,d,g,v;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:b,wallet:f,statement:p,options:m}=e;let y;if(Ge())if(typeof f=="object")y=f;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))y=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=f}const S=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in y&&y.signIn){const k=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let x;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")x=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)x=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)w=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),_=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((d=(h=m==null?void 0:m.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...m.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const k=await y.signMessage(new TextEncoder().encode(w),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=k}}try{const{data:b,error:f}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:eg(_)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:at});if(f)throw f;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ss}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:f})}catch(b){if(D(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const r=await Qt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:at});if(await bt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ss}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(D(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=e,a=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:at}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ss}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,l;try{if("email"in e){const{email:a,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await yr(this.storage,this.storageKey));const{error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:h}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Cs("You must provide either an email or phone number.")}catch(a){if(D(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:a}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:at});if(a)throw a;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await yr(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:wg})}catch(i){if(D(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new jt;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(D(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:l}=await F(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:l,error:a}=await F(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:a}}throw new Cs("You must provide either an email or phone number and a type")}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Qt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ho:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await Qt(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=po()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,h)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Et}):await this._useSession(async r=>{var n,s,i;const{data:l,error:a}=r;if(a)throw a;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jt}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Et})})}catch(r){if(D(r))return H0(r)&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new jt;const l=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await yr(this.storage,this.storageKey));const{data:u,error:h}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:l.access_token,xform:Et});if(h)throw h;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new jt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=mo(e.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(D(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:a}=r;if(a)throw a;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new jt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ge())throw new Es("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Es(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Es("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bc("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!l||!u)throw new Es("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(a);let g=h+d;c&&(g=parseInt(c));const v=g-h;v*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${d}s`);const w=g-d;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,g,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,g,h);const{data:_,error:b}=await this._getUser(i);if(b)throw b;const f={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:g,refresh_token:l,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(n){if(D(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Qt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:a}=await this.admin.signOut(l,e);if(a&&!(V0(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=rg(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await yr(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(D(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,a,c,u,h;const{data:d,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Ge()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(D(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await og(async s=>(s>0&&await ig(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:at})),(s,i)=>{const l=200*Math.pow(2,s);return i&&fo(i)&&Date.now()+l-n<jr})}catch(n){if(this._debug(r,"error",n),D(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ge()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Qt(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Qt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Nr(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:po()}else if(s&&!s.user&&!s.user){const l=await Qt(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await bt(this.storage,this.storageKey+"-user"),await Nr(this.storage,this.storageKey,s)):s.user=po()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ho;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${ho}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),fo(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:a}=await this._getUser(s.access_token);!a&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ri;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new jt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),D(i)){const l={session:null,error:i};return fo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Nr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Kc(s);await Nr(this.storage,this.storageKey,i)}else{const s=Kc(r);await Nr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await bt(this.storage,this.storageKey),await bt(this.storage,this.storageKey+"-code-verifier"),await bt(this.storage,this.storageKey+"-user"),this.userStorage&&await bt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${jr}ms, refresh threshold is ${gl} ticks`),s<=gl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Dh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await yr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:a}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:a})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=mo(s.access_token);let a=null;l.aal&&(a=l.aal);let c=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+q0>s)return n;const{data:i,error:l}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:v,error:w}=await this.getSession();if(w||!v.session)return{data:null,error:w};n=v.session.access_token}const{header:s,payload:i,signature:l,raw:{header:a,payload:c}}=mo(n);r!=null&&r.allowExpired||fg(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:l},error:null}}const h=mg(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,l,Z0(`${a}.${c}`)))throw new yl("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}}Jn.nextInstanceID=0;const Pg=Jn;class Og extends Pg{constructor(e){super(e)}}var Ag=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function a(h){try{u(n.next(h))}catch(d){l(d)}}function c(h){try{u(n.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class Rg{constructor(e,r,n){var s,i,l;this.supabaseUrl=e,this.supabaseKey=r;const a=M0(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:E0,realtime:P0,auth:Object.assign(Object.assign({},T0),{storageKey:c}),global:C0},h=D0(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=$0(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Gp(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new N0(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Sp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Ag(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:a,lock:c,debug:u},h,d){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Og({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:c,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new d0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $g=(t,e,r)=>new Rg(t,e,r);function Lg(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Lg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ig="https://odklvchyfcdcbbjvgbrz.supabase.co",Dg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ka2x2Y2h5ZmNkY2JianZnYnJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4MzQ4MTUsImV4cCI6MjA4MzQxMDgxNX0.ltkf9Ma9OM2T2KlWrcVbzgEAL9UMTU82jggYKVxoD8U",L=$g(Ig,Dg),Mh=j.createContext(void 0);function Mg({children:t}){const[e,r]=j.useState(null),[n,s]=j.useState(null),[i,l]=j.useState(null),[a,c]=j.useState(!0);j.useEffect(()=>{L.auth.getSession().then(({data:{session:_}})=>{s(_),r((_==null?void 0:_.user)??null),_!=null&&_.user?u(_.user.id):c(!1)});const{data:{subscription:w}}=L.auth.onAuthStateChange((_,b)=>{(async()=>(s(b),r((b==null?void 0:b.user)??null),b!=null&&b.user?await u(b.user.id):(l(null),c(!1))))()});return()=>w.unsubscribe()},[]);const u=async w=>{try{const{data:_,error:b}=await L.from("customers").select("*").eq("id",w).maybeSingle();if(b)throw b;if(!_){console.error("Customer record not found for user:",w),l(null);return}if(_.is_deactivated)throw await L.auth.signOut(),l(null),r(null),s(null),new Error("Account has been deactivated");l(_)}catch(_){if(console.error("Error loading customer:",_),_.message==="Account has been deactivated")throw _}finally{c(!1)}},h=async(w,_)=>{try{const{data:b,error:f}=await L.auth.signInWithPassword({email:w,password:_});if(f)return{error:f};if(b.user){const{data:p}=await L.from("customers").select("is_deactivated").eq("id",b.user.id).maybeSingle();if(p!=null&&p.is_deactivated)return await L.auth.signOut(),{error:new Error("Your account has been deactivated. Please contact support.")}}return{error:null}}catch(b){return{error:b}}},d=async(w,_,b,f)=>{try{const{data:p,error:m}=await L.auth.signUp({email:w,password:_,options:{data:{full_name:b,phone:f||null}}});if(console.log("Full signup response:",{authData:p,authError:m}),m)throw console.error("Signup error:",m),m;if(!p.user)throw new Error("User creation failed");if(p.user&&p.user.identities&&p.user.identities.length===0)throw new Error("An account with this email already exists. Please sign in instead.");return console.log("User created successfully:",p.user.id),{error:null}}catch(p){return console.error("Signup catch error:",p),{error:p}}},g=async()=>{await L.auth.signOut(),l(null)},v=async()=>{e&&await u(e.id)};return o.jsx(Mh.Provider,{value:{user:e,session:n,customer:i,loading:a,signIn:h,signUp:d,signOut:g,refreshCustomer:v},children:t})}function He(){const t=j.useContext(Mh);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ug={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(t,e)=>{const r=j.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:a="",children:c,...u},h)=>j.createElement("svg",{ref:h,...Ug,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:["lucide",`lucide-${zg(t)}`,a].join(" "),...u},[...e.map(([d,g])=>j.createElement(d,g)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=U("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=U("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=U("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=U("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=U("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=U("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=U("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=U("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=U("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=U("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=U("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=U("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=U("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=U("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=U("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=U("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=U("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=U("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=U("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=U("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=U("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=U("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=U("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=U("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=U("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=U("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ex(){const[t,e]=j.useState(!0),[r,n]=j.useState(""),[s,i]=j.useState(""),[l,a]=j.useState(""),[c,u]=j.useState(""),[h,d]=j.useState(""),[g,v]=j.useState(!1),{signIn:w,signUp:_}=He(),b=async f=>{f.preventDefault(),d(""),v(!0);try{if(t){const{error:p}=await w(r,s);if(p)throw p}else{if(!l.trim())throw new Error("Full name is required");const{error:p}=await _(r,s,l,c);if(p)throw p}}catch(p){d(p instanceof Error?p.message:"An error occurred")}finally{v(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-500 rounded-full mb-4",children:t?o.jsx(Vg,{className:"w-8 h-8 text-white"}):o.jsx(Yg,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:t?"Welcome Back":"Create Account"}),o.jsx("p",{className:"text-slate-600",children:t?"Sign in to view your service history and rewards":"Join our rewards program today"})]}),o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[!t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),o.jsx("input",{id:"fullName",type:"text",required:!t,value:l,onChange:f=>a(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"John Doe"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone (Optional)"}),o.jsx("input",{id:"phone",type:"tel",value:c,onChange:f=>u(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"(555) 123-4567"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),o.jsx("input",{id:"email",type:"email",required:!0,value:r,onChange:f=>n(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"your@email.com"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),o.jsx("input",{id:"password",type:"password",required:!0,value:s,onChange:f=>i(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:""})]}),h&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:h}),o.jsx("button",{type:"submit",disabled:g,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Please wait...":t?"Sign In":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>{e(!t),d("")},className:"text-emerald-600 hover:text-emerald-700 font-medium text-sm",children:t?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})}const Zt={shop_logo_url:null,primary_color:"#10b981",secondary_color:"#059669",accent_color:"#047857",header_text:"Auto Shop Rewards",welcome_message:"Welcome back"},Wh=j.createContext({brandSettings:Zt,loading:!0,refreshBrand:async()=>{}});function wt(){return j.useContext(Wh)}function tx({children:t}){const[e,r]=j.useState(Zt),[n,s]=j.useState(!0),i=async()=>{try{const{data:a,error:c}=await L.from("shop_settings").select("shop_logo_url, primary_color, secondary_color, accent_color, header_text, welcome_message").maybeSingle();if(c)throw c;if(a){const u={shop_logo_url:a.shop_logo_url,primary_color:a.primary_color||Zt.primary_color,secondary_color:a.secondary_color||Zt.secondary_color,accent_color:a.accent_color||Zt.accent_color,header_text:a.header_text||Zt.header_text,welcome_message:a.welcome_message||Zt.welcome_message};r(u),l(u)}}catch(a){console.error("Error loading brand settings:",a)}finally{s(!1)}},l=a=>{const c=document.documentElement;c.style.setProperty("--brand-primary",a.primary_color),c.style.setProperty("--brand-secondary",a.secondary_color),c.style.setProperty("--brand-accent",a.accent_color)};return j.useEffect(()=>{i()},[]),o.jsx(Wh.Provider,{value:{brandSettings:e,loading:n,refreshBrand:i},children:t})}function rx(){const{customer:t}=He(),[e,r]=j.useState([]),[n,s]=j.useState([]),[i,l]=j.useState(!0);j.useEffect(()=>{a()},[]);const a=async()=>{try{const[d,g]=await Promise.all([L.from("reward_items").select("*").eq("is_active",!0).order("points_cost",{ascending:!0}),L.from("reward_redemptions").select("*, reward_item:reward_items(*)").order("redeemed_at",{ascending:!1})]);if(d.error)throw d.error;if(g.error)throw g.error;r(d.data||[]),s(g.data||[])}catch(d){console.error("Error loading rewards:",d)}finally{l(!1)}},c=d=>((t==null?void 0:t.reward_points)||0)>=d,u=d=>{switch(d){case"completed":return o.jsx(ir,{className:"w-5 h-5 text-emerald-600"});case"pending":return o.jsx(ja,{className:"w-5 h-5 text-orange-600"});case"cancelled":return o.jsx(en,{className:"w-5 h-5 text-red-600"});default:return null}},h=d=>{switch(d){case"completed":return"bg-emerald-100 text-emerald-700";case"pending":return"bg-orange-100 text-orange-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-slate-100 text-slate-700"}};return i?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-slate-600",children:"Loading rewards..."})}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-xl shadow-lg p-6 text-white",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Ft,{className:"w-8 h-8"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Your Reward Points"})]}),o.jsxs("p",{className:"text-4xl font-bold mb-2",children:[(t==null?void 0:t.reward_points)||0," points"]}),o.jsx("p",{className:"text-emerald-100",children:"Redeem points for exclusive rewards and discounts"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Be,{className:"w-6 h-6 text-slate-700"}),o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Available Rewards"})]}),e.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Be,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Rewards Available"}),o.jsx("p",{className:"text-slate-600",children:"Check back later for new rewards."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(d=>{const g=c(d.points_cost);return o.jsx("div",{className:`bg-white rounded-xl shadow-sm border-2 transition-all ${g?"border-emerald-200 hover:border-emerald-300":"border-slate-200 opacity-75"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:d.name}),o.jsx("p",{className:"text-sm text-slate-600",children:d.description})]})}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[o.jsxs("div",{className:"flex items-center gap-1.5 font-semibold text-emerald-600",children:[o.jsx(Ft,{className:"w-5 h-5"}),o.jsxs("span",{children:[d.points_cost," pts"]})]}),g?o.jsx("div",{className:"px-3 py-1.5 bg-emerald-100 text-emerald-700 text-sm font-medium rounded-full",children:"Can Redeem"}):o.jsxs("div",{className:"px-3 py-1.5 bg-slate-100 text-slate-600 text-sm font-medium rounded-full",children:[d.points_cost-((t==null?void 0:t.reward_points)||0)," more pts"]})]}),g&&o.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:o.jsx("p",{className:"text-sm text-slate-600 text-center",children:"Visit us or call to redeem this reward"})})]})},d.id)})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Pe,{className:"w-6 h-6 text-slate-700"}),o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Redemption History"})]}),n.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Pe,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Redemptions Yet"}),o.jsx("p",{className:"text-slate-600",children:"Your reward redemptions will appear here."})]}):o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:o.jsx("div",{className:"divide-y divide-slate-200",children:n.map(d=>o.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u(d.status),o.jsx("h4",{className:"font-semibold text-slate-900",children:d.reward_item.name}),o.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${h(d.status)}`,children:d.status})]}),o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:d.reward_item.description}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[o.jsx("span",{children:new Date(d.redeemed_at).toLocaleDateString()}),o.jsxs("span",{children:[d.points_spent," points"]})]}),d.notes&&o.jsx("p",{className:"text-sm text-slate-600 mt-2 italic",children:d.notes})]})})},d.id))})})]})]})}function nx(){const[t,e]=j.useState([]),[r,n]=j.useState(!0);j.useEffect(()=>{s();const l=setInterval(()=>{s()},5e3);return()=>clearInterval(l)},[]);const s=async()=>{try{const{data:l,error:a}=await L.from("services").select("*, vehicle:vehicles(*)").order("service_date",{ascending:!1});if(a)throw a;e(l||[])}catch(l){console.error("Error loading services:",l)}finally{n(!1)}};if(r)return o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-slate-600",children:"Loading services..."})});if(t.length===0)return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Yn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Service History"}),o.jsx("p",{className:"text-slate-600",children:"Your service history will appear here once you've had work done at our shop."})]});const i=t.reduce((l,a)=>l+a.points_earned,0);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Yn,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Total Services"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.length})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:o.jsx(Ft,{className:"w-5 h-5 text-orange-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Points Earned"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:i})]})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200",children:o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Service History"})}),o.jsx("div",{className:"divide-y divide-slate-200",children:t.map(l=>o.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex items-center gap-3 mb-2",children:o.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[o.jsx(Pe,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:new Date(l.service_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})}),o.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:l.description}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-600 mb-2",children:[o.jsx(sr,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm",children:[l.vehicle.year," ",l.vehicle.make," ",l.vehicle.model,l.vehicle.license_plate&&` - ${l.vehicle.license_plate}`]})]}),l.mileage_at_service&&o.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Mileage at service: ",l.mileage_at_service.toLocaleString()," miles"]}),l.notes&&o.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-slate-700",children:l.notes})})]}),o.jsxs("div",{className:"text-right ml-6",children:[o.jsxs("p",{className:"text-2xl font-bold text-slate-900 mb-1",children:["$",Number(l.amount).toFixed(2)]}),o.jsxs("div",{className:"flex items-center gap-1.5 justify-end text-emerald-600",children:[o.jsx(Ft,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm font-semibold",children:["+",l.points_earned," pts"]})]})]})]})},l.id))})]})]})}function sx(){const{customer:t}=He(),[e,r]=j.useState([]),[n,s]=j.useState(!0);j.useEffect(()=>{l(),i()},[t]);const i=async()=>{if(t)try{await L.from("customer_promotions").update({is_read:!0,read_at:new Date().toISOString()}).eq("customer_id",t.id).eq("is_read",!1)}catch(d){console.error("Error marking promotions as read:",d)}},l=async()=>{if(t)try{const{data:d,error:g}=await L.from("customer_promotions").select("*").eq("customer_id",t.id).order("sent_at",{ascending:!1});if(g)throw g;if(!d||d.length===0){r([]),s(!1);return}const v=d.map(f=>f.promotion_id),{data:w,error:_}=await L.from("promotions").select("*").in("id",v);if(_)throw _;const b=(w||[]).map(f=>{const p=d.find(m=>m.promotion_id===f.id);return p?{...f,customer_promotion:p}:null}).filter(f=>f!==null).sort((f,p)=>new Date(p.customer_promotion.sent_at).getTime()-new Date(f.customer_promotion.sent_at).getTime());r(b)}catch(d){console.error("Error loading promotions:",d)}finally{s(!1)}},a=async d=>{try{const{error:g}=await L.from("customer_promotions").update({is_used:!d.customer_promotion.is_used,used_at:d.customer_promotion.is_used?null:new Date().toISOString()}).eq("id",d.customer_promotion.id);if(g)throw g;l()}catch(g){console.error("Error updating promotion:",g)}},c=d=>{switch(d){case"percentage":return o.jsx(zh,{className:"w-5 h-5"});case"fixed_amount":return o.jsx(ka,{className:"w-5 h-5"});case"points_bonus":return o.jsx(qh,{className:"w-5 h-5"});case"free_service":return o.jsx(Be,{className:"w-5 h-5"});default:return o.jsx(Zr,{className:"w-5 h-5"})}},u=d=>{switch(d.discount_type){case"percentage":return`${d.discount_value}% off`;case"fixed_amount":return`$${d.discount_value} off`;case"points_bonus":return`${d.discount_value}x points multiplier`;case"free_service":return"Free service";default:return""}},h=d=>new Date(d)<new Date;return n?o.jsx("div",{className:"text-slate-600",children:"Loading offers..."}):o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Special Offers"}),o.jsx("p",{className:"text-slate-600",children:"Exclusive promotions just for you"})]}),e.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Zr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Offers Yet"}),o.jsx("p",{className:"text-slate-600",children:"Special promotions will appear here when available"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(d=>{const g=h(d.valid_until),v=d.customer_promotion.is_used;return o.jsx("div",{className:`bg-white rounded-xl shadow-sm border-2 overflow-hidden ${v?"border-slate-200 opacity-75":g?"border-orange-200":d.is_active?"border-emerald-200":"border-slate-200"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 ${v?"bg-slate-100 text-slate-400":g?"bg-orange-100 text-orange-600":"bg-emerald-100 text-emerald-600"}`,children:c(d.discount_type)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:d.title}),o.jsx("p",{className:`font-semibold mb-2 ${v?"text-slate-500":g?"text-orange-600":"text-emerald-600"}`,children:u(d)}),o.jsx("p",{className:"text-sm text-slate-700 mb-3",children:d.description}),d.promo_code&&o.jsxs("div",{className:"bg-slate-50 rounded-lg px-3 py-2 mb-3",children:[o.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Promo Code"}),o.jsx("p",{className:"font-mono font-bold text-slate-900",children:d.promo_code})]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-600",children:[o.jsx(Pe,{className:"w-4 h-4"}),o.jsxs("span",{children:[g?"Expired":"Valid until"," ",new Date(d.valid_until).toLocaleDateString()]})]})]})]})}),o.jsx("div",{className:"flex items-center gap-2",children:v?o.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 bg-slate-100 text-slate-600 py-2 rounded-lg font-medium",children:[o.jsx(ba,{className:"w-5 h-5"}),"Used"]}):g?o.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 bg-orange-100 text-orange-700 py-2 rounded-lg font-medium",children:[o.jsx(fr,{className:"w-5 h-5"}),"Expired"]}):o.jsx("button",{onClick:()=>a(d),className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white py-2 rounded-lg font-medium transition-colors",children:"Mark as Used"})})]})},d.id)})})]})}function ix(){const{customer:t}=He();wt();const[e,r]=j.useState([]),[n,s]=j.useState([]),[i,l]=j.useState(!0),[a,c]=j.useState(!1),[u,h]=j.useState({vehicle_id:"",requested_date:"",requested_time:"",service_type:"",description:""}),[d,g]=j.useState(!1),[v,w]=j.useState(null);j.useEffect(()=>{t&&_()},[t]);const _=async()=>{try{const[x,C]=await Promise.all([L.from("appointments").select("*").eq("customer_id",t.id).order("requested_date",{ascending:!1}),L.from("vehicles").select("*").eq("customer_id",t.id).order("created_at",{ascending:!1})]);if(x.error)throw x.error;if(C.error)throw C.error;const O=(x.data||[]).map(N=>({...N,vehicle:(C.data||[]).find(E=>E.id===N.vehicle_id)}));r(O),s(C.data||[])}catch(x){console.error("Error loading appointments:",x),p("error","Failed to load appointments")}finally{l(!1)}},b=async x=>{if(x.preventDefault(),!u.vehicle_id||!u.requested_date||!u.requested_time||!u.service_type){p("error","Please fill in all required fields");return}g(!0);try{const{error:C}=await L.from("appointments").insert({customer_id:t.id,vehicle_id:u.vehicle_id,requested_date:u.requested_date,requested_time:u.requested_time,service_type:u.service_type,description:u.description||null});if(C)throw C;p("success","Appointment request submitted successfully"),c(!1),h({vehicle_id:"",requested_date:"",requested_time:"",service_type:"",description:""}),_()}catch(C){console.error("Error booking appointment:",C),p("error","Failed to book appointment")}finally{g(!1)}},f=async x=>{if(confirm("Are you sure you want to cancel this appointment?"))try{const{error:C}=await L.from("appointments").update({status:"cancelled",cancelled_reason:"Cancelled by customer"}).eq("id",x);if(C)throw C;p("success","Appointment cancelled"),_()}catch(C){console.error("Error cancelling appointment:",C),p("error","Failed to cancel appointment")}},p=(x,C)=>{w({type:x,text:C}),setTimeout(()=>w(null),3e3)},m=x=>{switch(x){case"pending":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded-full",children:[o.jsx(_a,{className:"w-4 h-4"}),"Pending"]});case"confirmed":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-emerald-100 text-emerald-800 text-sm font-medium rounded-full",children:[o.jsx(ir,{className:"w-4 h-4"}),"Confirmed"]});case"cancelled":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full",children:[o.jsx(en,{className:"w-4 h-4"}),"Cancelled"]});case"completed":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:[o.jsx(ir,{className:"w-4 h-4"}),"Completed"]});default:return null}},y=x=>new Date(x).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),S=x=>{const[C,O]=x.split(":"),N=parseInt(C),E=N>=12?"PM":"AM";return`${N%12||12}:${O} ${E}`},k=()=>{const x=new Date;return x.setDate(x.getDate()+1),x.toISOString().split("T")[0]};return i?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-slate-600",children:"Loading appointments..."})}):o.jsxs("div",{className:"space-y-6",children:[v&&o.jsx("div",{className:`p-4 rounded-lg ${v.type==="success"?"bg-emerald-50 text-emerald-800":"bg-red-50 text-red-800"}`,children:v.text}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"My Appointments"}),o.jsx("p",{className:"text-slate-600",children:"Schedule and manage your service appointments"})]}),o.jsxs("button",{onClick:()=>c(!0),disabled:n.length===0,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Book Appointment"]})]}),n.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsx("p",{className:"text-yellow-800",children:"You need to add a vehicle before booking an appointment. Contact us to add your vehicle information."})}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Book Appointment"}),o.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600",children:o.jsx(fr,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Vehicle ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:u.vehicle_id,onChange:x=>h({...u,vehicle_id:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",required:!0,children:[o.jsx("option",{value:"",children:"Select a vehicle"}),n.map(x=>o.jsxs("option",{value:x.id,children:[x.year," ",x.make," ",x.model]},x.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Preferred Date ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",min:k(),value:u.requested_date,onChange:x=>h({...u,requested_date:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Preferred Time ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"time",value:u.requested_time,onChange:x=>h({...u,requested_time:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Service Type ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:u.service_type,onChange:x=>h({...u,service_type:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",required:!0,children:[o.jsx("option",{value:"",children:"Select service type"}),o.jsx("option",{value:"Oil Change",children:"Oil Change"}),o.jsx("option",{value:"Tire Rotation",children:"Tire Rotation"}),o.jsx("option",{value:"Brake Service",children:"Brake Service"}),o.jsx("option",{value:"Engine Diagnostic",children:"Engine Diagnostic"}),o.jsx("option",{value:"Transmission Service",children:"Transmission Service"}),o.jsx("option",{value:"AC Service",children:"AC Service"}),o.jsx("option",{value:"General Inspection",children:"General Inspection"}),o.jsx("option",{value:"Other",children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Additional Details"}),o.jsx("textarea",{value:u.description,onChange:x=>h({...u,description:x.target.value}),rows:3,placeholder:"Describe any specific issues or concerns...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none resize-none"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 disabled:bg-slate-300 text-white font-medium rounded-lg transition-colors",children:d?"Booking...":"Book Appointment"})]})]})]})}),o.jsx("div",{className:"space-y-4",children:e.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Pe,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Appointments"}),o.jsx("p",{className:"text-slate-600",children:"You haven't booked any appointments yet."})]}):e.map(x=>o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:x.service_type}),m(x.status)]}),o.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pe,{className:"w-4 h-4"}),o.jsx("span",{children:y(x.requested_date)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ja,{className:"w-4 h-4"}),o.jsx("span",{children:S(x.requested_time)})]}),x.vehicle&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"w-4 h-4"}),o.jsxs("span",{children:[x.vehicle.year," ",x.vehicle.make," ",x.vehicle.model]})]})]}),x.description&&o.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-slate-700",children:x.description})}),x.admin_notes&&o.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Admin Notes:"}),o.jsx("p",{className:"text-sm text-blue-800",children:x.admin_notes})]}),x.cancelled_reason&&o.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsx("p",{className:"text-sm font-medium text-red-900 mb-1",children:"Cancellation Reason:"}),o.jsx("p",{className:"text-sm text-red-800",children:x.cancelled_reason})]})]})}),x.status==="pending"&&o.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:o.jsxs("button",{onClick:()=>f(x.id),className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 font-medium rounded-lg transition-colors",children:[o.jsx(en,{className:"w-4 h-4"}),"Cancel Appointment"]})})]},x.id))})]})}const _l={bronze:{name:"bronze",displayName:"Bronze",minPoints:0,multiplier:1,color:"text-orange-700",gradient:"from-orange-400 to-orange-600"},silver:{name:"silver",displayName:"Silver",minPoints:500,multiplier:1.25,color:"text-slate-600",gradient:"from-slate-300 to-slate-500"},gold:{name:"gold",displayName:"Gold",minPoints:1500,multiplier:1.5,color:"text-yellow-600",gradient:"from-yellow-400 to-yellow-600"},platinum:{name:"platinum",displayName:"Platinum",minPoints:3e3,multiplier:2,color:"text-slate-800",gradient:"from-slate-400 to-slate-700"}};function $i(t){return _l[t]||_l.bronze}function Vh(t){const e=["bronze","silver","gold","platinum"],r=e.indexOf(t);return r===-1||r===e.length-1?null:_l[e[r+1]]}function ox(t){const e=$i(t.tier),r=Vh(t.tier);if(!r)return{currentTier:e,nextTier:null,progressPercent:100,pointsNeeded:0};const n=t.reward_points,s=e.minPoints,i=r.minPoints,l=i-s,a=n-s,c=Math.min(100,a/l*100),u=Math.max(0,i-n);return{currentTier:e,nextTier:r,progressPercent:c,pointsNeeded:u}}function lx(t){const e=$i(t.tier),r=Vh(t.tier);if(!r)return{currentTier:e,nextTier:null,cashNeeded:0};const n=t.reward_points,i=Math.max(0,r.minPoints-n)/t.tier_multiplier;return{currentTier:e,nextTier:r,cashNeeded:i}}function ax(t,e){const n=e.filter(a=>a.is_active).filter(a=>a.points_cost>t);if(n.length===0)return null;n.sort((a,c)=>a.points_cost-c.points_cost);const s=n[0],i=s.points_cost-t,l=t/s.points_cost*100;return{reward:s,pointsNeeded:i,progressPercent:l}}function cx(t,e,r,n,s){const i=new Date;if(n){const l=new Date(n),a=Math.ceil((l.getTime()-i.getTime())/(1e3*60*60*24));if(a<0)return{type:"overdue",message:"Service is overdue",daysOverdue:Math.abs(a)};if(a<=14)return{type:"due-soon",message:"Service due soon",daysUntilDue:a};if(a<=30)return{type:"upcoming",message:"Service coming up",daysUntilDue:a}}if(s&&r){const l=s-r;if(l<0)return{type:"overdue",message:"Service is overdue by mileage",milesOverdue:Math.abs(l)};if(l<=500)return{type:"due-soon",message:"Service due soon by mileage",milesUntilDue:l};if(l<=1e3)return{type:"upcoming",message:"Service coming up by mileage",milesUntilDue:l}}return null}function ux({customer:t}){const{currentTier:e,nextTier:r,progressPercent:n,pointsNeeded:s}=ox(t);return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${e.gradient} rounded-lg flex items-center justify-center`,children:o.jsx(Na,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Membership Tier"}),o.jsx("p",{className:`text-2xl font-bold ${e.color}`,children:e.displayName})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Points Multiplier"}),o.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:[e.multiplier,"x"]})]})]}),r?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:"text-slate-600",children:["Progress to ",r.displayName]}),o.jsxs("span",{className:"font-semibold text-slate-900",children:[t.reward_points," / ",r.minPoints," points"]})]}),o.jsx("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:o.jsx("div",{className:`absolute inset-y-0 left-0 bg-gradient-to-r ${r.gradient} transition-all duration-500 rounded-full`,style:{width:`${n}%`}})}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-3 py-2 rounded-lg",children:[o.jsx(Jg,{className:"w-4 h-4"}),o.jsxs("span",{children:["Just ",o.jsxs("span",{className:"font-bold",children:[s," points"]})," away from ",r.displayName," tier (earn ",r.multiplier,"x points!)"]})]})]}):o.jsxs("div",{className:"flex items-center gap-2 text-sm bg-slate-900 text-white px-4 py-3 rounded-lg",children:[o.jsx(Ft,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"You've reached the highest tier! Enjoy maximum rewards."})]})]})}function dx({customer:t}){const[e,r]=j.useState([]),[n,s]=j.useState(!0);j.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:h,error:d}=await L.from("reward_items").select("*").eq("is_active",!0).order("points_cost",{ascending:!0});if(d)throw d;r(h||[])}catch(h){console.error("Error loading rewards:",h)}finally{s(!1)}};if(n)return o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:o.jsx("div",{className:"text-slate-600",children:"Loading..."})});const l=ax(t.reward_points,e);if(!l)return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:o.jsx(Be,{className:"w-6 h-6 text-emerald-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Next Reward"}),o.jsx("p",{className:"text-lg font-bold text-slate-900",children:"All rewards unlocked!"})]})]}),o.jsx("p",{className:"text-sm text-slate-600",children:"You have enough points for all available rewards. Check out the Rewards tab to redeem them!"})]});const{reward:a,pointsNeeded:c,progressPercent:u}=l;return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:o.jsx(Gg,{className:"w-6 h-6 text-emerald-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Next Reward Goal"}),o.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.name})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-slate-600",children:"Your progress"}),o.jsxs("span",{className:"font-semibold text-slate-900",children:[t.reward_points," / ",a.points_cost," points"]})]}),o.jsx("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-emerald-400 to-emerald-600 transition-all duration-500 rounded-full",style:{width:`${Math.min(100,u)}%`}})}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-3 py-2 rounded-lg",children:[o.jsx(Be,{className:"w-4 h-4"}),o.jsxs("span",{children:["Just ",o.jsxs("span",{className:"font-bold",children:[c," points"]})," away from ",a.name,"!"]})]})]})]})}function hx({vehicles:t}){const e=t.map(r=>{const n=cx(r.last_service_date,r.last_service_mileage,r.current_mileage,r.next_service_due_date,r.next_service_due_mileage);return{vehicle:r,reminder:n}}).filter(({reminder:r})=>r!==null);return e.length===0?null:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Fg,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Service Reminders"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Keep your vehicles in top condition"})]})]}),o.jsx("div",{className:"space-y-3",children:e.map(({vehicle:r,reminder:n})=>{if(!n)return null;const s=n.type==="overdue",i=n.type==="due-soon";return o.jsx("div",{className:`p-4 rounded-lg border-l-4 ${s?"bg-red-50 border-red-500":i?"bg-orange-50 border-orange-500":"bg-blue-50 border-blue-500"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-0.5",children:o.jsx(_a,{className:`w-5 h-5 ${s?"text-red-600":i?"text-orange-600":"text-blue-600"}`})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"font-semibold text-slate-900",children:[r.year," ",r.make," ",r.model]}),o.jsx("p",{className:`text-sm ${s?"text-red-700":i?"text-orange-700":"text-blue-700"}`,children:n.message}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-600",children:[n.daysOverdue!==void 0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Pe,{className:"w-3 h-3"}),o.jsxs("span",{children:[n.daysOverdue," days overdue"]})]}),n.daysUntilDue!==void 0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Pe,{className:"w-3 h-3"}),o.jsxs("span",{children:["Due in ",n.daysUntilDue," days"]})]}),n.milesOverdue!==void 0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Xc,{className:"w-3 h-3"}),o.jsxs("span",{children:[n.milesOverdue," miles overdue"]})]}),n.milesUntilDue!==void 0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Xc,{className:"w-3 h-3"}),o.jsxs("span",{children:[n.milesUntilDue," miles until due"]})]})]})]})]})},r.id)})})]})}function Hh({customer:t,onClose:e}){const{brandSettings:r}=wt(),[n,s]=j.useState(!1),[i,l]=j.useState(""),[a,c]=j.useState({make:"",model:"",year:new Date().getFullYear().toString(),vin:"",licensePlate:"",color:"",mileage:"",pictureUrl:""}),u=async h=>{h.preventDefault(),l(""),s(!0);try{const d=parseInt(a.year);if(isNaN(d)||d<1900||d>new Date().getFullYear()+1)throw new Error("Please enter a valid year");const{error:g}=await L.from("vehicles").insert({customer_id:t.id,make:a.make,model:a.model,year:d,vin:a.vin||null,license_plate:a.licensePlate||null,color:a.color||null,mileage:a.mileage?parseInt(a.mileage):0,picture_url:a.pictureUrl||null});if(g)throw g;e()}catch(d){l(d instanceof Error?d.message:"An error occurred")}finally{s(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Add Vehicle"}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors",children:o.jsx(fr,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Customer"}),o.jsx("p",{className:"font-semibold text-slate-900",children:t.full_name}),o.jsx("p",{className:"text-sm text-slate-600",children:t.email})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"make",className:"block text-sm font-medium text-slate-700 mb-1",children:"Make"}),o.jsx("input",{id:"make",type:"text",required:!0,value:a.make,onChange:h=>c({...a,make:h.target.value}),placeholder:"e.g., Toyota",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-slate-700 mb-1",children:"Model"}),o.jsx("input",{id:"model",type:"text",required:!0,value:a.model,onChange:h=>c({...a,model:h.target.value}),placeholder:"e.g., Camry",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"year",className:"block text-sm font-medium text-slate-700 mb-1",children:"Year"}),o.jsx("input",{id:"year",type:"number",required:!0,min:"1900",max:new Date().getFullYear()+1,value:a.year,onChange:h=>c({...a,year:h.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-slate-700 mb-1",children:"Color (Optional)"}),o.jsx("input",{id:"color",type:"text",value:a.color,onChange:h=>c({...a,color:h.target.value}),placeholder:"e.g., Silver",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"licensePlate",className:"block text-sm font-medium text-slate-700 mb-1",children:"License Plate (Optional)"}),o.jsx("input",{id:"licensePlate",type:"text",value:a.licensePlate,onChange:h=>c({...a,licensePlate:h.target.value}),placeholder:"e.g., ABC-1234",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"vin",className:"block text-sm font-medium text-slate-700 mb-1",children:"VIN (Optional)"}),o.jsx("input",{id:"vin",type:"text",value:a.vin,onChange:h=>c({...a,vin:h.target.value}),placeholder:"17-character VIN",maxLength:17,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"mileage",className:"block text-sm font-medium text-slate-700 mb-1",children:"Current Mileage (Optional)"}),o.jsx("input",{id:"mileage",type:"number",min:"0",value:a.mileage,onChange:h=>c({...a,mileage:h.target.value}),placeholder:"e.g., 45000",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"pictureUrl",className:"block text-sm font-medium text-slate-700 mb-1",children:"Vehicle Picture URL (Optional)"}),o.jsx("input",{id:"pictureUrl",type:"url",value:a.pictureUrl,onChange:h=>c({...a,pictureUrl:h.target.value}),placeholder:"https://example.com/car-image.jpg",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"}),a.pictureUrl&&o.jsx("div",{className:"mt-2",children:o.jsx("img",{src:a.pictureUrl,alt:"Vehicle preview",className:"w-full h-32 object-cover rounded-lg",onError:h=>{h.target.style.display="none"}})})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:i}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:n,className:"flex-1 text-white font-medium py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:n?"#cbd5e1":r.primary_color},onMouseEnter:h=>!n&&(h.currentTarget.style.backgroundColor=r.secondary_color),onMouseLeave:h=>!n&&(h.currentTarget.style.backgroundColor=r.primary_color),children:n?"Adding...":"Add Vehicle"})]})]})]})})}function fx(){const{customer:t,signOut:e,refreshCustomer:r}=He(),{brandSettings:n}=wt(),[s,i]=j.useState("vehicles"),[l,a]=j.useState([]),[c,u]=j.useState(!0),[h,d]=j.useState(0),[g,v]=j.useState(!1);j.useEffect(()=>{w(),_();const b=setInterval(()=>{w(),r(),_()},5e3);return()=>clearInterval(b)},[]);const w=async()=>{try{const{data:b,error:f}=await L.from("vehicles").select("*").order("created_at",{ascending:!1});if(f)throw f;const{data:p,error:m}=await L.from("services").select("*").order("service_date",{ascending:!1});if(m)throw m;const y=(b||[]).map(S=>({...S,services:(p||[]).filter(k=>k.vehicle_id===S.id)}));a(y)}catch(b){console.error("Error loading data:",b)}finally{u(!1)}},_=async()=>{if(t)try{const{count:b,error:f}=await L.from("customer_promotions").select("*",{count:"exact",head:!0}).eq("customer_id",t.id).eq("is_read",!1);if(f)throw f;d(b||0)}catch(b){console.error("Error loading unread promo count:",b)}};return c?o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsx("div",{className:"text-slate-600",children:"Loading..."})}):o.jsxs("div",{className:"min-h-screen bg-slate-50",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:n.shop_logo_url?"transparent":n.primary_color},children:n.shop_logo_url?o.jsx("img",{src:n.shop_logo_url,alt:"Shop logo",className:"w-full h-full object-contain",onError:b=>{const f=b.target;f.style.display="none",f.parentElement.style.backgroundColor=n.primary_color,f.parentElement.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>'}}):o.jsx(Yn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-slate-900 truncate",children:n.header_text}),o.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 truncate",children:[n.welcome_message,", ",t==null?void 0:t.full_name]})]})]}),o.jsxs("button",{onClick:e,className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 text-slate-600 hover:text-slate-900 transition-colors flex-shrink-0",children:[o.jsx(Uh,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})})}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsx(ux,{customer:t}),o.jsx(dx,{customer:t})]}),o.jsx("div",{className:"mb-8",children:o.jsx(hx,{vehicles:l.map(b=>b)})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${n.primary_color}20`},children:o.jsx(Ft,{className:"w-6 h-6",style:{color:n.primary_color}})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Reward Points"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:(t==null?void 0:t.reward_points)||0})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:o.jsx(sr,{className:"w-6 h-6 text-orange-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Vehicles"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:l.length})]})]})})]}),o.jsx("div",{className:"mb-6 border-b border-slate-200 -mx-4 sm:mx-0",children:o.jsxs("div",{className:"flex gap-2 sm:gap-4 overflow-x-auto px-4 sm:px-0 scrollbar-hide",children:[o.jsxs("button",{onClick:()=>i("vehicles"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:s==="vehicles"?{borderBottomColor:n.primary_color,color:n.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(sr,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Vehicles"})]}),o.jsxs("button",{onClick:()=>i("services"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:s==="services"?{borderBottomColor:n.primary_color,color:n.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Yn,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Services"})]}),o.jsxs("button",{onClick:()=>i("appointments"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:s==="appointments"?{borderBottomColor:n.primary_color,color:n.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Pe,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Appointments"})]}),o.jsxs("button",{onClick:()=>i("rewards"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:s==="rewards"?{borderBottomColor:n.primary_color,color:n.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Be,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Rewards"})]}),o.jsxs("button",{onClick:()=>i("offers"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 relative whitespace-nowrap flex-shrink-0",style:s==="offers"?{borderBottomColor:n.primary_color,color:n.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Zr,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Offers"}),h>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:h})]})]})}),s==="vehicles"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 text-white font-medium rounded-lg transition-colors",style:{backgroundColor:n.primary_color},onMouseEnter:b=>b.currentTarget.style.backgroundColor=n.secondary_color,onMouseLeave:b=>b.currentTarget.style.backgroundColor=n.primary_color,children:[o.jsx(Xr,{className:"w-5 h-5"}),"Add Vehicle"]})}),l.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(sr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Vehicles Yet"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"Add your vehicles to book appointments and track service history."}),o.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-6 py-3 text-white font-medium rounded-lg transition-colors",style:{backgroundColor:n.primary_color},onMouseEnter:b=>b.currentTarget.style.backgroundColor=n.secondary_color,onMouseLeave:b=>b.currentTarget.style.backgroundColor=n.primary_color,children:[o.jsx(Xr,{className:"w-5 h-5"}),"Add Your First Vehicle"]})]}):l.map(b=>o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[b.picture_url&&o.jsx("div",{className:"w-full h-48 overflow-hidden",children:o.jsx("img",{src:b.picture_url,alt:`${b.year} ${b.make} ${b.model}`,className:"w-full h-full object-cover",onError:f=>{f.target.style.display="none"}})}),o.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(sr,{className:"w-5 h-5 text-slate-600"}),o.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[b.year," ",b.make," ",b.model]})]}),o.jsxs("span",{className:"text-sm text-slate-600",children:[b.mileage.toLocaleString()," miles"]})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1 space-y-0.5",children:[b.color&&o.jsxs("p",{children:["Color: ",b.color]}),b.license_plate&&o.jsxs("p",{children:["License Plate: ",b.license_plate]}),b.vin&&o.jsxs("p",{children:["VIN: ",b.vin]})]})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("h4",{className:"font-semibold text-slate-900 mb-4",children:"Service History"}),b.services.length===0?o.jsx("p",{className:"text-slate-600 text-sm",children:"No service history yet."}):o.jsx("div",{className:"space-y-4",children:b.services.map(f=>o.jsxs("div",{className:"flex items-start justify-between p-4 bg-slate-50 rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Pe,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-sm text-slate-600",children:new Date(f.service_date).toLocaleDateString()})]}),o.jsx("p",{className:"font-medium text-slate-900 mb-1",children:f.description}),f.notes&&o.jsx("p",{className:"text-sm text-slate-600",children:f.notes}),f.mileage_at_service&&o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Mileage: ",f.mileage_at_service.toLocaleString()]})]}),o.jsxs("div",{className:"text-right ml-4",children:[o.jsxs("p",{className:"font-bold text-slate-900",children:["$",Number(f.amount).toFixed(2)]}),o.jsxs("p",{className:"text-sm",style:{color:n.primary_color},children:["+",f.points_earned," pts"]})]})]},f.id))})]})]},b.id))]}),s==="services"&&o.jsx(nx,{}),s==="appointments"&&o.jsx(ix,{}),s==="rewards"&&o.jsx(rx,{}),s==="offers"&&o.jsx(sx,{})]}),g&&t&&o.jsx(Hh,{customer:t,onClose:()=>{v(!1),w()}})]})}function mx({customer:t,onClose:e}){const{customer:r}=He(),{brandSettings:n}=wt(),[s,i]=j.useState([]),[l,a]=j.useState(10),[c,u]=j.useState(!1),[h,d]=j.useState(""),[g,v]=j.useState({vehicleId:"",serviceDate:new Date().toISOString().split("T")[0],description:"",amount:"",mileageAtService:"",notes:""});j.useEffect(()=>{w(),_()},[]);const w=async()=>{try{const{data:f,error:p}=await L.from("vehicles").select("*").eq("customer_id",t.id);if(p)throw p;i(f||[]),f&&f.length>0&&v(m=>({...m,vehicleId:f[0].id}))}catch(f){console.error("Error loading vehicles:",f)}},_=async()=>{try{const{data:f,error:p}=await L.from("shop_settings").select("points_per_dollar").maybeSingle();if(p)throw p;f&&a(Number(f.points_per_dollar))}catch(f){console.error("Error loading settings:",f)}},b=async f=>{f.preventDefault(),d(""),u(!0);try{const p=parseFloat(g.amount);if(isNaN(p)||p<=0)throw new Error("Please enter a valid amount");const m=t.tier_multiplier||1,y=Math.floor(p*l*m),{error:S}=await L.from("services").insert({vehicle_id:g.vehicleId,customer_id:t.id,service_date:g.serviceDate,description:g.description,amount:p,points_earned:y,mileage_at_service:g.mileageAtService?parseInt(g.mileageAtService):null,notes:g.notes||null,created_by:(r==null?void 0:r.id)||null});if(S)throw S;if(g.mileageAtService){const k=parseInt(g.mileageAtService),{error:x}=await L.from("vehicles").update({current_mileage:k,last_service_date:g.serviceDate,last_service_mileage:k}).eq("id",g.vehicleId);if(x)throw x}e()}catch(p){d(p instanceof Error?p.message:"An error occurred")}finally{u(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Add Service Record"}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors",children:o.jsx(fr,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Customer"}),o.jsx("p",{className:"font-semibold text-slate-900",children:t.full_name}),o.jsx("p",{className:"text-sm text-slate-600",children:t.email})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"vehicleId",className:"block text-sm font-medium text-slate-700 mb-1",children:"Vehicle"}),o.jsx("select",{id:"vehicleId",required:!0,value:g.vehicleId,onChange:f=>v({...g,vehicleId:f.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:s.map(f=>o.jsxs("option",{value:f.id,children:[f.year," ",f.make," ",f.model,f.license_plate?` - ${f.license_plate}`:""]},f.id))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"serviceDate",className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Date"}),o.jsx("input",{id:"serviceDate",type:"date",required:!0,value:g.serviceDate,onChange:f=>v({...g,serviceDate:f.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Description"}),o.jsx("input",{id:"description",type:"text",required:!0,value:g.description,onChange:f=>v({...g,description:f.target.value}),placeholder:"e.g., Oil Change, Brake Replacement",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount ($)"}),o.jsx("input",{id:"amount",type:"number",step:"0.01",min:"0",required:!0,value:g.amount,onChange:f=>v({...g,amount:f.target.value}),placeholder:"0.00",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"}),o.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Reward points: ",g.amount?Math.floor((parseFloat(g.amount)||0)*l*(t.tier_multiplier||1)):0," points",t.tier_multiplier>1?` (${l} pts/$1  ${t.tier_multiplier}x tier multiplier)`:` (${l} pts/$1)`]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"mileageAtService",className:"block text-sm font-medium text-slate-700 mb-1",children:"Mileage at Service (Optional)"}),o.jsx("input",{id:"mileageAtService",type:"number",min:"0",value:g.mileageAtService,onChange:f=>v({...g,mileageAtService:f.target.value}),placeholder:"e.g., 45000",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes (Optional)"}),o.jsx("textarea",{id:"notes",value:g.notes,onChange:f=>v({...g,notes:f.target.value}),rows:3,placeholder:"Any additional notes...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"})]}),h&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:h}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:c,className:"flex-1 text-white font-medium py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:c?"#cbd5e1":n.primary_color},onMouseEnter:f=>!c&&(f.currentTarget.style.backgroundColor=n.secondary_color),onMouseLeave:f=>!c&&(f.currentTarget.style.backgroundColor=n.primary_color),children:c?"Adding...":"Add Service"})]})]})]})})}function px(){const{brandSettings:t}=wt(),[e,r]=j.useState([]),[n,s]=j.useState([]),[i,l]=j.useState(!0),[a,c]=j.useState(!1),[u,h]=j.useState(!1),[d,g]=j.useState(null),[v,w]=j.useState(null),[_,b]=j.useState({name:"",description:"",points_cost:""}),[f,p]=j.useState({name:"",description:"",points_cost:""});j.useEffect(()=>{m()},[]);const m=async()=>{try{const[E,$]=await Promise.all([L.from("reward_items").select("*").order("points_cost",{ascending:!0}),L.from("customers").select("*").order("full_name",{ascending:!0})]);if(E.error)throw E.error;if($.error)throw $.error;r(E.data||[]),s($.data||[])}catch(E){console.error("Error loading rewards:",E)}finally{l(!1)}},y=async E=>{E.preventDefault();try{const{error:$}=await L.from("reward_items").insert({name:_.name,description:_.description,points_cost:parseInt(_.points_cost),is_active:!0});if($)throw $;b({name:"",description:"",points_cost:""}),c(!1),m()}catch($){console.error("Error adding reward:",$),alert("Failed to add reward. Please try again.")}},S=async E=>{try{const{error:$}=await L.from("reward_items").update({is_active:!E.is_active}).eq("id",E.id);if($)throw $;m()}catch($){console.error("Error updating reward:",$)}},k=async E=>{if(confirm("Are you sure you want to delete this reward?"))try{const{error:$}=await L.from("reward_items").delete().eq("id",E);if($)throw $;m()}catch($){console.error("Error deleting reward:",$),alert("Failed to delete reward. It may have existing redemptions.")}},x=E=>{w(E.id),p({name:E.name,description:E.description||"",points_cost:E.points_cost.toString()})},C=()=>{w(null),p({name:"",description:"",points_cost:""})},O=async E=>{try{const{error:$}=await L.from("reward_items").update({name:f.name,description:f.description,points_cost:parseInt(f.points_cost),updated_at:new Date().toISOString()}).eq("id",E);if($)throw $;w(null),p({name:"",description:"",points_cost:""}),m()}catch($){console.error("Error updating reward:",$),alert("Failed to update reward. Please try again.")}},N=async E=>{if(d)try{const $=n.find(I=>I.id===E);if(!$)return;if($.reward_points<d.points_cost){alert("Customer does not have enough points for this reward.");return}const{error:P}=await L.from("reward_redemptions").insert({customer_id:E,reward_item_id:d.id,points_spent:d.points_cost,status:"completed"});if(P)throw P;alert("Reward redeemed successfully!"),h(!1),g(null),m()}catch($){console.error("Error redeeming reward:",$),alert("Failed to redeem reward. Please try again.")}};return i?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-slate-600",children:"Loading rewards..."})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Be,{className:"w-6 h-6",style:{color:t.primary_color}}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Rewards Management"})]}),o.jsxs("button",{onClick:()=>c(!a),className:"flex items-center gap-2 px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:t.primary_color},onMouseEnter:E=>E.currentTarget.style.backgroundColor=t.secondary_color,onMouseLeave:E=>E.currentTarget.style.backgroundColor=t.primary_color,children:[o.jsx(Xr,{className:"w-5 h-5"}),o.jsx("span",{children:"Add Reward"})]})]}),a&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Add New Reward"}),o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Reward Name"}),o.jsx("input",{type:"text",required:!0,value:_.name,onChange:E=>b({..._,name:E.target.value}),placeholder:"e.g., Free Oil Change",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),o.jsx("textarea",{required:!0,value:_.description,onChange:E=>b({..._,description:E.target.value}),placeholder:"Describe the reward...",rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Points Cost"}),o.jsx("input",{type:"number",required:!0,min:"1",value:_.points_cost,onChange:E=>b({..._,points_cost:E.target.value}),placeholder:"e.g., 500",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>{c(!1),b({name:"",description:"",points_cost:""})},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:t.primary_color},onMouseEnter:E=>E.currentTarget.style.backgroundColor=t.secondary_color,onMouseLeave:E=>E.currentTarget.style.backgroundColor=t.primary_color,children:"Add Reward"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(E=>o.jsx("div",{className:"bg-white rounded-xl shadow-sm border-2 transition-all",style:{borderColor:E.is_active?`${t.primary_color}40`:"#e2e8f0",opacity:E.is_active?1:.6},children:v===E.id?o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Reward Name"}),o.jsx("input",{type:"text",required:!0,value:f.name,onChange:$=>p({...f,name:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Description"}),o.jsx("textarea",{required:!0,value:f.description,onChange:$=>p({...f,description:$.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Points Cost"}),o.jsx("input",{type:"number",required:!0,min:"1",value:f.points_cost,onChange:$=>p({...f,points_cost:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:C,className:"flex-1 px-3 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 text-sm transition-colors",children:"Cancel"}),o.jsx("button",{onClick:()=>O(E.id),className:"flex-1 px-3 py-2 text-white rounded-lg text-sm transition-colors",style:{backgroundColor:t.primary_color},onMouseEnter:$=>$.currentTarget.style.backgroundColor=t.secondary_color,onMouseLeave:$=>$.currentTarget.style.backgroundColor=t.primary_color,children:"Save"})]})]}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-1",children:E.name}),o.jsx("p",{className:"text-sm text-slate-600",children:E.description})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>x(E),className:"p-1.5 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:"Edit",children:o.jsx(wl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>S(E),className:"p-1.5 rounded-lg transition-colors",style:E.is_active?{backgroundColor:`${t.primary_color}20`,color:t.primary_color}:{backgroundColor:"#f1f5f9",color:"#64748b"},title:E.is_active?"Deactivate":"Activate",children:o.jsx(Be,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>k(E.id),className:"p-1.5 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",title:"Delete",children:o.jsx(Qg,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-200",children:[o.jsxs("div",{className:"flex items-center gap-1.5 font-semibold",style:{color:t.primary_color},children:[o.jsx(Ft,{className:"w-5 h-5"}),o.jsxs("span",{children:[E.points_cost," pts"]})]}),E.is_active&&o.jsx("button",{onClick:()=>{g(E),h(!0)},className:"px-3 py-1.5 text-white text-sm rounded-lg transition-colors",style:{backgroundColor:t.primary_color},onMouseEnter:$=>$.currentTarget.style.backgroundColor=t.secondary_color,onMouseLeave:$=>$.currentTarget.style.backgroundColor=t.primary_color,children:"Redeem for Customer"})]}),!E.is_active&&o.jsx("div",{className:"mt-2 text-xs text-slate-500 font-medium",children:"Inactive"})]})},E.id))}),e.length===0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Be,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Rewards Yet"}),o.jsx("p",{className:"text-slate-600",children:"Add reward items that customers can redeem with points."})]}),u&&d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[o.jsxs("div",{className:"p-6 border-b border-slate-200",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Redeem Reward"}),o.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[d.name," (",d.points_cost," points)"]})]}),o.jsxs("div",{className:"p-6 max-h-96 overflow-y-auto",children:[o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Select a customer to redeem this reward for:"}),o.jsx("div",{className:"space-y-2",children:n.filter(E=>!E.is_admin).map(E=>o.jsx("button",{onClick:()=>N(E.id),disabled:E.reward_points<d.points_cost,className:"w-full text-left p-3 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-900",children:E.full_name}),o.jsx("p",{className:"text-sm text-slate-600",children:E.email})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-semibold",style:{color:t.primary_color},children:[E.reward_points," pts"]}),E.reward_points<d.points_cost&&o.jsx("p",{className:"text-xs text-red-600",children:"Not enough points"})]})]})},E.id))})]}),o.jsx("div",{className:"p-6 border-t border-slate-200",children:o.jsx("button",{onClick:()=>{h(!1),g(null)},className:"w-full px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancel"})})]})})]})}function gx(){const{customer:t}=He();wt();const[e,r]=j.useState([]),[n,s]=j.useState(!0),[i,l]=j.useState(!1),[a,c]=j.useState(!1),[u,h]=j.useState(null),[d,g]=j.useState([]),[v,w]=j.useState(new Set),[_,b]=j.useState(!1),[f,p]=j.useState({title:"",description:"",discount_type:"percentage",discount_value:0,promo_code:"",valid_until:""});j.useEffect(()=>{m(),y()},[]);const m=async()=>{try{const{data:P,error:I}=await L.from("promotions").select("*").order("created_at",{ascending:!1});if(I)throw I;const Oe=await Promise.all((P||[]).map(async fe=>{const{count:ve,error:A}=await L.from("customer_promotions").select("*",{count:"exact",head:!0}).eq("promotion_id",fe.id);return{...fe,recipient_count:A?0:ve||0}}));r(Oe)}catch(P){console.error("Error loading promotions:",P)}finally{s(!1)}},y=async()=>{try{const{data:P,error:I}=await L.from("customers").select("*").order("full_name",{ascending:!0});if(I)throw I;g(P||[])}catch(P){console.error("Error loading customers:",P)}},S=async P=>{P.preventDefault();try{const{error:I}=await L.from("promotions").insert({title:f.title,description:f.description,discount_type:f.discount_type,discount_value:f.discount_value,promo_code:f.promo_code||null,valid_until:f.valid_until,is_active:!0,created_by:t==null?void 0:t.id});if(I)throw I;p({title:"",description:"",discount_type:"percentage",discount_value:0,promo_code:"",valid_until:""}),l(!1),m()}catch(I){console.error("Error creating promotion:",I),alert("Failed to create promotion")}},k=async P=>{try{const{error:I}=await L.from("promotions").update({is_active:!P.is_active,updated_at:new Date().toISOString()}).eq("id",P.id);if(I)throw I;m()}catch(I){console.error("Error updating promotion:",I)}},x=P=>{h(P),w(new Set),c(!0)},C=P=>{const I=new Set(v);I.has(P)?I.delete(P):I.add(P),w(I)},O=()=>{v.size===d.length?w(new Set):w(new Set(d.map(P=>P.id)))},N=async()=>{var P;if(!(!u||v.size===0)){b(!0);try{const I=await L.from("customer_promotions").select("customer_id").eq("promotion_id",u.id),Oe=new Set(((P=I.data)==null?void 0:P.map(A=>A.customer_id))||[]),fe=Array.from(v).filter(A=>!Oe.has(A));if(fe.length===0){alert("All selected customers have already received this promotion"),b(!1);return}const{error:ve}=await L.from("customer_promotions").insert(fe.map(A=>({customer_id:A,promotion_id:u.id})));if(ve)throw ve;alert(`Promotion sent to ${fe.length} customer(s)!`),c(!1),h(null),w(new Set),m()}catch(I){console.error("Error sending promotion:",I),alert("Failed to send promotion")}finally{b(!1)}}},E=P=>{switch(P){case"percentage":return o.jsx(zh,{className:"w-5 h-5"});case"fixed_amount":return o.jsx(ka,{className:"w-5 h-5"});case"points_bonus":return o.jsx(qh,{className:"w-5 h-5"});case"free_service":return o.jsx(Be,{className:"w-5 h-5"});default:return o.jsx(Zr,{className:"w-5 h-5"})}},$=P=>{switch(P.discount_type){case"percentage":return`${P.discount_value}% off`;case"fixed_amount":return`$${P.discount_value} off`;case"points_bonus":return`${P.discount_value}x points multiplier`;case"free_service":return"Free service";default:return""}};return n?o.jsx("div",{className:"text-slate-600",children:"Loading promotions..."}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Promotions"}),o.jsx("p",{className:"text-slate-600",children:"Create and manage special offers for your customers"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Create Promotion"]})]}),e.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Be,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Promotions Yet"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"Create your first promotion to start engaging customers"}),o.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center gap-2 bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Create Promotion"]})]}):o.jsx("div",{className:"space-y-4",children:e.map(P=>o.jsx("div",{className:`bg-white rounded-xl shadow-sm border-2 ${P.is_active?"border-emerald-200":"border-slate-200"} overflow-hidden`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${P.is_active?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"}`,children:E(P.discount_type)}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:P.title}),o.jsx("p",{className:"text-emerald-600 font-semibold",children:$(P)})]})]}),o.jsx("p",{className:"text-slate-700 mb-3",children:P.description}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[P.promo_code&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Zr,{className:"w-4 h-4"}),o.jsx("span",{className:"font-mono font-semibold",children:P.promo_code})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Pe,{className:"w-4 h-4"}),"Valid until ",new Date(P.valid_until).toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(qr,{className:"w-4 h-4"}),"Sent to ",P.recipient_count," customer(s)"]})]})]}),o.jsx("div",{className:"flex flex-col items-end gap-2",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${P.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:P.is_active?"Active":"Inactive"})})]}),o.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-200",children:[o.jsx("button",{onClick:()=>x(P),disabled:!P.is_active,className:"flex-1 bg-emerald-500 hover:bg-emerald-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium py-2 rounded-lg transition-colors",children:"Send to Customers"}),o.jsx("button",{onClick:()=>k(P),className:`px-6 py-2 rounded-lg font-medium transition-colors ${P.is_active?"bg-slate-200 hover:bg-slate-300 text-slate-700":"bg-emerald-100 hover:bg-emerald-200 text-emerald-700"}`,children:P.is_active?"Deactivate":"Activate"})]})]})},P.id))}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Create New Promotion"}),o.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600",children:o.jsx(fr,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Promotion Title"}),o.jsx("input",{type:"text",required:!0,value:f.title,onChange:P=>p({...f,title:P.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",placeholder:"e.g., Spring Oil Change Special"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),o.jsx("textarea",{required:!0,value:f.description,onChange:P=>p({...f,description:P.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none resize-none",placeholder:"Describe the offer in detail..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Discount Type"}),o.jsxs("select",{value:f.discount_type,onChange:P=>p({...f,discount_type:P.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"percentage",children:"Percentage Off"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"points_bonus",children:"Points Multiplier"}),o.jsx("option",{value:"free_service",children:"Free Service"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Discount Value"}),o.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:f.discount_value,onChange:P=>p({...f,discount_value:parseFloat(P.target.value)}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",placeholder:f.discount_type==="percentage"?"10":"25.00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Promo Code (optional)"}),o.jsx("input",{type:"text",value:f.promo_code,onChange:P=>p({...f,promo_code:P.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none",placeholder:"e.g., SPRING2024"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Valid Until"}),o.jsx("input",{type:"date",required:!0,value:f.valid_until,onChange:P=>p({...f,valid_until:P.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Create Promotion"})]})]})]})}),a&&u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Send Promotion"}),o.jsx("p",{className:"text-sm text-slate-600",children:u.title})]}),o.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600",children:o.jsx(fr,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Select customers to receive this promotion"}),o.jsx("button",{onClick:O,className:"text-sm font-medium text-emerald-600 hover:text-emerald-700",children:v.size===d.length?"Deselect All":"Select All"})]}),o.jsx("div",{className:"space-y-2",children:d.map(P=>o.jsx("div",{onClick:()=>C(P.id),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${v.has(P.id)?"border-emerald-500 bg-emerald-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${v.has(P.id)?"border-emerald-500 bg-emerald-500":"border-slate-300"}`,children:v.has(P.id)&&o.jsx(ba,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-semibold text-slate-900",children:P.full_name}),(()=>{const I=$i(P.tier);return o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r ${I.gradient} text-white text-xs font-medium rounded-full`,children:[o.jsx(Na,{className:"w-3 h-3"}),I.displayName]})})()]}),o.jsx("p",{className:"text-sm text-slate-600",children:P.email})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"text-sm text-slate-600",children:[P.reward_points," pts"]})})]})},P.id))})]}),o.jsx("div",{className:"border-t border-slate-200 px-6 py-4 bg-slate-50",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-white font-medium transition-colors",children:"Cancel"}),o.jsx("button",{onClick:N,disabled:v.size===0||_,className:"flex-1 bg-emerald-500 hover:bg-emerald-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:_?"Sending...":`Send to ${v.size} Customer${v.size!==1?"s":""}`})]})})]})})]})}function xx(){const{customer:t}=He(),{brandSettings:e}=wt(),[r,n]=j.useState([]),[s,i]=j.useState(!0),[l,a]=j.useState("all"),[c,u]=j.useState(null),[h,d]=j.useState(""),[g,v]=j.useState(null);j.useEffect(()=>{w();const x=setInterval(w,5e3);return()=>clearInterval(x)},[]);const w=async()=>{try{const{data:x,error:C}=await L.from("appointments").select("*").order("requested_date",{ascending:!0}).order("requested_time",{ascending:!0});if(C)throw C;const O=[...new Set((x==null?void 0:x.map(I=>I.customer_id))||[])],N=[...new Set((x==null?void 0:x.map(I=>I.vehicle_id).filter(Boolean))||[])],[E,$]=await Promise.all([L.from("customers").select("*").in("id",O),N.length>0?L.from("vehicles").select("*").in("id",N):Promise.resolve({data:[],error:null})]);if(E.error)throw E.error;if($.error)throw $.error;const P=(x||[]).map(I=>{var Oe,fe;return{...I,customer:(Oe=E.data)==null?void 0:Oe.find(ve=>ve.id===I.customer_id),vehicle:(fe=$.data)==null?void 0:fe.find(ve=>ve.id===I.vehicle_id)}});n(P)}catch(x){console.error("Error loading appointments:",x),f("error","Failed to load appointments")}finally{i(!1)}},_=async(x,C,O)=>{try{const N={status:C,updated_at:new Date().toISOString()};C==="confirmed"?(N.confirmed_by=t.id,N.confirmed_at=new Date().toISOString(),O&&(N.admin_notes=O)):C==="cancelled"&&O&&(N.cancelled_reason=O);const{error:E}=await L.from("appointments").update(N).eq("id",x);if(E)throw E;f("success",`Appointment ${C}`),u(null),d(""),w(),Notification.permission==="granted"&&new Notification("Appointment Updated",{body:`Appointment has been ${C}`,icon:"/favicon.ico"})}catch(N){console.error("Error updating appointment:",N),f("error","Failed to update appointment")}},b=async x=>{try{const{error:C}=await L.from("appointments").update({admin_notes:h,updated_at:new Date().toISOString()}).eq("id",x);if(C)throw C;f("success","Notes saved"),u(null),d(""),w()}catch(C){console.error("Error saving notes:",C),f("error","Failed to save notes")}},f=(x,C)=>{v({type:x,text:C}),setTimeout(()=>v(null),3e3)},p=x=>{switch(x){case"pending":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded-full",children:[o.jsx(_a,{className:"w-4 h-4"}),"Pending"]});case"confirmed":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full",style:{backgroundColor:`${e.primary_color}20`,color:e.primary_color},children:[o.jsx(ir,{className:"w-4 h-4"}),"Confirmed"]});case"cancelled":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full",children:[o.jsx(en,{className:"w-4 h-4"}),"Cancelled"]});case"completed":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:[o.jsx(ir,{className:"w-4 h-4"}),"Completed"]});default:return null}},m=x=>new Date(x).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),y=x=>{const[C,O]=x.split(":"),N=parseInt(C),E=N>=12?"PM":"AM";return`${N%12||12}:${O} ${E}`},S=r.filter(x=>l==="all"?!0:x.status===l),k=r.filter(x=>x.status==="pending").length;return s?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-slate-600",children:"Loading appointments..."})}):o.jsxs("div",{className:"max-w-6xl space-y-6",children:[g&&o.jsx("div",{className:"p-4 rounded-lg",style:g.type==="success"?{backgroundColor:`${e.primary_color}10`,color:e.primary_color}:{backgroundColor:"#fef2f2",color:"#991b1b"},children:g.text}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Appointments"}),o.jsx("p",{className:"text-slate-600",children:"Manage customer appointment requests"})]}),k>0&&o.jsx("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg px-4 py-2",children:o.jsxs("span",{className:"font-semibold text-yellow-900",children:[k," pending"]})})]}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","confirmed","cancelled","completed"].map(x=>o.jsxs("button",{onClick:()=>a(x),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l===x?"text-white":"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50"}`,style:l===x?{backgroundColor:e.primary_color}:void 0,children:[x.charAt(0).toUpperCase()+x.slice(1),x==="pending"&&k>0&&o.jsx("span",{className:"ml-2 bg-yellow-400 text-yellow-900 px-2 py-0.5 rounded-full text-xs font-bold",children:k})]},x))}),o.jsx("div",{className:"space-y-4",children:S.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(Pe,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Appointments"}),o.jsx("p",{className:"text-slate-600",children:l==="all"?"No appointments found.":`No ${l} appointments found.`})]}):S.map(x=>{var C,O;return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:x.service_type}),p(x.status)]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"space-y-2 text-sm",children:[x.customer&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zg,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-slate-900 font-medium",children:x.customer.full_name})]}),((C=x.customer)==null?void 0:C.email)&&o.jsx("div",{className:"text-slate-600 ml-6",children:x.customer.email}),((O=x.customer)==null?void 0:O.phone)&&o.jsx("div",{className:"text-slate-600 ml-6",children:x.customer.phone})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pe,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-slate-900",children:m(x.requested_date)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ja,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-slate-900",children:y(x.requested_time)})]}),x.vehicle&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"w-4 h-4 text-slate-500"}),o.jsxs("span",{className:"text-slate-900",children:[x.vehicle.year," ",x.vehicle.make," ",x.vehicle.model]})]})]})]}),x.description&&o.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:[o.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Customer Notes:"}),o.jsx("p",{className:"text-sm text-slate-600",children:x.description})]}),c===x.id?o.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Admin Notes:"}),o.jsx("textarea",{value:h,onChange:N=>d(N.target.value),rows:3,placeholder:"Add notes about this appointment...",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("button",{onClick:()=>b(x.id),className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors",children:[o.jsx(Fh,{className:"w-4 h-4"}),"Save"]}),o.jsxs("button",{onClick:()=>{u(null),d("")},className:"flex items-center gap-1 px-3 py-1.5 bg-slate-200 hover:bg-slate-300 text-slate-700 text-sm font-medium rounded-lg transition-colors",children:[o.jsx(fr,{className:"w-4 h-4"}),"Cancel"]})]})]}):x.admin_notes?o.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Admin Notes:"}),o.jsx("button",{onClick:()=>{u(x.id),d(x.admin_notes||"")},className:"text-blue-600 hover:text-blue-800",children:o.jsx(wl,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-sm text-blue-800",children:x.admin_notes})]}):o.jsxs("button",{onClick:()=>{u(x.id),d("")},className:"mt-3 flex items-center gap-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:[o.jsx(wl,{className:"w-4 h-4"}),"Add Admin Notes"]}),x.cancelled_reason&&o.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsx("p",{className:"text-sm font-medium text-red-900 mb-1",children:"Cancellation Reason:"}),o.jsx("p",{className:"text-sm text-red-800",children:x.cancelled_reason})]})]})}),x.status==="pending"&&o.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-200",children:[o.jsxs("button",{onClick:()=>_(x.id,"confirmed"),className:"flex items-center gap-2 px-4 py-2 text-white font-medium rounded-lg transition-colors",style:{backgroundColor:e.primary_color},onMouseEnter:N=>N.currentTarget.style.backgroundColor=e.secondary_color,onMouseLeave:N=>N.currentTarget.style.backgroundColor=e.primary_color,children:[o.jsx(ir,{className:"w-4 h-4"}),"Confirm"]}),o.jsxs("button",{onClick:()=>{const N=prompt("Enter cancellation reason:");N&&_(x.id,"cancelled",N)},className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg transition-colors",children:[o.jsx(en,{className:"w-4 h-4"}),"Cancel"]})]}),x.status==="confirmed"&&o.jsx("div",{className:"flex gap-2 pt-4 border-t border-slate-200",children:o.jsxs("button",{onClick:()=>_(x.id,"completed"),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors",children:[o.jsx(ir,{className:"w-4 h-4"}),"Mark Complete"]})})]},x.id)})})]})}function vx(){const{customer:t}=He(),{refreshBrand:e}=wt(),[r,n]=j.useState(null),[s,i]=j.useState(10),[l,a]=j.useState({bronze_points_min:0,bronze_multiplier:1,silver_points_min:500,silver_multiplier:1.25,gold_points_min:1500,gold_multiplier:1.5,platinum_points_min:3e3,platinum_multiplier:2}),[c,u]=j.useState({shop_logo_url:"",primary_color:"#10b981",secondary_color:"#059669",accent_color:"#047857",header_text:"Auto Shop Rewards",welcome_message:"Welcome back"}),[h,d]=j.useState(!0),[g,v]=j.useState(!1),[w,_]=j.useState(null);j.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:m,error:y}=await L.from("shop_settings").select("*").maybeSingle();if(y)throw y;m&&(n(m),i(Number(m.points_per_dollar)),a({bronze_points_min:Number(m.bronze_points_min),bronze_multiplier:Number(m.bronze_multiplier),silver_points_min:Number(m.silver_points_min),silver_multiplier:Number(m.silver_multiplier),gold_points_min:Number(m.gold_points_min),gold_multiplier:Number(m.gold_multiplier),platinum_points_min:Number(m.platinum_points_min),platinum_multiplier:Number(m.platinum_multiplier)}),u({shop_logo_url:m.shop_logo_url||"",primary_color:m.primary_color||"#10b981",secondary_color:m.secondary_color||"#059669",accent_color:m.accent_color||"#047857",header_text:m.header_text||"Auto Shop Rewards",welcome_message:m.welcome_message||"Welcome back"}))}catch(m){console.error("Error loading settings:",m),p("error","Failed to load settings")}finally{d(!1)}},f=async()=>{if(!(!r||!t)){v(!0),_(null);try{const{error:m}=await L.from("shop_settings").update({points_per_dollar:s,...l,...c,shop_logo_url:c.shop_logo_url||null,updated_at:new Date().toISOString(),updated_by:t.id}).eq("id",r.id);if(m)throw m;p("success","Settings saved successfully"),b(),e()}catch(m){console.error("Error saving settings:",m),p("error","Failed to save settings")}finally{v(!1)}}},p=(m,y)=>{_({type:m,text:y}),setTimeout(()=>_(null),3e3)};return h?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-slate-600",children:"Loading settings..."})}):o.jsx("div",{className:"max-w-3xl",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Bh,{className:"w-5 h-5 text-slate-700"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Shop Settings"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Configure reward system and other options"})]})]})}),o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[o.jsx(Hg,{className:"w-5 h-5 text-slate-700"}),"Brand Customization"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Shop Logo URL"}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Wg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"url",value:c.shop_logo_url,onChange:m=>u({...c,shop_logo_url:m.target.value}),placeholder:"https://example.com/logo.png",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),c.shop_logo_url&&o.jsx("div",{className:"w-12 h-12 border-2 border-slate-200 rounded-lg overflow-hidden flex-shrink-0",children:o.jsx("img",{src:c.shop_logo_url,alt:"Shop logo preview",className:"w-full h-full object-contain",onError:m=>{m.target.style.display="none"}})})]}),o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Enter the URL of your shop logo. This will replace the default icon throughout the app."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Header Text"}),o.jsx("input",{type:"text",value:c.header_text,onChange:m=>u({...c,header_text:m.target.value}),placeholder:"Auto Shop Rewards",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"}),o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"This text appears as the main header in the dashboard."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Welcome Message"}),o.jsx("input",{type:"text",value:c.welcome_message,onChange:m=>u({...c,welcome_message:m.target.value}),placeholder:"Welcome back",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"}),o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:'This message greets customers in the dashboard (e.g., "Welcome back, John").'})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Primary Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:c.primary_color,onChange:m=>u({...c,primary_color:m.target.value}),className:"w-12 h-10 border border-slate-300 rounded-lg cursor-pointer"}),o.jsx("input",{type:"text",value:c.primary_color,onChange:m=>u({...c,primary_color:m.target.value}),placeholder:"#10b981",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none font-mono text-sm"})]}),o.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Main buttons & accents"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Secondary Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:c.secondary_color,onChange:m=>u({...c,secondary_color:m.target.value}),className:"w-12 h-10 border border-slate-300 rounded-lg cursor-pointer"}),o.jsx("input",{type:"text",value:c.secondary_color,onChange:m=>u({...c,secondary_color:m.target.value}),placeholder:"#059669",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none font-mono text-sm"})]}),o.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Hover states"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Accent Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:c.accent_color,onChange:m=>u({...c,accent_color:m.target.value}),className:"w-12 h-10 border border-slate-300 rounded-lg cursor-pointer"}),o.jsx("input",{type:"text",value:c.accent_color,onChange:m=>u({...c,accent_color:m.target.value}),placeholder:"#047857",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none font-mono text-sm"})]}),o.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Highlights & badges"})]})]}),o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[o.jsx("h5",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Color Preview"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",style:{backgroundColor:c.primary_color},className:"px-4 py-2 text-white font-medium rounded-lg",children:"Primary Button"}),o.jsx("button",{type:"button",style:{backgroundColor:c.secondary_color},className:"px-4 py-2 text-white font-medium rounded-lg",children:"Secondary Button"}),o.jsx("span",{style:{backgroundColor:c.accent_color},className:"px-3 py-1 text-white text-sm font-medium rounded-full",children:"Accent Badge"})]})]})]})]}),o.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[o.jsx("h4",{className:"text-base font-semibold text-slate-900 mb-4",children:"Rewards Configuration"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Points Per Dollar Spent"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative flex-1 max-w-xs",children:[o.jsx(ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"number",min:"0",step:"0.1",value:s,onChange:m=>i(Number(m.target.value)),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),o.jsx("span",{className:"text-sm text-slate-600",children:"points per $1.00"})]}),o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"For example, if set to 10, a customer spending $50 will earn 500 points."})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h5",{className:"text-sm font-semibold text-blue-900 mb-2",children:"How Points Work"}),o.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[o.jsx("p",{children:" Points are automatically calculated when service records are added"}),o.jsx("p",{children:" Tier multipliers apply on top of base points (e.g., 1.5x for Gold tier)"}),o.jsx("p",{children:" Customers can redeem points for rewards in the Rewards tab"})]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[o.jsx(Ft,{className:"w-5 h-5 text-amber-600"}),"Tier Configuration"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-amber-900 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"w-6 h-6 bg-amber-800 text-white rounded-full flex items-center justify-center text-xs",children:"B"}),"Bronze Tier"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Minimum Points"}),o.jsx("input",{type:"number",min:"0",value:l.bronze_points_min,onChange:m=>a({...l,bronze_points_min:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Points Multiplier"}),o.jsx("input",{type:"number",min:"1",step:"0.1",value:l.bronze_multiplier,onChange:m=>a({...l,bronze_multiplier:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]})]})]}),o.jsxs("div",{className:"bg-slate-100 border-2 border-slate-300 rounded-lg p-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"w-6 h-6 bg-slate-500 text-white rounded-full flex items-center justify-center text-xs",children:"S"}),"Silver Tier"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Minimum Points"}),o.jsx("input",{type:"number",min:"0",value:l.silver_points_min,onChange:m=>a({...l,silver_points_min:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Points Multiplier"}),o.jsx("input",{type:"number",min:"1",step:"0.1",value:l.silver_multiplier,onChange:m=>a({...l,silver_multiplier:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]})]})]}),o.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"w-6 h-6 bg-yellow-600 text-white rounded-full flex items-center justify-center text-xs",children:"G"}),"Gold Tier"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Minimum Points"}),o.jsx("input",{type:"number",min:"0",value:l.gold_points_min,onChange:m=>a({...l,gold_points_min:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Points Multiplier"}),o.jsx("input",{type:"number",min:"1",step:"0.1",value:l.gold_multiplier,onChange:m=>a({...l,gold_multiplier:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]})]})]}),o.jsxs("div",{className:"bg-cyan-50 border-2 border-cyan-400 rounded-lg p-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-cyan-900 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"w-6 h-6 bg-cyan-600 text-white rounded-full flex items-center justify-center text-xs",children:"P"}),"Platinum Tier"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Minimum Points"}),o.jsx("input",{type:"number",min:"0",value:l.platinum_points_min,onChange:m=>a({...l,platinum_points_min:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Points Multiplier"}),o.jsx("input",{type:"number",min:"1",step:"0.1",value:l.platinum_multiplier,onChange:m=>a({...l,platinum_multiplier:Number(m.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]})]})]}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[o.jsx("h5",{className:"text-sm font-semibold text-emerald-900 mb-2",children:"How Tiers Work"}),o.jsxs("div",{className:"text-sm text-emerald-800 space-y-1",children:[o.jsx("p",{children:" Customer tiers are automatically calculated based on their current reward points"}),o.jsx("p",{children:" Tier multipliers increase the points earned per dollar spent"}),o.jsx("p",{children:" Changing tier thresholds will immediately affect all customers"})]})]})]})]})]}),o.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex items-center justify-between",children:[w&&o.jsx("div",{className:`text-sm font-medium ${w.type==="success"?"text-emerald-600":"text-red-600"}`,children:w.text}),o.jsx("div",{className:"ml-auto",children:o.jsxs("button",{onClick:f,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:[o.jsx(Fh,{className:"w-4 h-4"}),g?"Saving...":"Save Settings"]})})]})]})})}function yx(){const{customer:t}=He(),[e,r]=j.useState([]),[n,s]=j.useState(!0),[i,l]=j.useState(null),[a,c]=j.useState(""),[u,h]=j.useState(""),[d,g]=j.useState(!1),[v,w]=j.useState(!1);j.useEffect(()=>{_()},[]);const _=async()=>{try{const{data:y,error:S}=await L.from("customers").select("*").order("created_at",{ascending:!1});if(S)throw S;r(y||[])}catch(y){console.error("Error loading users:",y),m("error","Failed to load users")}finally{s(!1)}},b=async()=>{if(!a||a.length<6){m("error","Password must be at least 6 characters");return}if(a!==u){m("error","Passwords do not match");return}w(!0);try{const{error:y}=await L.auth.updateUser({password:a});if(y)throw y;m("success","Password changed successfully"),c(""),h(""),g(!1)}catch(y){console.error("Error changing password:",y),m("error",y.message||"Failed to change password")}finally{w(!1)}},f=async(y,S)=>{try{const{error:k}=await L.from("customers").update({is_admin:!S}).eq("id",y);if(k)throw k;m("success",`User ${S?"removed from":"promoted to"} admin`),_()}catch(k){console.error("Error updating admin status:",k),m("error","Failed to update admin status")}},p=async(y,S)=>{if(y===(t==null?void 0:t.id)){m("error","You cannot deactivate your own account");return}try{const{error:k}=await L.from("customers").update({is_deactivated:!S}).eq("id",y);if(k)throw k;m("success",`User ${S?"reactivated":"deactivated"}`),_()}catch(k){console.error("Error updating user status:",k),m("error","Failed to update user status")}},m=(y,S)=>{l({type:y,text:S}),setTimeout(()=>l(null),3e3)};return n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-slate-600",children:"Loading users..."})}):o.jsxs("div",{className:"max-w-6xl space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Zc,{className:"w-5 h-5 text-slate-700"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Change Password"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Update your account password"})]})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:d?"text":"password",value:a,onChange:y=>c(y.target.value),placeholder:"Enter new password (min. 6 characters)",className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"}),o.jsx("button",{type:"button",onClick:()=>g(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:d?o.jsx(Bg,{className:"w-5 h-5"}):o.jsx(qg,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password"}),o.jsx("input",{type:d?"text":"password",value:u,onChange:y=>h(y.target.value),placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2",children:[i&&i.type==="success"&&o.jsx("div",{className:"text-sm font-medium text-emerald-600",children:i.text}),i&&i.type==="error"&&o.jsx("div",{className:"text-sm font-medium text-red-600",children:i.text}),o.jsxs("button",{onClick:b,disabled:v||!a||!u,className:"ml-auto flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:[o.jsx(Zc,{className:"w-4 h-4"}),v?"Changing...":"Change Password"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(qr,{className:"w-5 h-5 text-slate-700"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"User Management"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Manage admin access and user accounts"})]})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(y=>o.jsxs("tr",{className:y.is_deactivated?"bg-slate-50 opacity-60":"",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-slate-900",children:y.name}),y.id===(t==null?void 0:t.id)&&o.jsx("div",{className:"text-xs text-emerald-600 font-medium",children:"You"})]})})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-slate-900",children:y.email}),y.phone&&o.jsx("div",{className:"text-xs text-slate-500",children:y.phone})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.is_admin?o.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[o.jsx(Kg,{className:"w-3 h-3"}),"Admin"]}):o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:"Customer"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.is_deactivated?o.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[o.jsx(en,{className:"w-3 h-3"}),"Deactivated"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:[o.jsx(ba,{className:"w-3 h-3"}),"Active"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{onClick:()=>f(y.id,y.is_admin),disabled:y.id===(t==null?void 0:t.id),className:"text-emerald-600 hover:text-emerald-900 disabled:text-slate-400 disabled:cursor-not-allowed",children:y.is_admin?"Remove Admin":"Make Admin"}),o.jsx("span",{className:"text-slate-300",children:"|"}),o.jsx("button",{onClick:()=>p(y.id,y.is_deactivated),disabled:y.id===(t==null?void 0:t.id),className:"text-red-600 hover:text-red-900 disabled:text-slate-400 disabled:cursor-not-allowed",children:y.is_deactivated?"Reactivate":"Deactivate"})]})})]},y.id))})]})}),e.length===0&&o.jsxs("div",{className:"px-6 py-12 text-center",children:[o.jsx(qr,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-600",children:"No users found"})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Important Notes"}),o.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[o.jsx("p",{children:" The first user to register automatically becomes an admin"}),o.jsx("p",{children:" Admins can promote other users to admin or demote them to customers"}),o.jsx("p",{children:" You cannot deactivate your own account"}),o.jsx("p",{children:" Deactivated accounts cannot log in but their data is preserved"}),o.jsx("p",{children:" Always ensure at least one admin account remains active"})]})]})]})}function wx(){const{customer:t,signOut:e}=He(),{brandSettings:r}=wt(),[n,s]=j.useState("customers"),[i,l]=j.useState([]),[a,c]=j.useState([]),[u,h]=j.useState(""),[d,g]=j.useState(!0),[v,w]=j.useState(!1),[_,b]=j.useState(!1),[f,p]=j.useState(null),[m,y]=j.useState(0);j.useEffect(()=>{S(),k(),Notification.permission==="default"&&Notification.requestPermission();const O=setInterval(()=>{k()},5e3);return()=>clearInterval(O)},[]),j.useEffect(()=>{if(!u.trim()){c(i);return}const O=u.toLowerCase(),N=i.filter(E=>{var Oe,fe,ve;const $=((Oe=E.full_name)==null?void 0:Oe.toLowerCase())||"",P=((fe=E.email)==null?void 0:fe.toLowerCase())||"",I=((ve=E.phone)==null?void 0:ve.toLowerCase())||"";return $.includes(O)||P.includes(O)||I.includes(O)});c(N)},[u,i]);const S=async()=>{try{const{data:O,error:N}=await L.from("customers").select("*").order("created_at",{ascending:!1});if(N)throw N;const{data:E,error:$}=await L.from("vehicles").select("*").order("created_at",{ascending:!1});if($)throw $;const P=(O||[]).map(I=>({...I,vehicles:(E||[]).filter(Oe=>Oe.customer_id===I.id)}));l(P),c(P)}catch(O){console.error("Error loading data:",O)}finally{g(!1)}},k=async()=>{try{const{count:O,error:N}=await L.from("appointments").select("*",{count:"exact",head:!0}).eq("status","pending");if(N)throw N;const E=O||0;E>m&&m>0&&Notification.permission==="granted"&&new Notification("New Appointment Request",{body:"A customer has requested a new appointment",icon:"/favicon.ico"}),y(E)}catch(O){console.error("Error loading pending appointments:",O)}},x=O=>{p(O),w(!0)},C=O=>{p(O),b(!0)};return d?o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsx("div",{className:"text-slate-600",children:"Loading..."})}):o.jsxs("div",{className:"min-h-screen bg-slate-50",children:[o.jsx("header",{className:"bg-slate-900 text-white shadow-lg",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:r.shop_logo_url?"transparent":r.primary_color},children:r.shop_logo_url?o.jsx("img",{src:r.shop_logo_url,alt:"Shop logo",className:"w-full h-full object-contain",onError:O=>{const N=O.target;N.style.display="none",N.parentElement.style.backgroundColor=r.primary_color,N.parentElement.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>'}}):o.jsx(Yn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h1",{className:"text-lg sm:text-2xl font-bold truncate",children:"Admin Dashboard"}),o.jsx("p",{className:"text-xs sm:text-sm text-slate-300 truncate",children:t==null?void 0:t.full_name})]})]}),o.jsxs("button",{onClick:e,className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 text-slate-300 hover:text-white transition-colors flex-shrink-0",children:[o.jsx(Uh,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})})}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"mb-6 border-b border-slate-200 -mx-4 sm:mx-0",children:o.jsxs("div",{className:"flex gap-2 sm:gap-4 overflow-x-auto px-4 sm:px-0 scrollbar-hide",children:[o.jsxs("button",{onClick:()=>s("customers"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:n==="customers"?{borderBottomColor:r.primary_color,color:r.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(qr,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Customers"}),o.jsx("span",{className:"hidden sm:inline text-sm bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full",children:i.length})]}),o.jsxs("button",{onClick:()=>s("appointments"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 relative whitespace-nowrap flex-shrink-0",style:n==="appointments"?{borderBottomColor:r.primary_color,color:r.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Pe,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Appointments"}),m>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:m})]}),o.jsxs("button",{onClick:()=>s("rewards"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:n==="rewards"?{borderBottomColor:r.primary_color,color:r.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Be,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Rewards"})]}),o.jsxs("button",{onClick:()=>s("promotions"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:n==="promotions"?{borderBottomColor:r.primary_color,color:r.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Zr,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Promotions"})]}),o.jsxs("button",{onClick:()=>s("users"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:n==="users"?{borderBottomColor:r.primary_color,color:r.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(tu,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Users"})]}),o.jsxs("button",{onClick:()=>s("settings"),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap flex-shrink-0",style:n==="settings"?{borderBottomColor:r.primary_color,color:r.primary_color}:{borderBottomColor:"transparent",color:"#475569"},children:[o.jsx(Bh,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Settings"})]})]})}),n==="customers"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qr,{className:"w-6 h-6 text-slate-700"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Customers"}),o.jsxs("span",{className:"text-slate-500 text-lg",children:["(",i.length,")"]})]}),o.jsxs("div",{className:"relative w-full max-w-md",children:[o.jsx(eu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:u,onChange:O=>h(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]})]}),i.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(qr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Customers Yet"}),o.jsx("p",{className:"text-slate-600",children:"Customers will appear here once they sign up."})]}):a.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[o.jsx(eu,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Results Found"}),o.jsxs("p",{className:"text-slate-600",children:['No customers match your search for "',u,'"']})]}):o.jsx("div",{className:"space-y-4",children:a.map(O=>o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:O.full_name}),(()=>{const N=$i(O.tier);return o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r ${N.gradient} text-white text-xs font-medium rounded-full`,children:[o.jsx(Na,{className:"w-3 h-3"}),N.displayName]})})(),O.has_account?o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${r.primary_color}20`,color:r.primary_color},children:[o.jsx(tu,{className:"w-3 h-3"}),"Has Account"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded-full",children:[o.jsx(Xg,{className:"w-3 h-3"}),"Walk-in"]})]}),o.jsx("p",{className:"text-slate-600",children:O.email}),O.phone&&o.jsx("p",{className:"text-slate-600",children:O.phone})]}),o.jsxs("div",{className:"text-right space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Reward Points"}),o.jsxs("p",{className:"text-2xl font-bold",style:{color:r.primary_color},children:[O.reward_points," points"]}),o.jsxs("p",{className:"text-xs text-slate-500",children:[O.tier_multiplier,"x multiplier"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Lifetime Spending"}),o.jsxs("p",{className:"text-xl font-semibold text-slate-900",children:["$",Number(O.total_lifetime_spending).toFixed(2)]})]}),(()=>{const N=lx(O);return N.nextTier?o.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[o.jsxs("p",{className:"text-xs text-slate-600",children:["To reach ",N.nextTier.displayName]}),o.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["Spend $",N.cashNeeded.toFixed(2)," more"]})]}):null})()]})]}),o.jsxs("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h4",{className:"font-semibold text-slate-900",children:["Vehicles (",O.vehicles.length,")"]}),o.jsx("button",{onClick:()=>C(O),className:"text-sm font-medium transition-colors",style:{color:r.primary_color},onMouseEnter:N=>N.currentTarget.style.color=r.secondary_color,onMouseLeave:N=>N.currentTarget.style.color=r.primary_color,children:"+ Add Vehicle"})]}),O.vehicles.length===0?o.jsx("p",{className:"text-slate-600 text-sm",children:"No vehicles registered yet."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.vehicles.map(N=>o.jsxs("div",{className:"bg-slate-50 rounded-lg overflow-hidden",children:[N.picture_url&&o.jsx("img",{src:N.picture_url,alt:`${N.year} ${N.make} ${N.model}`,className:"w-full h-32 object-cover",onError:E=>{E.target.style.display="none"}}),o.jsxs("div",{className:"p-3",children:[o.jsxs("p",{className:"font-medium text-slate-900",children:[N.year," ",N.make," ",N.model]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1 space-y-1",children:[N.color&&o.jsxs("p",{children:["Color: ",N.color]}),N.license_plate&&o.jsxs("p",{children:["Plate: ",N.license_plate]}),N.vin&&o.jsxs("p",{children:["VIN: ",N.vin]}),o.jsxs("p",{children:["Mileage: ",N.mileage.toLocaleString()]})]})]})]},N.id))})]}),o.jsx("div",{className:"border-t border-slate-200 pt-4 mt-4",children:o.jsx("button",{onClick:()=>x(O),disabled:O.vehicles.length===0,className:"w-full text-white font-medium py-2 rounded-lg transition-colors disabled:cursor-not-allowed",style:{backgroundColor:O.vehicles.length===0?"#cbd5e1":r.primary_color},onMouseEnter:N=>O.vehicles.length>0&&(N.currentTarget.style.backgroundColor=r.secondary_color),onMouseLeave:N=>O.vehicles.length>0&&(N.currentTarget.style.backgroundColor=r.primary_color),children:O.vehicles.length===0?"Add a vehicle first":"Add Service Record"})})]})},O.id))})]}),n==="appointments"&&o.jsx(xx,{}),n==="rewards"&&o.jsx(px,{}),n==="promotions"&&o.jsx(gx,{}),n==="users"&&o.jsx(yx,{}),n==="settings"&&o.jsx(vx,{})]}),v&&f&&o.jsx(mx,{customer:f,onClose:()=>{w(!1),p(null),S()}}),_&&f&&o.jsx(Hh,{customer:f,onClose:()=>{b(!1),p(null),S()}})]})}function _x(){const{user:t,customer:e,loading:r}=He();return r?o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsx("div",{className:"text-slate-600",children:"Loading..."})}):!t||!e?o.jsx(ex,{}):e.is_admin?o.jsx(wx,{}):o.jsx(fx,{})}mh(document.getElementById("root")).render(o.jsx(j.StrictMode,{children:o.jsx(tx,{children:o.jsx(Mg,{children:o.jsx(_x,{})})})}));
